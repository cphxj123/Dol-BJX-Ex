:: Widgets Combat Man-Combat [widget]

<!-- GENERAL USE WIDGETS -->

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-reset-hand">>
	<<if _args[0] is "both">>
		<<set $NPCList[_n].lefthand to 0>>
		<<set $NPCList[_n].righthand to 0>>
	<<else>>
		<<set $NPCList[_n][_args[0]+"hand"] to 0>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC tool this is called for -->
<<widget "combat-reset-tool">>
	<<if _args[0] is "both">>
		<<set $NPCList[_n].lefttool to 0>>
		<<set $NPCList[_n].righttool to 0>>
	<<else>>
		<<set $NPCList[_n][_args[0]+"tool"] to 0>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for, and the name of the targeted PC body part -->
<<widget "combat-set-hand-target">>
	<<set $NPCList[_n][_args[0]+"hand"] to _args[1]>>
<</widget>>

<<widget "combat-get-other-hand">>
	<<set $otherNPChand to (_args[0] is "left"? $NPCList[_n].righthand : $NPCList[_n].lefthand)>>
<</widget>>


<!-- SPECIFIC HAND ACTION WIDGETS -->

<<widget "combat-spank">>
	<<bruise bottom>><<hitstat>><<set $speechspank to 1>>
	<<if $spankobject is "paddle">>
		<<He>> whacks your <<bottom>> with the paddle
		<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.anus_exposed is 0>>
				through your $worn.under_lower.name,
			<<else>>
				reddening your exposed skin and
			<</if>>
		<<elseif $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist">>
			through your $worn.over_lower.name,
		<<elseif $worn.lower.name isnot "naked" and $worn.lower.state is "waist">>
			through your $worn.lower.name,
		<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist">>
			through your $worn.under_lower.name,
		<<else>>
			reddening your exposed skin and
		<</if>>
		sending waves of pain through your whole body.
		<<bodypart_admire_chance random_bottom>>
		<<violence 10 1 1 1 _n>>
	<<elseif getSexToysofType("dildos and whips").includes($spankobject)>>
		<<He>> <<print either("spanks","whacks","slaps","smacks","thwacks")>> your <<bottom>> with the $spankobject,
		<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.anus_exposed is 0>>
				through your $worn.under_lower.name.
			<<else>>
				reddening your exposed skin.
			<</if>>
		<<elseif $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist">>
			through your $worn.over_lower.name.
		<<elseif $worn.lower.name isnot "naked" and $worn.lower.state is "waist">>
			through your $worn.lower.name.
		<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist">>
			through your $worn.under_lower.name.
		<<else>>
			reddening your exposed skin.
		<</if>>
		<<bodypart_admire_chance random_bottom>>
		<<violence 5 1 1 1 _n>>
	<<else>>
		<<He>> spanks your <<bottom>>
		<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.anus_exposed is 0>>
				through your $worn.under_lower.name.
			<<else>>
				reddening your exposed skin.
			<</if>>
		<<elseif $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist">>
			through your $worn.over_lower.name.
		<<elseif $worn.lower.name isnot "naked" and $worn.lower.state is "waist">>
			through your $worn.lower.name.
		<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist">>
			through your $worn.under_lower.name.
		<<else>>
			reddening your exposed skin.
		<</if>>
		<<bodypart_admire_chance random_bottom>>
		<<violence 5 1 1 1 _n>>
	<</if>>
<</widget>>

<<widget "combat-dildospank">>
	<<set $_hand to _args[0]>>
	<<set $_toy to ($_hand is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<bruise bottom>><<hitstat>><<set $speechspank to 1>>
	<<if npcHasSexToyOfType(_n,"dildo")>>

		<<if $NPCList[_n].location.genitals is "head" or $mouthuse is "facesit" or $mouthuse is "penis">>
			<<He>> <<print either("spanks","whacks","slaps","smacks","thwacks")>> your <<breasts>> with the $_toy in <<his>> $_hand hand,
			<<if $worn.over_upper.name isnot "naked" and $worn.over_lower.state is "waist">>
				through your $worn.over_upper.name.
			<<elseif $worn.upper.name isnot "naked" and $worn.lower.state is "waist">>
				through your $worn.upper.name.
			<<elseif $worn.under_upper.name isnot "naked" and $worn.under_lower.state is "waist">>
				through your $worn.under_upper.name.
			<<else>>
				reddening your exposed skin.
			<</if>>
		<<else>>
			<<He>> <<print either("spanks","whacks","slaps","smacks","thwacks")>> your <<bottom>> with the $_toy in <<his>> $_hand hand,
			<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.anus_exposed is 0>>
					through your $worn.under_lower.name.
				<<else>>
					reddening your exposed skin.
				<</if>>
			<<elseif $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist">>
				through your $worn.over_lower.name.
			<<elseif $worn.lower.name isnot "naked" and $worn.lower.state is "waist">>
				through your $worn.lower.name.
			<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist">>
				through your $worn.under_lower.name.
			<<else>>
				reddening your exposed skin.
			<</if>>
			<<bodypart_admire_chance random_bottom>>
		<</if>>
		<<violence 5 1 1 1 _n>>
	<<elseif npcHasSexToyOfType(_n,"whip")>>
		<<if $NPCList[_n].location.genitals is "head" or $mouthuse is "facesit" or $mouthuse is "penis">>
			<<He>> <<print either("brutally","viciously","deftly","sadistically","maliciously")>>
			<<print either("spanks","whacks","slaps","smacks","thwacks")>> your <<breasts>> with the $_toy in <<his>> $_hand hand,
			<<if $worn.over_upper.name isnot "naked" and $worn.over_lower.state is "waist">>
				through your $worn.over_upper.name.
			<<elseif $worn.upper.name isnot "naked" and $worn.lower.state is "waist">>
				through your $worn.upper.name.
			<<elseif $worn.under_upper.name isnot "naked" and $worn.under_lower.state is "waist">>
				through your $worn.under_upper.name.
			<<else>>
				reddening your exposed skin.
			<</if>>
		<<else>>
			<<He>> <<print either("brutally","viciously","deftly","sadistically","maliciously")>> <<print either("spanks","whacks","slaps","smacks","thwacks")>> your <<bottom>> with the $_toy in <<his>> $_hand hand,
			<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.anus_exposed is 0>>
					through your $worn.under_lower.name.
				<<else>>
					reddening your exposed skin.
				<</if>>
			<<elseif $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist">>
				through your $worn.over_lower.name.
			<<elseif $worn.lower.name isnot "naked" and $worn.lower.state is "waist">>
				through your $worn.lower.name.
			<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist">>
				through your $worn.under_lower.name.
			<<else>>
				reddening your exposed skin.
			<</if>>
		<</if>>
		<<bodypart_admire_chance random_bottom>>
		<<violence 20 1 1 1 _n>>
	<<else>>
		<<He>> spanks your <<bottom>>
		<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.anus_exposed is 0>>
				through your $worn.under_lower.name.
			<<else>>
				reddening your exposed skin.
			<</if>>
		<<elseif $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist">>
			through your $worn.over_lower.name.
		<<elseif $worn.lower.name isnot "naked" and $worn.lower.state is "waist">>
			through your $worn.lower.name.
		<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist">>
			through your $worn.under_lower.name.
		<<else>>
			reddening your exposed skin.
		<</if>>
		<<bodypart_admire_chance random_bottom>>
		<<violence 2 1 1 1 _n>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-hand-on-arms">>
	<<if $enemytrust gte 20 and $enemyanger lte 20>>
		<span class="lblue"><<He>> releases your arms.</span>
		<<combat-reset-hand _args[0]>>
		<<set $leftarm to 0>><<set $rightarm to 0>>
	<<else>>
		<<He>> grips your arms.
		<<violence 6 1 1 1 _n>><<bruise leftarm>><<bruise rightarm>>
		<<bodypart_admire_chance random_shoulder>>
	<</if>>
<</widget>>

<!-- takes two args, both should be either "left" or "right". First is NPC hand, second is player arm. -->
<<widget "combat-hand-on-one-arm">>
	<<if $enemytrust gte 20 and $enemyanger lte 20>>
		<span class="lblue"><<He>> releases your _args[1] arm.</span>
		<<combat-reset-hand _args[0]>>
		<<if _args[1] is "left">>
			<<set $leftarm to 0>>
		<<else>>
			<<set $rightarm to 0>>
		<</if>>
	<<else>>
		<<He>> grips your _args[1] arm.
		<<if _args[1] is "left">>
			<<violence 3 1 1 1 _n>><<bruise leftarm>>
			<<bodypart_admire_chance left_shoulder>>
		<<else>>
			<<violence 3 1 1 1 _n>><<bruise rightarm>>
			<<bodypart_admire_chance right_shoulder>>
		<</if>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-vaginaentrance">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves <<his>> _args[0] hand away from your <<pussy>>.</span>
		<<combat-reset-hand _args[0]>><<set $vaginause to 0>><<set $vaginastate to 0>>
	<<elseif $rng gte 61>>
		<<He>> <<strokes>> your labia.
		<<neutral 10 "genitals" _n>>
		<<bodypart_admire_chance pubic>>
	<<elseif ($rng gte 21 or $novaginal is 1) and (!$player.penisExist or random(1,100) gte 51)>>
		<<He>> gives your clitoris a tweak.
		<<set $speechclit to 1>><<neutral 10 "genitals" _n>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng gte 21 or $novaginal is 1>>
		<<He>> rubs the base of your <<penisSimple>> while toying with your pussy.
		<<neutral 10 "genitals" _n>><<set $speechfutapenis to 1>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng lte 20 and $novaginal is 0>>
		<span class="pink"><<He>> plunges a finger into your warm <<pussy>>.</span>
		<<neutral 15 "genitals" _n>>
		<<set $speechvagina to 1>><<set $vaginastate to "otherhand">>
		<<combat-set-hand-target _args[0] "vagina">>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-hand-on-penisentrance">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves <<his>> _args[0] hand away from your <<penis>>.</span>
		<<combat-reset-hand _args[0]>>
		<<set $penisuse to 0>><<set $penisstate to 0>>
	<<elseif $rng gte 51>>
		<<He>> <<strokes>> your shaft.
		<<neutral 10 "genitals" _n>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng gte 21>>
		<<He>> rubs your glans.
		<<neutral 10 "genitals" _n>><<set $speechglans to 1>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng lte 20>>
		<span class="pink"><<He>> wraps <<his>> fingers around your penis.</span>
		<<neutral 15 "genitals" _n>>
		<<set $speechpenis to 1>><<set $penisstate to "otherhand">>
		<<combat-set-hand-target _args[0] "penis">>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

/* Pass "left" or "right" for which NPC hand this is called for.
Hands are 'inverted': NPC holds PC's left hand with their right one, and vice versa.*/
<<widget "combat-hand-on-hand">>
	<<rng>>
	<<set $_hand to _args[0]>>
	<<if $enemyanger + $rng gte 196>>
		In anger, <span class="pink"><<he>> wrenches <<his>> hand from your grasp.</span>
		<<combat-reset-hand _args[0]>>
		<<if $_hand is "left">>
			<<set $rightarm to 0>>
		<<else>>
			<<set $leftarm to 0>>
		<</if>>
		<<violence 5>>
	<<elseif $enemyanger + $rng gte 160>>
		<<print either(
			"<<He>> digs <<his>> nails into your wrist.",
			"<<He>> crushes your hand in <<his>> grip.",
			"<<He>> bends your fingers back."
		)>>
		<<violence 10>><<hitstat>><<set $speechbeat to 1>>
	<<elseif $rng gte 95>>
		<span class="purple"><<He>> releases your <<print ($_hand is "left" ? "right" : "left")>> hand.</span>
		<<combat-reset-hand _args[0]>>
		<<if $_hand is "left">>
			<<set $rightarm to 0>>
		<<else>>
			<<set $leftarm to 0>>
		<</if>>
	<<else>>
		<<He>> <<strokes>> your $_hand hand with <<his>> own.
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-hand-on-vagina">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> slides <<his>> finger out of your <<pussy>>.</span>
		<<combat-set-hand-target _args[0] "vaginaentrance">>
		<<neutral 15 "genitals" _n>><<set $vaginastate to "otherhandentrance">>
	<<elseif $rng lte 100>>
		<<He>> <<strokes>> the inside of your <<pussy>>,
		<<neutral 20 "genitals" _n>><<set $speechvagina to 1>>
		<<if $arousal gte ($arousalmax / 5) * 4>>
			causing involuntary shudders.
		<<elseif $arousal gte $arousalmax / 5>>
			coaxing out lewd fluid.
		<<else>>
			invading your body in a most sordid manner.
		<</if>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-penis">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> releases your <<penis>> from <<his>> grip.</span>
		<<combat-set-hand-target _args[0] "penisentrance">>
		<<neutral 15 "genitals" _n>><<set $penisstate to "otherhandentrance">>
	<<elseif $rng lte 100>>
		<<He>> massages the length of your <<penis>>,
		<<neutral 20 "genitals" _n>><<set $speechpenis to 1>>
		<<if $arousal gte ($arousalmax / 5) * 4>>
			causing you involuntary shudders.
		<<elseif $arousal gte $arousalmax / 5>>
			coaxing out lewd fluid.
		<<else>>
			exploiting your body's natural reactions in a most sordid manner.
		<</if>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-anusentrance">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves <<his>> hand away from your ass.</span>
		<<combat-reset-hand _args[0]>>
		<<set $anususe to 0>>
	<<elseif playerHasButtPlug()>>
		<<if $rng gte 21 or $noanal is 1 or $cheekaction is "handrub">>
			<<print either(
				`<<He>> teases your anus with your $worn.butt_plug.name, sliding it in and out.`,
				`<<He>> teases your anus with your $worn.butt_plug.name, sliding it in and out.`,
				`<<He>> slaps your ass and $worn.butt_plug.name.`
			)>>
			<<set $anususe to "hand">>
			<<set $anusstate to "handentrance">>
		<<else>>
			<<set $worn.butt_plug.state to "removed">>
			With <<his>> _args[0] hand,
			<<if random(0,2) isnot 0>>
				<<he>> removes your $worn.butt_plug.name.
				<<set $anususe to "hand">>
				<<set $anusstate to "handentrance">>
			<<else>>
				<<he>> removes your $worn.butt_plug.name and moves <<his>> hand away.
				<<combat-reset-hand $_hand>><<neutral 5 _n>>
			<</if>>
		<</if>>
		<<set $anususe to "hand">>
		<<set $anusstate to "handentrance">>
		<<neutral 10 _n>>
		<<bodypart_admire_chance random_bottom>>
	<<elseif $rng gte 21 or $noanal is 1 or $cheekaction is "handrub">>
		<<He>> <<strokes>> your anus.
		<<set $anususe to "hand">>
		<<set $anusstate to "handentrance">>
		<<neutral 10 _n>>
		<<bodypart_admire_chance random_bottom>>
	<<elseif $rng lte 20 and $noanal is 0 and $cheekaction is not "handrub">>
		<span class="pink"><<He>> plunges a finger into your ass.</span>
		<<combat-set-hand-target _args[0] "anus">>
		<<set $anususe to "hand">>
		<<set $anusstate to "hand">>
		<<neutral 15 _n>>
		<<set $speechanus to 1>>
		<<bodypart_admire_chance random_bottom>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-bottom">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves <<his>> hand away from your ass.</span>
		<<combat-reset-hand _args[0]>>
		<<set $anususe to 0>>
	<<elseif $rng gte 21 or $noanal is 1>>
		<<He>> <<strokes>> your clenched butt cheeks.
		<<neutral 10 _n>>
		<<bodypart_admire_chance random_bottom>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-anus">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> slides <<his>> finger out of your ass.</span>
		<<combat-set-hand-target _args[0] "anusentrance">>
		<<neutral 15 _n>>
	<<elseif $rng lte 100>>
		<<He>> rhythmically slides <<his>> finger in and out of your ass,
		<<neutral 20 _n>><<set $speechanus to 1>>
		<<if $player.gender is "f">>
			teasing your anus.
		<<else>>
			teasing your prostate.
		<</if>>
		<<bodypart_admire_chance random_bottom>>
	<</if>>
<</widget>>

<<widget "combat-dildo-on-vaginaentrance">>
	<<set $_hand to _args[0]>>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>

	<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist" and $worn.under_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.under_lower.name>>
	<</if>>
	<<if $worn.lower.name isnot "naked" and $worn.lower.state is "waist" and $worn.lower.vagina_exposed is 0>>
			<<set $_clothing to $worn.lower.name>>
	<</if>>
	<<if $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist" and $worn.over_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.over_lower.name>>
	<</if>>

	<<set $_rng to random(1, 100)>>
	<<if $_rng gte 96>>
		<span class="blue"><<He>> moves the $_toy in <<his>> _args[0] hand away from your <<pussy>>.</span>
		<<combat-reset-hand _args[0]>><<set $NPCList[_n][$_hand + "tool"] to 0>>
		/*<<set $vaginause to 0>>*/
	<<elseif $rng gte 61>>
		<<He>> <<strokes>> your labia with the $_toy in <<his>> _args[0] hand<<if $_clothing isnot undefined>>, through your <<print $_clothing>><</if>>.
		<<neutral 10 "genitals" _n>>
		<<bodypart_admire_chance pubic>>
	<<elseif ($_rng gte 21 or $novaginal is 0) and (!$player.penisExist or random(1,100) gte 51)>>
		<<He>> <<print either("rubs","slaps")>> your clit with the $_toy in <<his>> _args[0] hand<<if $_clothing isnot undefined>>, through your <<print $_clothing>><</if>>.
		<<set $speechclit to 1>><<neutral 10 "genitals" _n>>
		<<violence 1>>
		<<bodypart_admire_chance pubic>>
	<<elseif $_rng gte 21 or $novaginal is 0>>
		<<He>> rubs the base of your <<penisSimple>> with <<his>> $_toy while toying with your pussy<<if $_clothing isnot undefined>>, through your <<print $_clothing>><</if>>.
		<<neutral 10 "genitals" _n>><<set $speechfutapenis to 1>>
		<<bodypart_admire_chance pubic>>
	<<elseif $_rng lte 20 and $novaginal is 0
	and $worn.under_lower.name isnot "naked" and ($worn.under_lower.state isnot "waist" or $worn.under_lower.vagina_exposed gte 1)
	and $worn.lower.name isnot "naked" and ($worn.lower.state isnot "waist" or $worn.lower.vagina_exposed gte 1)
	and $worn.over_lower.name isnot "naked" and ($worn.over_lower.state isnot "waist" or $worn.over_lower.vagina_exposed gte 1
	and !playerChastity("vagina")) and $vaginause isnot "othermouth" and ($vaginaldoubledisable is "f" and toymultiplepenetration is "f" or $vaginause is 0)>>
		/* penetration */
		/* Doesn't check if the PC is already penetrated (aside from mouth) in order to allow for multiple penetrations. */
		<span class="pink"><<He>> plunges <<his>> _args[0]-hand $_toy into your warm <<pussy>>.</span>
		<<neutral 15 "genitals" _n>><<set $speechvagina to 1>><<combat-set-hand-target _args[0] "vaginadildo">>
		<<bodypart_admire_chance pubic>>
	<<else>>
		<<He>> <<strokes>> your labia with the $_toy in <<his>> _args[0] hand.
		<<neutral 10 "genitals" _n>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-dildo-on-vagina">>
	<<set $_hand to _args[0]>>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<rng>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> slides the $_toy in <<his>> _args[0] hand out of your <<pussy>>.</span>
		<<combat-set-hand-target _args[0] "dildo">><<set $NPCList[_n][$_hand + "tool"] to 0>>
		<<neutral 15 "genitals" _n>>
	<<elseif $rng lte 100>>
		<<He>> <<strokes>> the $_toy in <<his>> _args[0] hand inside of your <<pussy>>,
		<<if $vaginastate isnot 0 and $vaginastate.includes("double")>>
			?alongside the two cocks,
		<<elseif $vaginastate isnot 0 and $vaginastate is "penetrated">>
			<<print either("in rhythm with","heedless of","alongside")>>
			<<if $vaginastate is _n>><<his>> <<npcPenisSimple _n>>,<<else>><<set $_n to _n>><<personselect $vaginastate>><<combatperson>>'s cock,<<set _n to $_n>><</if>>
		<</if>>
		<<neutral 20 "genitals" _n>><<set $speechvagina to 1>>
		<<if $arousal gte ($arousalmax / 5) * 4>>
			causing involuntary shudders.
		<<elseif $arousal gte $arousalmax / 5>>
			coaxing out lewd fluid.
		<<else>>
			invading your body in a most sordid manner.
		<</if>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<!-- pass "left" or "right" for which NPC hand this is called for -->
<<widget "combat-dildo-on-penisentrance">>
	<<set $_hand to _args[0]>>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>

	<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist" and $worn.under_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.under_lower.name>>
	<</if>>
	<<if $worn.lower.name isnot "naked" and $worn.lower.state is "waist" and $worn.lower.vagina_exposed is 0>>
			<<set $_clothing to $worn.lower.name>>
	<</if>>
	<<if $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist" and $worn.over_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.over_lower.name>>
	<</if>>

	<<rng>>
	<<if $rng gte 96 or $toymultiplepenetration is "t">>
		<span class="blue"><<He>> moves the $_toy in <<his>> _args[0] hand away from your <<penis>>.</span>
		<<combat-reset-hand _args[0]>><<set $NPCList[_n][$_hand + "tool"] to 0>>
		/*<<set $penisuse to 0>>*/
	<<elseif $rng gte 51>>
		<<switch $penisstate>>
			<<case "otheranus">><<set $_teased to "anus">>
			<<case "penetrated">><<set $_teased to "vagina">>
			<<case "penispenetrated">><<set $_teased to "cock">>
		<</switch>>
		<<He>> <<strokes>> your shaft using the $_toy in <<his>> _args[0] hand<<if $_clothing isnot undefined>>, through your <<print $_clothing>>.<<elseif $penisstate is "otheranus" or $penisstate is "penetrated">><<set $_n to _n>>, teasing <<personselect $penistarget>><<combatperson>>'s $_teased.<<personselect $_n>><<else>>.<</if>>
		<<neutral 10 "genitals" _n>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng gte 21>>
		<<He>> <<print either("slaps","smacks","teases","rubs")>> your glans with the $_toy in <<his>> _args[0] hand<<if $_clothing isnot undefined>>, through your <<print $_clothing>><</if>>.
		<<neutral 10 "genitals" _n>><<set $speechglans to 1>>
		<<violence 1>>
		<<bodypart_admire_chance pubic>>
	<<elseif $rng lte 20
	and $worn.under_lower.name isnot "naked" and ($worn.under_lower.state isnot "waist" or $worn.under_lower.vagina_exposed gte 1)
	and $worn.lower.name isnot "naked" and ($worn.lower.state isnot "waist" or $worn.lower.vagina_exposed gte 1)
	and $worn.over_lower.name isnot "naked" and ($worn.over_lower.state isnot "waist" or $worn.over_lower.vagina_exposed gte 1)
	and !playerChastity("penis")>>
		/* escalation */
		<span class="pink"><<He>> <<print either("rubs","frots","fences")>> the $_toy in <<his>> _args[0] hand against your <<penisSimple>>.</span>
		<<neutral 15 "genitals" _n>>
		<<set $speechpenis to 1>>
		<<combat-set-hand-target _args[0] "penisdildo">>
		<<bodypart_admire_chance pubic>>
	<<else>>
		<<He>> <<strokes>> your <<penis>> with the $_toy in <<his>> _args[0] hand.
		<<neutral 10 "genitals" _n>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-dildo-on-penis">>
	<<set $_hand to _args[0]>>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<rng>>
	<<if $penisstate isnot 0>>
		<<set $rng += 10>>
	<</if>>
	<<if $rng gte 96>>
		<span class="purple"><<He>> removes the $_toy from your <<penis>>.</span>
		<<combat-set-hand-target _args[0] "dildo">><<set $NPCList[_n][$_hand + "tool"] to 0>>
		<<neutral 15 "genitals" _n>>
	<<elseif $rng lte 100>>
		<<if ["otheranus","penetrated","penispenetrated"].includes($penisstate)>>
			<<switch $penisstate>>
				<<case "otheranus">><<set $_teased to "anus">><<set $_fuck to "penetrate">>
				<<case "penetrated">><<set $_teased to "vagina">><<set $_fuck to "fuck">>
				<<case "penispenetrated">><<set $_teased to "cock">><<set $_fuck to "frot">>
			<</switch>>
			With <<his>> _args[0] hand, <<he>> <<print either("massages","rubs","fences","frots")>> the length of your <<penis>>
			as you $_fuck <<set $_n to _n>><<personselect $penistarget>><<combatpersons>> $_teased.<<personselect $_n>>
		<<else>>
			<<He>> <<print either("massages","rubs","fences","frots")>> the length of your <<penis>> with the $_toy in <<his>> _args[0] hand,
			<<neutral 20 "genitals" _n>><<set $speechpenis to 1>>
			<<if !playerHasStrapon()>>
				<<if $arousal gte ($arousalmax / 5) * 4>>
					causing you involuntary shudders.
				<<elseif $arousal gte $arousalmax / 5>>
					coaxing out lewd fluid.
				<<else>>
					exploiting your body's natural reactions in a most sordid manner.
				<</if>>
			<<else>>
				<<if $arousal gte ($arousalmax / 5) * 4>>
					causing you involuntary shudders.
				<<else>>
					strangely arousing you.
				<</if>>
			<</if>>
		<</if>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-stroker-on-penisentrance">>
	<<set $_hand to _args[0]>>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<set $_clothing to "none">>

	<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist" and $worn.under_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.under_lower.name>>
	<</if>>
	<<if $worn.lower.name isnot "naked" and $worn.lower.state is "waist" and $worn.lower.vagina_exposed is 0>>
			<<set $_clothing to $worn.lower.name>>
	<</if>>
	<<if $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist" and $worn.over_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.over_lower.name>>
	<</if>>

	<<rng>>
	<<if $rng gte 96>>
		<span class="blue"><<He>> moves the $_toy in <<his>> _args[0] hand away from your <<penis>>.</span>
		<<combat-reset-hand _args[0]>><<set $NPCList[_n][$_hand + "tool"] to 0>>
	<<elseif $rng gte 61 and $penisuse is 0 and $worn.under_lower.name isnot "naked" and ($worn.under_lower.state isnot "waist" or $worn.under_lower.vagina_exposed gte 1) and $worn.lower.name isnot "naked" and ($worn.lower.state isnot "waist" or $worn.lower.vagina_exposed gte 1) and $worn.over_lower.name isnot "naked" and ($worn.over_lower.state isnot "waist" or $worn.over_lower.vagina_exposed gte 1)>>
		<span class="pink"><<He>> plunges the $_toy in <<his>> _args[0] hand onto your penis.</span>
		<<set $penisuse to "stroker">><<set $penisstate to "stroker">>
		<<neutral 15 "genitals" _n>>
		<<set $speechpenis to 1>>
		<<combat-set-hand-target _args[0] "penisstroker">>
		<<bodypart_admire_chance pubic>>
	<<else>>
		<<He>> teases your glans with the $_toy in <<his>> _args[0] hand<<if $_clothing isnot "none">>, through your $_clothing<</if>>.
		<<neutral 10 "genitals" _n>><<set $speechglans to 1>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-stroker-on-penis">>
	<<set $_hand to _args[0]>>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<rng>>
	<<if $rng gte 101>>
		<span class="blue"><<He>> moves the $_toy in <<his>> _args[0] hand away from your <<penis>>.</span>
		<<combat-reset-hand _args[0]>><<set $NPCList[_n][$_hand + "tool"] to 0>>
		<<set $penisuse to 0>>
	<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
		With increasing power, <<he>> fucks your <<penis>> with the $_toy in <<his>> _args[0] hand.
	<<else>>
		<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
		<<He>> <<print either("fucks","fucks","rhythmically works")>> your penis with the $_toy in <<his>> _args[0] hand.
	<</if>>
<</widget>>

<<widget "combat-dildo-on-anusentrance">>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<set _hand to _args[0]>>

	<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state is "waist" and $worn.under_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.under_lower.name>>
	<</if>>
	<<if $worn.lower.name isnot "naked" and $worn.lower.state is "waist" and $worn.lower.vagina_exposed is 0>>
			<<set $_clothing to $worn.lower.name>>
	<</if>>
	<<if $worn.over_lower.name isnot "naked" and $worn.over_lower.state is "waist" and $worn.over_lower.vagina_exposed is 0>>
		<<set $_clothing to $worn.over_lower.name>>
	<</if>>

	<<rng>>
	<<if $rng gte 96>>
		<span class="blue"><<He>> moves <<his>> _hand-hand $_toy away from your ass.</span>
		<<combat-reset-hand _args[0]>><<set $NPCList[_n][$_hand + "tool"] to 0>>
		/*<<set $anususe to 0>>*/
	<<elseif $rng gte 21 or $noanal is 1>>
		<<He>> <<print either("rubs","slaps")>> and teases your <<print either("anus","ass")>> with the $_toy in <<his>> _hand hand<<if $_clothing isnot undefined>>, through your <<print $_clothing>><<elseif playerHasButtPlug()>>, <<print either("rubbing against","through")>> your $worn.butt_plug.name<</if>>.
		<<neutral 10 _n>>
		<<violence 1>>
		<<bodypart_admire_chance random_bottom>>
	<<elseif $rng lte 20 and $noanal is 0 and $analdisable is "f"
	and $worn.under_lower.name isnot "naked" and ($worn.under_lower.state isnot "waist" or $worn.under_lower.anus_exposed gte 1)
	and $worn.lower.name isnot "naked" and ($worn.lower.state isnot "waist" or $worn.lower.anus_exposed gte 1)
	and $worn.over_lower.name isnot "naked" and ($worn.over_lower.state isnot "waist" or $worn.over_lower.anus_exposed gte 1)
	and !playerChastity("anus") and (!playerHasButtPlug() or random(0,1) isnot 0) and $anususe isnot "othermouth" and ($analdoubledisable is "f" and $toymultiplepenetration is "f" or $anususe is 0)>>
		/* penetration */
		/* Doesn't check if the PC is already penetrated (aside from mouth) in order to allow for multiple penetrations. */
		<span class="pink"><<He>> plunges the $_toy in <<his>> _hand hand into your ass<<if playerHasButtPlug()>>, heedless of your $worn.butt_plug.name<</if>>.</span>
		<<combat-set-hand-target _hand "anusdildo">>
		<<neutral 15 _n>>
		<<set $speechanus to 1>>
		<<bodypart_admire_chance random_bottom>>
	<<else>>
		<<He>> <<strokes>> your <<bottom>> with the $_toy in <<his>> _hand hand<<if playerHasButtPlug()>>, rubbing against your $worn.butt_plug.name<</if>>.
		<<neutral 10 _n>>
		<<bodypart_admire_chance pubic>>
	<</if>>
<</widget>>

<<widget "combat-dildo-on-anus">>
	<<set $_toy to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<rng>>
	<<if $rng gte 101>>
		<span class="purple"><<He>> slides <<his>> _args[0]-hand $_toy out of your ass.</span>
		<<combat-set-hand-target _args[0] "dildo">>
		<<neutral 15 _n>>
	<<elseif $rng lte 100>>
		<<set $_rhythmically to either("rhythmically","rhythmically","ruthlessly","gently","teasingly","skillfully")>>
		<<if $anusstate isnot 0 and $anusstate.includes("double")>>
			<<He>> $_rhythmically slides the $_toy in <<his>> _args[0] hand in and out of your ass, ?alongside the two cocks,
		<<elseif $anusstate isnot 0 and $anusstate is "penetrated">>
			<<He>> $_rhythmically slides the $_toy in <<his>> _args[0] hand in and out of your ass, <<print either("in rhythm with","heedless of","alongside")>>
			<<if $anustarget is _n>><<his>> <<npcPenisSimple _n>>,<<else>><<personselect $anustarget>><<combatperson>>'s cock,<</if>>
		<<else>>
			<<He>> $_rhythmically slides the $_toy in <<his>> _args[0] hand in and out of your ass,
		<</if>>
		<<neutral 20 _n>><<set $speechanus to 1>>
		<<if $player.gender is "f">>
			teasing your anus.
		<<else>>
			teasing your prostate.
		<</if>>
		<<bodypart_admire_chance random_bottom>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-sextoy">>
	/* used for both dildo types and whip types */
	<<set $_hand to _args[0]>>
	<<set $_toy to $_hand + "tool">>
	<<set $_rand to random(0,9)>>

	<<if $_rand lte 8 and npcHasSexToyOfType(_n,"dildo") or $_rand lt 1 and npcHasSexToyOfType(_n,"whip")>>
		/* find orifice to penetrate */
		<<if $analdisable is "t" or random(0,2) isnot 0>>
			<<if ($player.penisExist and !playerChastity("penis")) and ($player.vaginaExist and !playerChastity("vagina"))>>
				<<if random(0,3) is 0>>
					<<combat-dildo-on-penisentrance $_hand>>
				<<else>>
					<<combat-dildo-on-vaginaentrance $_hand>>
				<</if>>
			<<elseif $player.penisExist and !playerChastity("penis")>>
				<<if random(0,2) is 0>>
					<<combat-dildo-on-penisentrance $_hand>>
				<<else>>
					<<combat-dildo-on-anusentrance $_hand>>
				<</if>>
			<<elseif $player.vaginaExist and !playerChastity("vagina")>>
				<<combat-dildo-on-vaginaentrance $_hand>>
			<<else>>
				<<combat-dildo-on-anusentrance $_hand>>
			<</if>>
		<<else>>
			<<combat-dildo-on-anusentrance $_hand>>
		<</if>>
	<<elseif npcHasSexToyOfType(_n,"dildo") or npcHasSexToyOfType(_n,"whip")>>
		<<combat-dildospank $_hand>>
	<</if>>
<</widget>>

<<widget "combat-reveal-sextoy">>
			/* Used in conjuction with a widget that starts an NPC with a sex toy in hand */
	<<set $_hand to _args[0]>>
	<<set $_dildo to ($_hand is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<set $_consentcolour to ($consensual is 1 ? "blue" : "red")>>
	<<set $_dildocolouredtext to "<span @class='$_consentcolour'>$_dildo</span>">>
	<<set $_eagerly to ($consensual is 1 ? "eagerly" : "menacingly")>>

	<<if $NPCList[_n][($_hand is "left" ? "righthand" : "lefthand")] is 0>>
		<<set $_npcpart to ["palm","palm","palm","thigh","thigh","shoulder"].random()>>
	<<else>>
		<<set $_npcpart to ["thigh","shoulder"].random()>>
	<</if>>

	<span class="purple">
		<<if _args[1] isnot undefined and _args[1] is "pocket">>
			<<He>> pulls a <span class="blue">$_dildo</span> from <<his>> pocket, slapping it against <<his>> $_npcpart $_eagerly.
		<<else>>
			<<switch random(0,3)>>
				<<case 0>>	<<He>> <<print either("flourishes","parades","brandishes","waves")>> <<his>> $_dildocolouredtext, $_eagerly.
				<<case 1 2>><<He>> <<print either("slaps","smacks")>> <<his>> $_dildocolouredtext against <<his>> $_npcpart.
				<<case 3>>
					<<set $_slaps to ($consensual is 1 ? ["brushes","caresses"].random() : "slaps")>>
					<<if $consensual isnot 1>><<violence 5>><</if>>
					<<He>> $_slaps
					<<if $position is "wall" and $walltype isnot "front">>
						your <<bottom>> with <<his>> $_dildocolouredtext.
					<<else>>
						your face with the $_dildocolouredtext in <<his>> $_hand hand.
					<</if>>
			<</switch>>
		<</if>>
	</span>
	<<if _args[0] is "left">>
		<<set $NPCList[_n].lefttool to $_dildo>>
		<<set $NPCList[_n].lefthand to "dildo">>
	<<elseif _args[0] is "right">>
		<<set $NPCList[_n].righttool to $_dildo>>
		<<set $NPCList[_n].righthand to "dildo">>
	<</if>>
<</widget>>

<<widget "combat-hand-hypnosis">>
	<<rng>>
	<<set _tool to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<set $_hand to _args[0] + "hand">>
	<<if $rng gte 76 and ($hypnosis_traits.scream is undefined or $hypnosis_traits.scream lt 5)>>
		<<He>> waves the _tool at you.
		<<set $NPCList[_n][$_hand] to "hypnosis_scream">>
		<<His>> voice echoes in your mind. <span class="purple"><i><span class="red">From when I click my fingers,</span> should you try to scream, you will beg for rougher treatment instead.</i></span>
	<<elseif $rng gte 51 and ($hypnosis_traits.cover is undefined or $hypnosis_traits.cover lt 5)>>
		<<He>> waves the _tool at you.
		<<set $NPCList[_n][$_hand] to "hypnosis_cover">>
		<<His>> voice echoes in your mind. <span class="purple"><i><span class="red">From when I click my fingers,</span> should you try to cover your body, you will display it for all to see instead.</i></span>
	<<else>>
		<<if random(1, 2) is 2>>
			<<His>> voice echoes in your mind. <span class="purple"><i>When I click my fingers, you will be overcome by arousal, and climax at once.</i></span>
			<<set $NPCList[_n][$_hand] to "hypnosis_orgasm">>
		<<else>>
			<<His>> voice echoes in your mind. <span class="purple"><i>When I click my fingers, you will lust for the pleasure of pain.</i></span>
			<<set $NPCList[_n][$_hand] to "hypnosis_masochism">>
		<</if>>
		<<He>> waves the _tool at you.
	<</if>>
<</widget>>

<<widget "combat-hand-hypnosis-orgasm">>
	<<set _tool to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<He>> clasps <<his>> palm around the _tool, and clicks <<his>> fingers.

	A deep yearning blooms,
	<<if $uncomfortable.hypnosis is false>>
		nurtured by a lewd part of you. <span class="lewd">Your mind immediately accepts it.</span> Feelings of arousal overwhelm you. <<He>> flashes you a satisfied smile.
		<<arousal 10000>>
	<<elseif $willpower gte random(1, 1000)>>
		nurtured by a traitorous part of you. <span class="lblue">You will it away.</span> <<He>> frowns.
	<<else>>
		unbeckoned. <span class="pink">You can't resist it.</span> Feelings of arousal overwhelm you. <<He>> flashes you a satisfied smile.
		<<arousal 10000>><<willpower 1>><<gwillpower>>
	<</if>>
	<<hypnotised 1>>
	<<combat-reset-tool _args[0]>>
	<<combat-reset-hand _args[0]>>
<</widget>>

<<widget "combat-hand-hypnosis-masochism">>
	<<set _tool to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<He>> clasps <<his>> palm around the _tool, and clicks <<his>> fingers.

	A deep yearning blooms,
	<<if $uncomfortable.hypnosis is false>>
		nurtured by a lewd part of you. <span class="lewd">Your mind immediately accepts it.</span> You long for pain. <<He>> flashes you a satisfied smile.
		<<masochism 10>>
	<<elseif $willpower gte random(1, 1000)>>
		nurtured by a traitorous part of you. <span class="lblue">You will it away.</span> <<He>> frowns.
	<<else>>
		unbeckoned. <span class="pink">You can't resist it.</span> You long for pain. <<He>> flashes you a satisfied smile.
		<<masochism 10>><<willpower 1>><<gwillpower>>
	<</if>>
	<<hypnotised 1>>
	<<combat-reset-tool _args[0]>>
	<<combat-reset-hand _args[0]>>
<</widget>>

<<widget "combat-hand-hypnosis-scream">>
	<<set _tool to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<He>> clasps <<his>> palm around the _tool, and clicks <<his>> fingers.

	<span class="pink">You feel something shift in your consciousness.</span>
	<<if !$hypnosis_traits.scream>>
		You've gained the <span class="pink">Hypnotic Yearning</span> trait.
		<<set $hypnosis_traits.scream to 1>>
	<<elseif $hypnosis_traits.scream lt 5>>
		Your hypnotic yearning has deepened.
		<<set $hypnosis_traits.scream += 1>>
	<</if>>
	<<hypnotised 1>>
	<<combat-reset-tool _args[0]>>
	<<combat-reset-hand _args[0]>>
<</widget>>

<<widget "combat-hand-hypnosis-cover">>
	<<set _tool to (_args[0] is "left" ? $NPCList[_n].lefttool : $NPCList[_n].righttool)>>
	<<He>> clasps <<his>> palm around the _tool, and clicks <<his>> fingers.

	<span class="pink">You feel something shift in your consciousness.</span>
	<<if !$hypnosis_traits.cover>>
		You've gained the <span class="pink">Hypnotic Flaunting</span> trait.
		<<set $hypnosis_traits.cover to 1>>
	<<elseif $hypnosis_traits.cover lt 5>>
		Your hypnotic flaunting has deepened.
		<<set $hypnosis_traits.cover += 1>>
	<</if>>
	<<hypnotised 1>>
	<<combat-reset-tool _args[0]>>
	<<combat-reset-hand _args[0]>>
<</widget>>

<<widget "combat-hand-on-mouth">>
	<<rng>>
	<<if $enemyanger lte 20 and $enemytrust gte 20>>
		<span class="teal">Made confident by your accommodating behaviour, <<he>> releases <<his>> hand from your mouth.</span>
		<<combat-reset-hand _args[0]>>
		<<set $mouthuse to 0>>
	<<else>>
		<<He>> continues to clasp your mouth shut.
		<<violence 1 1 1 1 _n>><<bruise face>>
		<<bodypart_admire_chance forehead>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-hair">>
	<<rng>>
	<<if $rng gte 101>>
		<span class="lblue"><<He>> releases <<his>> hand from your hair.</span>
		<<combat-reset-hand _args[0]>>
	<<elseif $enemyanger gte 61>>
		With your hair in <<his>> grip, <<he>> yanks back your head.
		<<violence 4 1 1 1 _n>><<set $speechhair to 1>>
		<<bodypart_admire_chance forehead>>
	<<elseif $enemyanger gte 21>>
		<<He>> strokes your hair while holding it bunched in <<his>> grip.
		<<set $speechhair to 1>><<neutral 1 _n>>
		<<bodypart_admire_chance forehead>>
	<<else>>
		<span class="lblue"><<He>> releases <<his>> hand from your hair.</span>
		<<combat-reset-hand _args[0]>>
	<</if>>
<</widget>>

<<widget "combat-pull-outfit-down">>
	<<set $_layer to _args[0]>>
	<<set $_target to _args[1]>>
	<<set $_hand to _args[2]>>

	<<set $_upperslot to ($_layer is "" ? "upper" : $_layer + "_upper")>>
	<<set $_lowerslot to ($_layer is "" ? "lower" : $_layer + "_lower")>>
	<<set $_targetslot to ($_layer is "" ? $_target : $_layer + "_" + $_target)>>

	<<set $_clothing_upper to $worn[$_upperslot]>>
	<<set $_clothing_lower to $worn[$_lowerslot]>>


	<<combat-pull-clothing-state $_upperslot "down" $_hand $_lowerslot>>

	<<set _origin to $_clothing_upper.state_top>>
	<<set _dest to setup.clothingStateNextDown[_origin]>>
	<<set $_upperStateSame to setup.clothingStateIndex[$_clothing_upper.state] gte setup.clothingStateIndex[_origin]>>
	<<set $_lowerStateSame to setup.clothingStateIndex[$_clothing_lower.state] gte setup.clothingStateIndex[_origin]>>

	/* if the top of the outfit is below the original base of the upper portion, pull the upper portion's base down as well */
	<<if $_upperStateSame or setup.clothingStateIndex[$_clothing_upper.state_base] gte setup.clothingStateIndex[_origin]>>
		<<set $_clothing_upper.state to _dest>>
	<</if>>

	/* if the top of the outfit is below the original base of the lower portion, pull the lower portion's base down as well */
	<<if $_lowerStateSame or setup.clothingStateIndex[$_clothing_lower.state_base] gte setup.clothingStateIndex[_origin]>>
		<<set $_clothing_lower.state to _dest>>
	<</if>>

	<<switch _origin>>
		<<case "chest">>
			<<if $_target is "upper">>
				<<He>> pulls down the top of your $_clothing_upper.name with <<his>> $_hand hand,
			<<else>>
				<<He>> tugs your $_clothing_lower.name with <<his>> $_hand hand, pulling down your $_clothing_upper.name and
			<</if>>
			<<if !_toplessExposed>>
				revealing your <<exposedupper>>.
				<<neutral 2 _n>>
			<<else>>
				<span class="lewd">revealing your <<breasts>>.</span>
				<<neutral 3 _n>>
			<</if>>
		<<case "midriff">>
			<<if $_target is "upper">>
				<<He>> pulls your $_clothing_upper.name down past your midriff with <<his>> $_hand hand.
				<<neutral 1 _n>>
			<<else>>
				<<He>> tugs your $_clothing_lower.name with <<his>> $_hand hand, pulling down your $_clothing_upper.name past your midriff.
				<<neutral 1 _n>>
			<</if>>
			<<if playerBellyVisible()>><<set $speechpregnant to 1>><</if>>
		<<case "waist">>
			<<He>> pulls your $_clothing_upper.name down to your thighs with <<his>> $_hand hand,
			<<if !_bottomlessExposed>>
				revealing your <<exposedlower>>.
				<<neutral 2 _n>>
			<<else>>
				revealing your <span class="lewd"><<genitals>>.</span>
				<<neutral 5 _n>>
			<</if>>
		<<case "thighs">>
			<<He>> pulls your $_clothing_upper.name down to your knees with <<his>> $_hand hand.
			<<neutral 1 _n>>
		<<case "knees">>
			<<He>> pulls your $_clothing_upper.name down to your ankles with <<his>> $_hand hand.
			<<neutral 1 _n>>
		<<case "ankles">>
			<span class="purple"><<He>> pulls your $_clothing_upper.name off the bottom of your legs with <<his>> $_hand hand.</span>
			<<neutral 5 _n>>
	<</switch>>
<</widget>>

<<widget "combat-pull-outfit-up">>
	<<set $_layer to _args[0]>>
	<<set $_target to _args[1]>>
	<<set $_hand to _args[2]>>

	<<set $_upperslot to ($_layer is "" ? "upper" : $_layer + "_upper")>>
	<<set $_lowerslot to ($_layer is "" ? "lower" : $_layer + "_lower")>>
	<<set $_targetslot to ($_layer is "" ? $_target : $_layer + "_" + $_target)>>


	<<if $position isnot "wall">>
		<<set $_clothing_upper to $worn[$_upperslot]>>
		<<set $_clothing_lower to $worn[$_lowerslot]>>

		<<set _origin to $_clothing_upper.state>>
		<<set _dest to setup.clothingStateNextUp[_origin]>>
		<<set $_upperStateSame to setup.clothingStateIndex[$_clothing_upper.state_top] gte setup.clothingStateIndex[_origin]>>
		<<set $_lowerStateSame to setup.clothingStateIndex[$_clothing_lower.state] gte setup.clothingStateIndex[_origin]>>
		/* <<set $_clothing_upper.state to _dest>> */

		<<combat-pull-clothing-state $_upperslot "up" $_hand>>

		/* if the base of the outfit is below the original top of the upper portion, pull the upper portion's top up as well */
		<<if $_upperStateSame or setup.clothingStateIndex[$_clothing_upper.state_top_base] gte setup.clothingStateIndex[_origin]>>
			<<set $_clothing_upper.state_top to _dest>>
		<</if>>

		/* if the base of the outfit is below the original base of the lower portion, pull the lower portion's base up as well */
		<<if $_lowerStateSame or setup.clothingStateIndex[$_clothing_lower.state_base] gte setup.clothingStateIndex[_origin]>>
			<<set $_clothing_lower.state to _dest>>
		<</if>>

		<<outfitChecksExposed>>

		<<switch _origin>>
			<<case "waist">>
				<<if $position is "wall" and $walltype isnot "front">>
					<<combat-tug-clothing "over_lower" $_hand>>
				<<else>>
					<<if $_target is "upper">>
						<<He>> pulls your bundled $_clothing_upper.name up past your midriff.
					<<else>>
						<<He>> lifts your $_clothing_upper.name above your midriff with <<his>> $_hand hand.
					<</if>>
					<<neutral 2 _n>>
					<<if playerBellyVisible()>><<set $speechpregnant to 1>><</if>>
				<</if>>
			<<case "midriff">>
				<<if $_target is "upper">>
					<<He>> pulls your bundled $_clothing_upper.name up past your <<exposedupper>>.
				<<else>>
					<<He>> lifts up your $_clothing_upper.name with <<his>> $_hand hand,
					<<if !_toplessExposed>>
						exposing your <<exposedupper>>.
						<<neutral 2 _n>>
					<<else>>
						<span class="lewd">exposing your <<breasts>>.</span>
						<<neutral 3 _n>>
					<</if>>
				<</if>>
			<<case "chest">>
				<<if $_target is "upper">>
					<span class="purple"><<He>> pulls your $_clothing_upper.name off your body with <<his>> $_hand hand.</span>
				<<else>>
					<span class="purple"><<He>> pulls your $_clothing_upper.name off completely with <<his>> $_hand hand.</span>
				<</if>>
				<<neutral 3 _n>>
		<</switch>>

	<<elseif $walltype isnot "front">>
		<<combat-tug-clothing $_targetslot $_hand>>
	<</if>>
<</widget>>

<<widget "combat-pull-clothing-down">>
	<<set $_slot to _args[0]>>
	<<set $_clothing to $worn[$_slot]>>
	<<set $_hand to _args[1]>>

	<<set $_origin to $_clothing.state>>


	<<combat-pull-clothing-state $_slot "down" $_hand>>

	<<switch $_origin>>
		<<case "chest">>
			<<He>> pulls your $_clothing.name down with <<his>> $_hand hand,
			<<if !_toplessExposed>>
				revealing your <<exposedupper>>.
				<<neutral 2 _n>>
			<<else>>
				<span class="lewd">revealing your <<breasts>>.</span>
				<<neutral 3 _n>>
			<</if>>
		<<case "midriff">>
			<<He>> pulls your $_clothing.name down past your midriff with <<his>> $_hand hand.
			<<neutral 1 _n>>
			<<if playerBellyVisible()>><<set $speechpregnant to 1>><</if>>
		<<case "waist">>
			<<He>> pulls your $_clothing.name down to your thighs with <<his>> $_hand hand,
			<<if !_bottomlessExposed and $_slot isnot "under_lower" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt isnot 1>>
				revealing your <<exposedlower>>.
				<<neutral 2 _n>>
			<<else>>
				revealing your <span class="lewd"><<genitals>>.</span>
				<<neutral 5 _n>><<set $speechgenitals to 1>>
			<</if>>
		<<case "thighs">>
			<<He>> pulls your $_clothing.name down to your knees with <<his>> $_hand hand.
			<<neutral 1 _n>>
		<<case "knees">>
			<<He>> pulls your $_clothing.name down to your ankles with <<his>> $_hand hand.
			<<neutral 1 _n>>
		<<case "ankles">>
			<span class="purple"><<He>> pulls your $_clothing.name off your legs with <<his>> $_hand hand.</span>
			<<neutral 3 _n>>
	<</switch>>
<</widget>>

<<widget "combat-pull-clothing-up">>
	<<set $_slot to _args[0]>>
	<<set $_clothing to $worn[$_slot]>>
	<<set $_hand to _args[1]>>


	<<if $position isnot "wall">>
		<<combat-pull-clothing-state $_slot "up" $_hand>>
		<<switch _dest>>
			<<case "midriff">>
				<<He>> lifts up your $_clothing.name with <<his>> $_hand hand, exposing your midriff.
				<<neutral 1 _n>>
				<<if playerBellyVisible()>><<set $speechpregnant to 1>><</if>>
			<<case "chest">>
				<<if _toplessExposed>>
					<<He>> lifts up your $_clothing.name with <<his>> $_hand hand, <span class="lewd">exposing your <<breasts>>.</span>
					<<neutral 2 _n>><<set $speechbreasts to 1>>
				<<else>>
					<<He>> lifts your $_clothing.name over your chest with <<his>> $_hand hand, exposing your <<exposedupper>>.
					<<neutral 1 _n>>
				<</if>>
			<<case 0>>
				<span class="purple"><<He>> completely removes your $_clothing.name with <<his>> $_hand hand.</span>
				<<neutral 3 _n>>
		<</switch>>
	<<else>>
		<<if $walltype isnot "front" and $_slot.includes("upper")>>
			<<combat-tug-clothing $_slot $_hand>>
		<</if>>
	<</if>>
<</widget>>

<<widget "combat-pull-clothing-to-side">>
	<<set $_clothing to $worn[_args[0]]>>
	<<set $_hand to _args[1]>>

	<<if playerHasStrapon() and $penisstate isnot 0>>
		<<He>> moves <<his>> $_hand hand away from your $worn.under_lower.colour $worn.under_lower.name.
		<<combat-reset-hand $_hand>><<neutral 5 _n>>
	<<else>>
		<<He>> pulls your $_clothing.name to the side, <span class="lewd">revealing your <<genitals>>.</span>
		<<set $_clothing.state to "totheside">>
		<<combat-reset-hand $_hand>><<neutral 5 _n>>
		<<set $_clothing.vagina_exposed to 1>><<set $_clothing.anus_exposed to 1>><<set $_clothing.exposed to 1>><<set $speechgenitals to 1>>
	<</if>>
<</widget>>

<<widget "combat-pull-clothing-state">>
	<<set $_slot to _args[0]>>
	<<set $_clothing to $worn[$_slot]>>
	<<set $_up to _args[1] is "up">>
	<<set $_hand to _args[2]>>
	<<if _args[3]>>
		<<set $_otherOutfitSlot to _args[3]>>
		<<set $_otherClothing to $worn[$_otherOutfitSlot]>>
	<</if>>

	<<if $_up>>
		<!-- pulling clothing up -->
		<<set _origin to $_clothing.state>>
		<<set _dest to setup.clothingStateNextUp[$_clothing.state]>>
		<<set $_clothing.state to _dest>>

		<<if $_clothing.state_top and setup.clothingStateIndex[$_clothing.state] gt setup.clothingStateIndex[$_clothing.state_top]>>
			<<set $_clothing.state_top to _dest>>
		<</if>>

		<<if $_otherClothing and setup.clothingStateIndex[$_clothing.state] gt setup.clothingStateIndex[$_otherClothing.state]>>
			<<set $_otherClothing.state to _dest>>
		<</if>>

		<<switch _origin>>
			<<case "midriff">>
				<<set $_clothing.exposed to 2>><<set $speechbreasts to 1>> <!-- breasts/chest now exposed below clothing bottom -->
			<<case "waist">>
				<<set $_clothing.exposed to 2>><<set $speechgenitals to 1>><!-- genitals now exposed below clothing bottom -->
				<<set $_clothing.vagina_exposed to 1>><<set $_clothing.anus_exposed to 1>>
		<</switch>>

	<<else>>
		<!-- pulling clothing down -->
		<<if $_clothing.state_top>>
			<!-- upper clothing has a .state_top variable, and lower doesn't. -->
			<<set _origin to $_clothing.state_top>>
			<<set _dest to setup.clothingStateNextDown[$_clothing.state_top]>>
			<<set $_clothing.state_top to _dest>>

			<<if setup.clothingStateIndex[$_clothing.state_top] lt setup.clothingStateIndex[$_clothing.state]>>
				<!-- if the top of the clothing is as low as or lower than the bottom -->
				<<set $_clothing.state to _dest>>
			<</if>>

			<!-- adjust exposure -->
			<<if _origin is "chest">>
				<<set $_clothing.exposed to 2>><<set $speechbreasts to 1>> <!-- breasts/chest now exposed above clothing top -->
			<</if>>
		<<else>>
			<<set _origin to $_clothing.state>>
			<<set _dest to setup.clothingStateNextDown[$_clothing.state]>>
			<<set $_clothing.state to _dest>>

			<!-- adjust exposure -->
			<<if _origin is "waist">>
				<<set $_clothing.exposed to 2>><<set $speechgenitals to 1>> <!-- breasts/chest now exposed above clothing top -->
				<<set $_clothing.vagina_exposed to 1>><<set $_clothing.anus_exposed to 1>>
			<</if>>
		<</if>>
	<</if>>

	<<if _dest is 0>>
		<<combat-reset-hand $_hand>><<clothesstripstat>><<generalStrip $_slot>>
	<</if>>

	<<outfitChecksExposed>>
<</widget>>

<<widget "combat-lift-skirt">>
	<<set $_clothing to $worn[_args[0]]>>
	<<set $_hand to _args[1]>>

	<<set $_clothing.skirt_down to 0>><<set $_clothing.vagina_exposed to 1>><<set $_clothing.anus_exposed to 1>><<set $_clothing.exposed to 2>>
	<<outfitChecksExposed>>

	<<He>> lifts up your $_clothing.name with <<his>> $_hand hand, exposing your
	<<if !_bottomlessExposed>>
		<<exposedlower>>.
		<<neutral 2 _n>>
	<<elseif $worn.genitals.name isnot "naked">>
		$worn.genitals.name.
		<<neutral 2 _n>>
	<<else>>
		<span class="lewd"><<genitals>>.</span>
		<<neutral 5 _n>><<set $speechgenitals to 1>>
	<</if>>
<</widget>>

<<widget "combat-remove-buttplug">>
	<<set $_hand to _args[0]>>

	<<He>> removes your $worn.butt_plug.name, <span class="lewd">revealing your anus.</span>
	<<set $worn.butt_plug.state to "removed">>
	<<combat-reset-hand $_hand>><<neutral 5 _n>>
	<<set $speechanusentrance to 1>>
<</widget>>

<<widget "combat-tug-clothing">>
	<<set $_slot to _args[0]>>
	<<set $_hand to _args[1]>>

	<<He>> tugs at your $worn[$_slot].name with <<his>> $_hand hand, tearing <<it $_slot>> before <span class="blue">letting go.</span>
	<<combat-reset-hand $_hand>><<neutral 1 _n>>
	<<set $worn[$_slot].integrity -= 10>>
<</widget>>

<<widget "combat-hand-on-overlowerclothes">>
	<<set $_hand to _args[0]>>
	<<set $_overlowersetup to setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)]>>

	<<if $_overlowersetup.skirt is 1>>
		<<if $worn.over_lower.skirt_down is 1>>
			<<combat-lift-skirt "over_lower" $_hand>>
		<<elseif _overOutfit>>
			<<combat-pull-outfit-up "over" "lower" $_hand>>
		<<else>>
			<<combat-pull-clothing-down "over_lower" $_hand>>
		<</if>>
	<<elseif _overOutfit>>
		<<if $worn.over_upper.open is 1>>
			<<combat-pull-outfit-down "over" "lower" $_hand>>
		<<else>>
			<<combat-tug-clothing "over_lower" $_hand>>
		<</if>>
	<<else>>
		<<combat-pull-clothing-down "over_lower" $_hand>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-underlowerclothes">>
	<<set $_hand to _args[0]>>
	<<set $_overlower_open to setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 or $worn.over_lower.type.includes("naked")>>
	<<set $_lower_open to setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1 or $worn.lower.type.includes("naked")>>

	<<if _underOutfit>>
		<<combat-pull-outfit-down "under" "lower" $_hand>>
	<<elseif playerHasStrapon() and $penisstate isnot 0>>
		<<He>> moves <<his>> hand away from your $worn.under_lower.colour $worn.under_lower.name.
		<<combat-reset-hand $_hand>>
	<<elseif ($_overlower_open and $_lower_open) or $worn.lower.state isnot "waist">>
		<<if $worn.under_lower.state is "waist" and !($rng gt 20 or $combatgoal is "strip" or $worn.under_lower.no_aside)>>
			<<combat-pull-clothing-to-side "under_lower" $_hand>>
		<<else>>
			<<combat-pull-clothing-down "under_lower" $_hand>>
		<</if>>
	<<else>>
		<<combat-tug-clothing "under_lower" $_hand>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-buttplug">>
	<<set $_clothing to $worn.butt_plug.name>>
	<<set $_hand to _args[0]>>

	<<if random(0,3) is 0>>
		With <<his>> $_hand hand, <<he>> teases your anus with your $_clothing.
	<<else>>
		<<combat-remove-buttplug $_hand>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-lowerclothes">>
	<<set $_hand to _args[0]>>
	<<set $_overlower_open to setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 or $worn.over_lower.type.includes("naked")>>
	<<set $_lower_open to setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>


	<<if $_overlower_open and $_lower_open>>
		<<if $worn.lower.skirt_down is 1>>
			<<combat-lift-skirt "lower" $_hand>>
		<<elseif _middleOutfit>>
			<<combat-pull-outfit-up "" "lower" $_hand>>
		<<else>>
			<<combat-pull-clothing-down "lower" $_hand>>
		<</if>>
	<<elseif _middleOutfit>>
		<<if $worn.upper.open is 1>>
			<<combat-pull-outfit-down "" "lower" $_hand>>
		<<else>>
			<<combat-tug-clothing "lower" $_hand>>
		<</if>>
	<<else>>
		<<combat-pull-clothing-down "lower" $_hand>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-overupperclothes">>
	<<set $_hand to _args[0]>>

	<<if _overOutfit is false>>
		<<if $worn.over_upper.open is 1>>
			<<combat-pull-clothing-down "over_upper" $_hand>>
		<<else>>
			<<combat-pull-clothing-up "over_upper" $_hand>>
		<</if>>
	<<elseif $worn.over_upper.open is 1>>
		<<if $worn.over_lower.state is $worn.over_upper.state_top
		and $worn.over_lower.state is $worn.over_upper.state
		and setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1>>
			<<combat-pull-outfit-up "over" "upper" $_hand>>
		<<else>>
			<<combat-pull-outfit-down "over" "upper" $_hand>>
		<</if>>
	<<else>>
		<<combat-tug-clothing "over_upper" $_hand>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-upperclothes">>
	<<set $_hand to _args[0]>>

	<<if _middleOutfit is false>>
		<<if $worn.upper.open is 1>>
			<<combat-pull-clothing-down "upper" $_hand>>
		<<else>>
			<<combat-pull-clothing-up "upper" $_hand>>
		<</if>>
	<<elseif $worn.upper.open is 1>>
		<<if $worn.lower.state is $worn.upper.state_top
		and $worn.lower.state is $worn.upper.state
		and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
			<<combat-pull-outfit-up "" "upper" $_hand>>
		<<else>>
			<<combat-pull-outfit-down "" "upper" $_hand>>
		<</if>>
	<<else>>
		<<combat-tug-clothing "upper" $_hand>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-underupperclothes">>
	<<set $_hand to _args[0]>>

	<<if _underOutfit is false>>
		<<if $worn.under_upper.open is 1>>
			<<combat-pull-clothing-down "under_upper" $_hand>>
		<<else>>
			<<combat-pull-clothing-up "under_upper" $_hand>>
		<</if>>
	<<elseif $worn.under_upper.open is 1>>
		<<if $worn.under_lower.state is $worn.under_upper.state_top
		and $worn.under_lower.state is $worn.under_upper.state
		and setup.clothes.under_lower[clothesIndex('under_lower', $worn.under_lower)].skirt is 1>>
			<<combat-pull-outfit-up "under" "upper" $_hand>>
		<<else>>
			<<combat-pull-outfit-down "under" "upper" $_hand>>
		<</if>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-clothes">>
	<<set $_slot to _args[0]>>
	<<set $_hand to _args[1]>>

	<<set $_strugglevar to $_slot.replace("_","") + "struggle">>

	<<rng>>
	<<if $worn[$_slot].name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand $_hand>>
	<<elseif $worn[$_slot].type.includes("strap-on") and $worn[$_slot].state is "waist" and $penisstate is 0>>
		<<combat-reset-hand $_hand>>
	<<elseif V[$_strugglevar] is 1>>
		<<set V[$_strugglevar] to 0>>
		You manage to keep <<him>> from stripping you of your $worn[$_slot].name.
		<<set $speechstripstruggle to 1>>
	<<elseif $rng gte 101>>
		<span class="lblue"><<He>> releases <<his>> hand from your $worn[$_slot].name.</span>
		<<combat-reset-hand $_hand>>
	<<elseif $rng lte 100>>
		<<switch $_slot>>
			<<case "under_lower">> <<combat-hand-on-underlowerclothes $_hand>>
			<<case "lower">> <<combat-hand-on-lowerclothes $_hand>>
			<<case "over_lower">> <<combat-hand-on-overlowerclothes $_hand>>
			<<case "under_upper">> <<combat-hand-on-underupperclothes $_hand>>
			<<case "upper">> <<combat-hand-on-upperclothes $_hand>>
			<<case "over_upper">> <<combat-hand-on-overupperclothes $_hand>>
		<</switch>>
	<</if>>

	<<switch $_slot>>
		<<case "under_upper" "upper" "over_upper">> <<bodypart_admire_chance "breasts">>
		<<case "over_lower" "lower">> <<bodypart_admire_chance "back">>
		<<case "under_lower">> <<bodypart_admire_chance "pubic">>
	<</switch>>
<</widget>>

<<widget "combat-hand-on-lube">>
	<<if $NPCList[_n].penis is "vaginaentrance" and $player.bodyliquid.vaginaoutside.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> _args[0] hand, <span class="pink">covering your <<pussy>> in slimy fluid.</span>
			<<neutral 10 _n>><<bodyliquid "vaginaoutside" "goo">>
	<<elseif $NPCList[_n].penis is "anusentrance" and $player.bodyliquid.bottom.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> _args[0] hand, <span class="pink">covering your <<bottom>> in slimy fluid.</span>
			<<neutral 10 _n>><<bodyliquid "bottom" "goo">>
	<<elseif $NPCList[_n].penis is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> _args[0] hand, <span class="pink">covering your <<penis>> in slimy fluid.</span>
			<<neutral 10 _n>><<bodyliquid "penis" "goo">>
	<<elseif $NPCList[_n].vagina is "penisentrance" and $player.bodyliquid.penis.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> _args[0] hand, <span class="pink">covering your <<penis>> in slimy fluid.</span>
			<<neutral 10 _n>><<bodyliquid "penis" "goo">>
	<<elseif $NPCList[_n].vagina is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> _args[0] hand, <span class="pink">covering your <<penis>> in slimy fluid.</span>
			<<neutral 10>><<bodyliquid "penis" "goo">>
	<<elseif ($NPCList[_n].penis is "vaginaentrancedouble" or $NPCList[_n].penis is "vaginaimminentdouble") and $player.bodyliquid.vaginaoutside.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> _args[0] hand, <span class="pink">covering your <<pussy>> in slimy fluid.</span>
			<<neutral 10>><<bodyliquid "vaginaoutside" "goo">>
	<<elseif ($NPCList[_n].penis is "anusentrancedouble" or $NPCList[_n].penis is "anusimminentdouble") and $player.bodyliquid.bottom.goo lt 5>>
			<<He>> squeezes the bottle of lubricant in <<his>> _args[0] hand, <span class="pink">covering your <<bottom>> in slimy fluid.</span>
			<<neutral 10>><<bodyliquid "bottom" "goo">>
	<<else>>
		<span class="lblue"><<He>> casts aside the lube in <<his>> _args[0] hand.</span>
		<<combat-reset-hand _args[0]>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-shoes">>
	<<if $worn.feet.name isnot "naked">>
		<<He>> tugs off your $worn.feet.name.
		<<feetstrip>>
		<<neutral 5 _n>>
	<</if>>
	<<combat-reset-hand _args[0]>>
<</widget>>

<<widget "combat-hand-on-socks">>
	<<if $worn.legs.name isnot "naked">>
		<<He>> tugs off your $worn.legs.name, exposing your feet.
		<<legsstrip>>
		<<neutral 5 _n>>
	<</if>>
	<<combat-reset-hand _args[0]>>
<</widget>>

<<widget "combat-hand-on-shackle">>
	<span class="red"><<He>> clamps the iron shackles around your ankles.</span> They lock with a click.
	<<if $carried.feet.name isnot "naked">>
		<<silently>><<generalSteal "feet">><</silently>>
	<</if>>
	<<shackle_feet>>
	<<combat-reset-hand _args[0]>>
<</widget>>

<<widget "combat-hand-on-shackle-imminent">>
	<span class="pink"><<He>> pulls your ankles into the iron shackles.</span>
	<<combat-set-hand-target _args[0] "shackle_imminent">>
<</widget>>


<<widget "combat-hand-on-head_breasts">>
	<<rng>>
	<<if $rng gte 69 and ($worn.face.type.includes("covered") or $worn.face.type.includes("gag"))>>
		<<He>> pushes your mouth against <<hisselect _n>> $NPCList[_n].breastdesc, but it's blocked by your $worn.face.name.
		<<set $speechheadbreasts to 1>>
		<<if $NPCList[_n].type is "plant" and $NPCList[_n].pronoun is "f" and $breastfeedingdisable is "f">>
			<span class="pink">Nectar leaks from <<hisselect _n>> bud.</span>
			<<damageFaceCover 1>>
		<<elseif $NPCList[_n].lactation is 1 and $breastfeedingdisable is "f">>
			<span class="pink">Milk leaks from <<hisselect _n>> bud.</span>
			<<set $speechheadsuckleclosed to 1>>
			<<damageFaceCover 1>>
		<<else>>
			<<set $speechheadnippleclosed to 1>>
		<</if>>
		<<damageFaceCover 1>>
	<<elseif $rng gte 70>>
		<<sex 3 "mouth" _n>>
		<<combat-set-hand-target _args[0] "head_nipples">>
		<<if $mouthstate isnot "nipple">>
			<<set $mouthactiondefault to "breastclosed">>
		<</if>>
		<<set $mouthstate to "nipple">><<set $NPCList[_n].chest to "mouth">><<set $mouthtarget to _n>>

		<<if $NPCList[_n].breastsize gte 1>>
			<<He>> pushes your mouth against <<hisselect _n>> $NPCList[_n].breastdesc, <span class="purple">and your mouth against <<hisselect _n>> nipple.</span>
		<<else>>
			<span class="purple"><<He>> pushes your mouth against <<hisselect _n>> $NPCList[_n].breastdesc.</span>
		<</if>>

		<<if $NPCList[_n].type is "plant" and $NPCList[_n].pronoun is "f" and $breastfeedingdisable is "f">>
			<span class="pink">Nectar leaks from <<hisselect _n>> bud.</span>
		<<elseif $NPCList[_n].lactation is 1 and $breastfeedingdisable is "f">>
			<span class="pink">Milk leaks from <<hisselect _n>> bud.</span>
			<<set $speechheadsuckleclosed to 1>>
		<<else>>
			<<set $speechheadnippleclosed to 1>>
		<</if>>
	<<else>>
		<<neutral 3 _n>>
		<<He>> holds your head between <<hisselect _n>> $NPCList[_n].breastsdesc.
		<<if $NPCList[_n].breastsize gte 6>>
			<<set $speechheadbreasts to 1>>
		<<else>>
			<<set $speechheadchest to 1>>
		<</if>>
	<</if>>
	<<bodypart_admire_chance forehead>>
<</widget>>

<!-- pass "left", "right" or "both" as the first argument, and "hand" or "hands" for the second argument -->
<<widget "combat-hand-on-mask">>
	<<if $worn.face.type.includes("mask") or $worn.face.type.includes("covered")>>
		<<set $_hishand to (_args[0] isnot "both" ? "<<his>> " : "") + _args[0] + " " + _args[1]>>
		<<if $face is "covered">>
			<<He>> tries to pull your $worn.face.name off your face with $_hishand, <span class="lblue">but you grip it tight.</span>
			<<if random(1, 3) is 3>>
				<span class="lblue"><<He>> releases it with a frustrated sigh.</span>
				<<combat-reset-hand _args[0]>>
			<<else>>
				<<if $enemyanger gt ($enemyangermax / 2)>>
					<span class="red"><<He>> tries to force your $worn.face.name off!</span>
					<<damageFaceCover 4>>
				<</if>>
			<</if>>
		<<else>>
			<<He>> pulls your $worn.face.name off your face with $_hishand, <span class="pink">revealing your identity.</span>
			<<facestrip>><<clothesstripstat>><<combat-reset-hand _args[0]>>
		<</if>>
	<<else>>
		<<combat-reset-hand _args[0]>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-chastity">>
	<<if $worn.genitals.name is "naked">>
		<<cast_aside_clothes>>
		<<combat-reset-hand _args[0]>>
	<<else>>
		<<if $worn.genitals.name is "chastity parasite">>
			<span class="blue"><<He>> pulls on your $worn.genitals.name, only to then squeeze it.</span>
			<span class="lewd"><<His>> rough handling leaves you feeling more aroused.</span>
			<<arousal 100 "genitals">>
			<<if random(0, 100) gt $enemyanger>>
				Seeing your reaction to squeezing it, <<he>> continues.
				<<arousal 200 "genitals">><<if !$earSlime.defyCooldown and $earSlime.vibration lt 120>><<set $earSlime.vibration += 5>><</if>>
			<<elseif $enemyanger gt 100>>
				Seeing your reaction to squeezing it, <<he>> gives it one more go at tearing it away before giving up.
				<<set $worn.genitals.integrity -= 5>>
				<<arousal 100 "genitals">><<combat-reset-hand _args[0]>><<set $speechchastity to 1>><<bodypart_admire_chance pubic>>
			<<else>>
				<<He>> stops after a few more moments of squeezing, looking bewildered.
				<<combat-reset-hand _args[0]>><<set $speechchastity to 1>><<bodypart_admire_chance pubic>>
			<</if>>
			<<set $worn.genitals.integrity -= 5>>
		<<else>>
			<span class="blue"><<He>> tries to loosen your $worn.genitals.name.</span>
			<<His>> rough handling leaves you feeling more frustrated and aroused. <<He>> gives up after a few moments of impotent tugging, looking disappointed.
			<<set $enemyanger += 5>><<combat-reset-hand _args[0]>><<set $speechchastity to 1>><<bodypart_admire_chance pubic>><<set $worn.genitals.integrity -= 10>>
		<</if>>
		<<neutral 1 "genitals" _n>><<arousal 5 "genitals">>
	<</if>>
<</widget>>

<<widget "combat-hand-on-throat">>
	<<if $asphyxiaLvl gte 1>>
		<<rng>>
		<<if $consensual is 1>>
			<<mancombat_choke>>
		<<else>>
			<<mancombat_strangle>>
		<</if>>
	<</if>>
<</widget>>

<<widget "combat-hand-on-head_nipples">>
	<<sex 3 "mouth">>
	<<personselect _n>>
	<<He>> continues to push your mouth against <<his>> $NPCList[_n].breastdesc.
	<<if $breastfeedingdisable is "f">>
		<<if $NPCList[_n].type is "plant" and $NPCList[_n].pronoun is "f">>
			<span class="pink">Nectar leaks from <<his>> bud.</span>
		<<elseif $NPCList[_n].lactation is 1>>
			<span class="pink">Milk leaks from <<his>> bud.</span>
		<</if>>
	<</if>>
	<<bodypart_admire_chance forehead>>
<</widget>>

<<widget "combat-pen-on-bodypart">>
	<<set $_hand to _args[0]>><<set $_penbodypart to _args[1]>>
	<<He>> scrawls on your <<bodypart $_penbodypart>>:
	<<bodywriting_npc $_penbodypart `$NPCList[_n][$_hand + "tool"]`>>
	<<set $newlyWritten.pushUnique($_penbodypart)>>
	<<combat-reset-hand $_hand>><<set $NPCList[_n][$_hand + "tool"] to 0>>
<</widget>>

<<widget "combat-set-hand-start">>
	<<rng>>

	<<combat-get-other-hand _args[0]>>

	<<if $askedtochoke is 1 and $consensual is 1 and $asphyxiaLvl gte 1 and ($neckuse isnot "hand" or ($otherNPChand is "throat" and $rng lte 30))>>
		<<set $neckuse to "hand">>
		<<set $askedtochoke to 0>>
		<<combat-set-hand-target _args[0] "throat">>
		<<neutral 1 _n>>
	<<elseif $combatgoal is "strip">>
		<<if $worn.over_upper.name isnot "naked" and $noupper isnot 1>>
			<span class="purple"><<He>> grasps your $worn.over_upper.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>>
			<<set $handtarget to "overupperclothes">>
		<<elseif $worn.upper.name isnot "naked" and $noupper isnot 1>>
			<span class="purple"><<He>> grasps your $worn.upper.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>>
			<<set $handtarget to "upperclothes">>
		<<elseif $worn.under_upper.name isnot "naked" and !$worn.under_upper.type.includes("sticky") and $noupper isnot 1>>
			<span class="purple"><<He>> grasps your $worn.under_upper.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>>
			<<set $handtarget to "underupperclothes">>
		<<elseif $worn.over_lower.name isnot "naked" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>>
			<<set $handtarget to "overlowerclothes">>
		<<elseif $worn.lower.name isnot "naked" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>>
			<<set $handtarget to "lowerclothes">>
		<<elseif $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>>
			<<set $handtarget to "underlowerclothes">>
		<<elseif $analdisable is "f" and playerHasButtPlug() and random(0,1) is 0>>
			<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
			<<neutral 1 _n>><<set $handtarget to "buttplug">>
		<<elseif $worn.genitals.name isnot "naked" and $walltype isnot "front">>
			<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>>
			<<set $handtarget to "genitals">>
		<<else>>
			<!-- You're naked, so the strip attack stops. Either detect this and stop the attack, or just let the attack continue normally. -->
			<<set $combatgoal to 0>>
			<<set $handtarget to 0>>
			<<set $NPCList[_n].mouth to 0>>
			<<set _stripped to true>>
		<</if>>
		<<combat-set-hand-target _args[0] $handtarget>>

	<<elseif $NPCList[_n].heldSexToy isnot undefined and $rng lt 25 and !getSexToysofType("all").includes($NPCList[_n].lefttool) and !getSexToysofType("all").includes($NPCList[_n].righttool)>>
		<<giveNPCsextoy _n $NPCList[_n].heldSexToy _args[0]>>
		<<combat-reveal-sextoy _args[0]>>

	<<elseif $rng lte 7 and ($consensual isnot 1 or ["Whitney", "Kylar", "Sydney"].includes($npc[$npcrow.indexOf(_n)])) and $bodywritingLvl gte 2 and $enemytype isnot "beast" and !$noBodyWriting>>
		<<set _rng to random(1, 5)>>
		<<if (_rng is 5 and $NPCList[_n].type isnot "plant" and $role isnot "islander") or $npc.includes("Sydney")>>
			<span class="purple"><<He>> pulls a <span class="pink">permanent</span> marker pen from <<his>> pocket, flicking off the lid.</span>
			<<set $tooltarget to "marker">>
		<<elseif _rng is 4 and $NPCList[_n].type isnot "plant" and $NPCList[_n].pronoun is "f" and $role isnot "islander">>
			<span class="purple"><<He>> pulls lipstick from <<his>> pocket, and pushes out the tip.</span>
			<<set $tooltarget to "lipstick">>
		<<elseif (_rng is 3 and $outside is 1 and ["forest","moor","farmlands","farm"].includes($location)) or $NPCList[_n].type is "plant" or $role is "islander">>
			<span class="purple"><<He>> lifts a handful of mud from the ground.</span>
			<<set $tooltarget to "mud">>
		<<else>>
			<span class="purple"><<He>> pulls a pen from <<his>> pocket, flicking off the lid.</span>
			<<set $tooltarget to "pen">>
		<</if>>
		<<if _args[0] is "left">>
			<<set $NPCList[_n].lefttool to $tooltarget>>
			<<set $NPCList[_n].lefthand to "pen">>
		<<else>>
			<<set $NPCList[_n].righttool to $tooltarget>>
			<<set $NPCList[_n].righthand to "pen">>
		<</if>>
		<<neutral 1 _n>>
	<<elseif $enemyanger + $rng lte 15 and $NPCList[_n].traits.includes("hypnotist") and $hypnosisdisable is "f">>
		<<set _tool to $role is "islander" ? "bundle of herbs" : "pendant">>
		<<He>> produces a
		<<if _args[0] is "left">>
			<<set $NPCList[_n].lefthand to "hypnosis">>
			<<set $NPCList[_n].lefttool to _tool>>
			<<print $NPCList[_n].lefttool>>,
		<<else>>
			<<set $NPCList[_n].righthand to "hypnosis">>
			<<set $NPCList[_n].righttool to _tool>>
			<<print $NPCList[_n].righttool>>,
		<</if>>
		<span class="purple">and <<print $role is "islander" ? "waves" : "swings">> it in front of your face.</span>
	<<elseif $enemyanger + $rng lte 20>>
		<<if $walltype is "front">>
			<<He>> strokes your cheek.
			<<neutral 10 _n>>
		<<else>>
			<<set $handtarget to 0>>
			<<if $worn.over_lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> _args[0] hand.</span>
				<<set $handtarget to "overlowerclothes">><<neutral 1 _n>>
			<<elseif $worn.lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> _args[0] hand.</span>
				<<set $handtarget to "lowerclothes">><<neutral 1 _n>>
			<<elseif !(($player.penisExist and !playerChastity("penis")) or ($player.vaginaExist and !playerChastity("vagina")))>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your $worn.genitals.name<<if $worn.genitals.name is "chastity parasite">>, <span class="lewd">leaving you feeling more aroused.</span><<arousal 100 "genitals">><<else>>.<</if>>
				<<neutral 10 "genitals" _n>><<set $speechchastity to 1>>
			<<elseif ($player.penisExist and !playerChastity("penis")) and ($player.vaginaExist and !playerChastity("vagina"))>>
				<<if $player.ballsExist and random(0,1) is 1>>
					<<He>> <<strokes>> your <<testicles>> and teases your glans.
					<<neutral 10 "genitals" _n>><<set $speechglans to 1>>
				<<else>>
					<<He>> strokes the base of your <<penis>> where it meets your <<pussy>>.
					<<neutral 10 "genitals" _n>><<set $speechfutapenis to 1>>
				<</if>>
			<<elseif $player.penisExist and $player.ballsExist and !playerChastity("penis")>>
				<<He>> <<strokes>> your <<testicles>> and teases your glans.
				<<neutral 10 "genitals" _n>><<set $speechglans to 1>>
			<<elseif $player.vaginaExist and !playerChastity("vagina")>>
				<<He>> <<strokes>> your pubic mound and teases your clit.
				<<neutral 10 "genitals" _n>><<set $speechclit to 1>>
			<</if>>
			<<combat-set-hand-target _args[0] $handtarget>>
		<</if>>
	<<elseif $enemyanger + $rng lte 30>>
		<<set $handtarget to 0>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<if $worn.over_lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> _args[0] hand.</span>
				<<set $handtarget to "overlowerclothes">><<neutral 1 _n>>
			<<elseif $worn.lower.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> _args[0] hand.</span>
				<<set $handtarget to "lowerclothes">><<neutral 1 _n>>
			<<elseif playerHasStrapon()>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your $worn.under_lower.name.
				<<neutral 10 "genitals" _n>>
			<<elseif !(($player.penisExist and !playerChastity("penis")) or ($player.vaginaExist and !playerChastity("vagina")))>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your $worn.genitals.name<<if $worn.genitals.name is "chastity parasite">>, <span class="lewd">leaving you feeling more aroused.</span><<arousal 100 "genitals">><<else>>.<</if>>
				<<neutral 10 "genitals" _n>><<set $speechchastity to 1>>
			<<elseif ($player.penisExist and !playerChastity("penis")) and ($player.vaginaExist and !playerChastity("vagina"))>>
				<<He>> runs <<his>> hand up your thigh and over the area where your <<penis>> and <<pussy>> meet.
				<<neutral 10 "genitals" _n>><<set $speechfutapenis to 1>>
			<<elseif $player.penisExist and !playerChastity("penis")>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your <<glans>>.
				<<neutral 10 "genitals" _n>><<set $speechglans to 1>>
			<<elseif $player.vaginaExist and !playerChastity("vagina")>>
				<<He>> <<strokes>> your inner thigh and brushes <<his>> fingers against your clit.
				<<neutral 10 "genitals" _n>><<set $speechclit to 1>>
			<<else>>
				<<He>> <<strokes>> your inner thigh.
				<<neutral 10 "genitals" _n>>
			<</if>>
			<<combat-set-hand-target _args[0] $handtarget>>
			<<bodypart_admire_chance random_thigh>>
		<<else>>
			<<if $worn.over_upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.over_upper.name with <<his>> _args[0] hand.</span>
				<<set $handtarget to "overupperclothes">><<neutral 1 _n>>
			<<elseif $worn.upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.upper.name with <<his>> _args[0] hand.</span>
				<<set $handtarget to "upperclothes">><<neutral 1 _n>>
			<<elseif $worn.under_upper.name isnot "naked" and !$worn.under_upper.type.includes("sticky") and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.under_upper.name with <<his>> _args[0] hand.</span>
				<<set $handtarget to "underupperclothes">><<neutral 1 _n>>
			<<else>>
				<<He>> <<strokes>> your chest, <<his>> fingers lingering around your <<nipple>>.
				<<neutral 4 "breasts" _n>><<playWithBreasts>>
			<</if>>
			<<combat-set-hand-target _args[0] $handtarget>>
			<<bodypart_admire_chance breasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 35>>
		<<if $walltype is "front">>
			<<He>> cups your chin with <<his>> _args[0] hand.
			<<neutral 2 _n>>
		<<else>>
			<<set $handtarget to 0>>
			<<if ((setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1) or (setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and $worn.lower.type.includes("naked")) or (setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1 and $worn.over_lower.type.includes("naked")))>>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "underlowerclothes">><<neutral 1 _n>>
				<<elseif $analdisable is "f" and random(0,1) is 0 and playerHasButtPlug()>>
					<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
					<<neutral 1 _n>><<set $handtarget to "buttplug">>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1 "genitals" _n>>
				<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
					<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
						<<if $anususe is 0 and $analdisable is "f">>
							<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<bottom>>.</span>
							<<set $handtarget to "anusentrance">><<set $anususe to "handentrance">><<set $anusstate to "handentrance">><<neutral 1 _n>>
						<</if>>
					<</if>>
				<</if>>
			<<elseif $worn.lower.state isnot "waist">>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "underlowerclothes">><<neutral 1 _n>>
				<<elseif $analdisable is "f" and random(0,1) is 0 and playerHasButtPlug()>>
					<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
					<<neutral 1 _n>><<set $handtarget to "buttplug">>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1 "genitals" _n>>
				<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
					<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
						<<if $anususe is 0 and $analdisable is "f">>
							<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<bottom>>.</span>
							<<set $handtarget to "anusentrance">><<set $anususe to "handentrance">><<set $anusstate to "handentrance">><<neutral 1 _n>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
			<<combat-set-hand-target _args[0] $handtarget>>
			<<bodypart_admire_chance back>>
		<</if>>
	<<elseif $enemyanger + $rng lte 40>>
		<<if $walltype is "front">>
			<<He>> runs <<his>> fingers through your hair with <<his>> _args[0] hand.
			<<neutral 2 _n>>
		<<else>>
			<<set $handtarget to 0>>
			<<if ((setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1) or (setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and $worn.lower.type.includes("naked")) or (setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1 and $worn.over_lower.type.includes("naked")))>>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "underlowerclothes">><<neutral 1 _n>>
				<<elseif $analdisable is "f" and playerHasButtPlug() and random(0,1) is 0 and $worn.genitals.anal_shield isnot undefined and !playerChastity("anus")>>
					<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
					<<neutral 1 _n>><<set $handtarget to "buttplug">>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1 "genitals" _n>>
				<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
					<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
						<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
							<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<pussy>>, resting a finger on your entrance.</span>
							<<set $handtarget to "vaginaentrance">><<set $vaginause to 1>><<neutral 1 "genitals" _n>>
						<<elseif $player.penisExist and $penisuse is 0>>
							<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<penis>>.</span>
							<<set $handtarget to "penisentrance">><<set $penisuse to 1>><<neutral 1 "genitals" _n>>
						<</if>>
					<</if>>
				<</if>>
			<<elseif $worn.lower.state isnot "waist">>
				<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
					<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "underlowerclothes">><<neutral 1 "genitals" _n>>
				<<elseif $worn.genitals.name isnot "naked">>
					<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
					<<set $handtarget to "genitals">><<neutral 1 "genitals" _n>>
				<<elseif $analdisable is "f" and random(0,1) is 0 and playerHasButtPlug()>>
					<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
					<<neutral 1 _n>><<set $handtarget to "buttplug">>
				<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
					<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
						<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
							<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<pussy>>, resting a finger above your entrance.</span>
							<<set $handtarget to "vaginaentrance">><<set $vaginause to 1>><<neutral 1 "genitals" _n>>
						<<elseif $player.penisExist and $penisuse is 0>>
							<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<penis>>.</span>
							<<set $handtarget to "penisentrance">><<set $penisuse to 1>><<neutral 1 "genitals" _n>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
			<<combat-set-hand-target _args[0] $handtarget>>
			<<bodypart_admire_chance pubic>>
		<</if>>
	<<elseif $enemyanger + $rng lte 45>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> leans against the wall.
		<<else>>
			<<He>> caresses your tummy.
			<<neutral 1 _n>>
			<<if playerBellyVisible()>><<set $speechpregnant to 1>><</if>>
		<</if>>
		<<bodypart_admire_chance back>>
	<<elseif $enemyanger + $rng lte 50>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> grips your thigh and pulls, but you're stuck firm.
			<<neutral 1 _n>>
			<<bodypart_admire_chance random_thigh>>
		<<else>>
			<<He>> <<strokes>> your hair.
			<<neutral 1 _n>>
			<<bodypart_admire_chance forehead>>
		<</if>>
	<<elseif $enemyanger + $rng lte 55>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> grips your thigh and pulls, but you're stuck firm.
			<<neutral 1 _n>>
			<<bodypart_admire_chance random_thigh>>
		<<elseif $worn.face.type.includes("mask") or $worn.face.type.includes("gag")>>
			<span class="purple"><<He>> grasps your $worn.face.name with <<his>> _args[0] hand.</span>
			<<neutral 1 _n>><<combat-set-hand-target _args[0] "mask">>
		<<else>>
			<<He>> <<strokes>> your hair.
			<<neutral 1 _n>>
			<<bodypart_admire_chance forehead>>
		<</if>>
	<<elseif $enemyanger + $rng lte 60>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> tugs on your leg with <<his>> _args[0] hand, but you're stuck firm.
			<<neutral 1 _n>>
			<<bodypart_admire_chance back>>
		<<elseif !$worn.upper.type.includes("naked") and $worn.upper.state isnot "chest" and $worn.upper.state_top is "chest">>
			<<He>> gropes your <<breasts>> through your $worn.upper.name.
			<<if $body_temperature is "chilly" or $body_temperature is "cold">>
				Your buds stand erect and vulnerable in the cold.
			<</if>>
			<<neutral 2 "breasts" _n>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<<elseif !$worn.under_upper.type.includes("naked") and $worn.under_upper.state isnot "chest" and $worn.under_upper.state_top is "chest">>
			<<He>> gropes your <<breasts>> through your $worn.under_upper.name.
			<<if $body_temperature is "chilly" or $body_temperature is "cold">>
				Your buds stand erect and vulnerable in the cold.
			<</if>>
			<<neutral 2 "breasts" _n>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<<else>>
			<<He>> gropes your exposed <<breasts>> with <<his>> _args[0] hand.
			<<if $body_temperature is "chilly" or $body_temperature is "cold">>
				Your buds stand erect and vulnerable in the cold.
			<</if>>
			<<neutral 4 "breasts" _n>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 70 and $pronoun is "f" and $position isnot "wall" and not $gloryhole and $head is 0 and ($mouthuse is 0 or $mouthuse is "breasts") and ($NPCList[_n].chest is 0 or $NPCList[_n].chest is "clothed") and $NPCList[_n].location.genitals isnot "head" and $NPCList[_n].location.head isnot "genitals" and $NPCList[_n].stance isnot "topface">>
		<<if $NPCList[_n].chest is "clothed">>
			<span class="blue"><<He>> <<npcUndressText $NPCList[_n] "upper" "self">>,</span> and <span class="pink">pushes your face against <<his>> $NPCList[_n].breastsdesc</span> with <<his>> _args[0] hand.
			<<set $NPCList[_n].chest to 0>>
		<<else>>
			<<He>> cradles the back of your head in <<his>> _args[0] hand, and <span class="pink">pushes your face against <<his>> $NPCList[_n].breastsdesc.</span>
		<</if>>
		<<if $NPCList[_n].type is "plant" and $breastfeedingdisable is "f">>
			<span class="purple">It carries a sweet scent.</span>
		<<elseif $NPCList[_n].lactation is 1 and $breastfeedingdisable is "f">>
			<span class="purple">It carries a scent of milk.</span>
		<</if>>
		<<combat-set-hand-target _args[0] "head_breasts">><<set $mouthuse to "breasts">><<set $mouthstate to "breasts">><<set $head to "breasts">>
		<<set $NPCList[_n].chest to "mouthentrance">><<set $speechheadbreasts to 1>><<neutral 3 _n>><<set $mouthactiondefault to "breastclosed">>
		<<set $NPCList[_n].location.head to "head">><<set $mouthtarget to _n>>
		<<bodypart_admire_chance forehead>>
	<<elseif $enemyanger + $rng lte 80>>
		<<if $walltype is "front">>
			<<He>> pushes your shoulder with <<his>> _args[0] hand, testing how stuck you are.
			<<neutral 2 _n>>
		<<else>>
			<<set $speechbottom to 1>>
			<<if $worn.over_lower.state is "waist" and setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 0>>
				<<if $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
					<<He>> tries to grope your <<bottom>> through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1 _n>>
				<<else>>
					<<He>> gropes your <<bottom>> through your $worn.over_lower.name.
					<<neutral 5 _n>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
				<<He>> gropes your <<bottom>> through your $worn.lower.name.
				<<neutral 2 _n>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> gropes your <<bottom>> through your $worn.under_lower.name.
				<<neutral 2 _n>>
			<<else>>
				<<He>> fondles and <<strokes>> your exposed <<bottom>>.
				<<neutral 4 _n>>
			<</if>>
			<<bodypart_admire_chance random_bottom>>
		<</if>>
	<<elseif $enemyanger + $rng lte 90 and $enemytype isnot "beast" and $NPCList[_n].type isnot "plant" and $NPCList[_n].fullDescription isnot "Ivory Wraith" and !$abomination and $role isnot "islander">>
		<<combat-set-hand-target _args[0] "lube">>
		<<if $NPCList[_n].penis is "vaginaentrance" and $player.bodyliquid.vaginaoutside.goo lt 5 and !playerChastity("vagina")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<pussy>>.</span>
		<<elseif $NPCList[_n].penis is "anusentrance" and $player.bodyliquid.bottom.goo lt 5 and !playerChastity("anus")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<bottom>>.</span>
		<<elseif $NPCList[_n].penis is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5 and !playerChastity("penis")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<penis>>.</span>
		<<elseif $NPCList[_n].vagina is "penisentrance" and $player.bodyliquid.penis.goo lt 5 and !playerChastity("penis")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<penis>>.</span>
		<<elseif $NPCList[_n].vagina is "otheranusentrance" and $player.bodyliquid.penis.goo lt 5 and !playerChastity("penis")>>
			<span class="purple"><<He>> holds a bottle of lubricant near your <<penis>>.</span>
		<<else>>
			<<He>> smacks your hip.
			<<neutral 5 _n>>
			<<combat-reset-hand _args[0]>>
		<</if>>
	<<elseif $enemyanger + $rng lte 95>>
		<<if $worn.feet.cursed isnot 1 and $worn.feet.name isnot "naked">>
			<span class="purple"><<He>> grasps your $worn.feet.name.</span>
			<<combat-set-hand-target _args[0] "shoes">>
			<<neutral 3 _n>>
		<<else>>
			<<if $worn.legs.name is "naked">>
				<<He>> rubs your foot.
				<<neutral 1 _n>>
			<<else>>
				<span class="purple"><<He>> grasps your $worn.legs.name.</span>
				<<combat-set-hand-target _args[0] "socks">>
				<<neutral 3 _n>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 100 and $walltype isnot "front">>
		<<if !(($player.penisExist and !playerChastity("penis")) or ($player.vaginaExist and !playerChastity("vagina")))>>
			<<if $worn.over_lower.state is "waist" and setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 0>>
				<<if $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
					<<He>> tries to fondle you around your $worn.genitals.name through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1 _n>>
				<<else>>
					<<He>> fondles and <<strokes>> you around your $worn.genitals.name through your $worn.over_lower.name.
					<<neutral 5 "genitals" _n>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
				<<He>> fondles and <<strokes>> around your $worn.genitals.name through your $worn.lower.name.
				<<neutral 5 "genitals" _n>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> fondles and <<strokes>> around your $worn.genitals.name through your $worn.under_lower.name.
				<<neutral 5 "genitals" _n>>
			<<elseif $penisuse is 0>>
				<<He>> fondles and <<strokes>> around your $worn.genitals.name.
				<<neutral 10 "genitals" _n>>
			<<else>>
				<<He>> <<strokes>> your thighs.
				<<neutral 10 "genitals" _n>>
			<</if>>
			<<bodypart_admire_chance random_thigh>>
		<<elseif $player.penisExist and (!$player.vaginaExist or random(0,100) gte 50) and !playerChastity("penis")>>
			<<if $worn.over_lower.state is "waist" and setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 0>>
				<<if $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
					<<He>> tries to grope your <<penis>> through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1 _n>>
				<<else>>
					<<He>> gropes and <<strokes>> your <<penis>> through your $worn.over_lower.name.
					<<neutral 5 "genitals" _n>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
				<<He>> gropes and <<strokes>> your <<penis>> through your $worn.lower.name.
				<<neutral 5 "genitals" _n>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> gropes and <<strokes>> your <<penis>> through your $worn.under_lower.name.
				<<neutral 5 "genitals" _n>>
			<<elseif $penisuse is 0>>
				<<He>> gropes and <<strokes>> your exposed <<penis>>.
				<<neutral 10 "genitals" _n>>
			<<elseif $player.ballsExist is true>>
				<<He>> cups and <<strokes>> your <<testicles>>.
				<<neutral 10 "genitals" _n>>
			<<else>>
				<<He>> runs a finger down your shaft, stopping and pressing against the point where your <<penis>> and <<pussy>> meet.
				<<neutral 10 "genitals" _n>>
			<</if>>
			<<bodypart_admire_chance pubic>>
		<<elseif $player.vaginaExist and !playerChastity("vagina")>>
			<<if $worn.over_lower.state is "waist" and setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 0>>
				<<if $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
					<<He>> tries to grope your labia through your $worn.over_lower.name, but you're wearing too much to really feel it.
					<<neutral 1 _n>>
				<<else>>
					<<He>> gropes and <<strokes>> your labia through your $worn.over_lower.name.
					<<neutral 5 "genitals" _n>>
				<</if>>
			<<elseif $worn.lower.state is "waist" and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 0>>
				<<He>> gropes and <<strokes>> your labia through your $worn.lower.name.
				<<neutral 5 "genitals" _n>>
			<<elseif $worn.under_lower.state is "waist">>
				<<He>> gropes and <<strokes>> your labia through your $worn.under_lower.name.
				<<neutral 5 "genitals" _n>>
			<<else>>
				<<He>> gropes and <<strokes>> your exposed <<pussy>>.
				<<neutral 10 "genitals" _n>>
			<</if>>
			<<bodypart_admire_chance pubic>>
		<</if>>
	<<elseif $enemyanger + $rng lte 110 and $walltype isnot "front">>
		<<if $worn.over_lower.name isnot "naked">>
			<span class="purple"><<He>> grasps your $worn.over_lower.name with <<his>> _args[0] hand.</span>
			<<combat-set-hand-target _args[0] "overlowerclothes">><<neutral 1 "genitals" _n>>
		<<elseif $worn.lower.name isnot "naked">>
			<span class="purple"><<He>> grasps your $worn.lower.name with <<his>> _args[0] hand.</span>
			<<combat-set-hand-target _args[0] "lowerclothes">><<neutral 1 "genitals" _n>>
		<<elseif playerHasStrapon()>>
			<<He>> smacks your hip.
			<<neutral 15 _n>>
		<<elseif $player.penisExist>>
			/*$penis use need to be checked inside of $player.penisExist check to prevent mention of the clitoris*/
			<<if $penisuse is 0>>
				<<He>> pinches your glans.
				<<neutral 15 "genitals" _n>><<bruise penis>><<set $speechglans to 1>>
			<<else>>
				<<He>> pinches your shaft.
				<<neutral 10 "genitals" _n>><<bruise penis>>
			<</if>>
		<<elseif $player.vaginaExist and !playerChastity("vagina")>>
			<<He>> pinches your clitoris.
			<<neutral 15 "genitals" _n>><<bruise vagina>><<set $speechclit to 1>>
		<</if>>
		<<bodypart_admire_chance pubic>>
	<<elseif $enemyanger + $rng lte 120>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> squeezes your thigh.
			<<violence 1>><<hitstat>><<bruise thigh>>
			<<bodypart_admire_chance random_thigh>>
		<<else>>

			<<combat-get-other-hand _args[0]>>

			<<if $worn.over_upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.over_upper.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "overupperclothes">><<neutral 1 _n>>
			<<elseif $worn.upper.name isnot "naked" and $noupper isnot 1>>
				<span class="purple"><<He>> grasps your $worn.upper.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "upperclothes">><<neutral 1 _n>>
			<<elseif $asphyxiaLvl gte 1 and $nochoke isnot 1 and ($neckuse isnot "hand" or $otherNPChand is "throat")>>
				<span class="purple"><<He>> grabs your throat.</span>
				<<violence 2>><<combat-set-hand-target _args[0] "throat">><<set $neckuse to "hand">>
			<<else>>
				<<He>> tugs your hair.
				<<violence 1>>
			<</if>>
			<<bodypart_admire_chance random_shoulder>>
		<</if>>
	<<elseif $enemyanger + $rng lte 125 and $walltype isnot "front">>
		<<if ((setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1) or (setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and $worn.lower.type.includes("naked")) or (setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1 and $worn.over_lower.type.includes("naked")))>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "underlowerclothes">><<neutral 1 "genitals" _n>>
			<<elseif $analdisable is "f" and random(0,1) is 0 and playerHasButtPlug()>>
				<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
				<<neutral 1 _n>><<set $handtarget to "buttplug">>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "genitals">><<neutral 1 "genitals" _n>>
			<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
				<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<if $anususe is 0 and $analdisable is "f">>
						<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<bottom>>.</span>
						<<combat-set-hand-target _args[0] "anusentrance">><<set $anususe to "handentrance">><<set $anusstate to "handentrance">><<neutral 1 _n>>
					<</if>>
				<</if>>
			<</if>>
			<<bodypart_admire_chance back>>
		<!-- note: the sections above and below are identical other than the bodypart_admire_chance back -->
		<<elseif $worn.lower.state isnot "waist">>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "underlowerclothes">><<neutral 1 "genitals" _n>>
			<<elseif $analdisable is "f" and random(0,1) is 0 and playerHasButtPlug()>>
				<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
				<<neutral 1 _n>><<set $handtarget to "buttplug">>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "genitals">><<neutral 1 "genitals" _n>>
			<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
				<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<if $anususe is 0 and $analdisable is "f">>
						<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<bottom>>.</span>
						<<combat-set-hand-target _args[0] "anusentrance">><<set $anususe to "handentrance">><<set $anusstate to "handentrance">><<neutral 1 _n>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<bodypart_admire_chance random_bottom>>
	<<elseif $enemyanger + $rng lte 130 and $walltype isnot "front">>
		<<if ((setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1) or (setup.clothes.over_lower[clothesIndex('over_lower', $worn.over_lower)].skirt is 1 and $worn.lower.type.includes("naked")) or (setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1 and $worn.over_lower.type.includes("naked")))>>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "underlowerclothes">><<neutral 1 "genitals" _n>>
			<<elseif $analdisable is "f" and random(0,1) is 0 and playerHasButtPlug()>>
				<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
				<<neutral 1 _n>><<set $handtarget to "buttplug">>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "genitals">><<neutral 1 "genitals" _n>>
			<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
				<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
						<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<pussy>>, <<his>> finger resting on your entrance.</span>
						<<combat-set-hand-target _args[0] "vaginaentrance">><<set $vaginause to 1>><<set $vaginastate to "otherhandentrance">><<neutral 1 "genitals" _n>>
					<<elseif $player.penisExist and $penisuse is 0>>
						<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<penis>>.</span>
						<<combat-set-hand-target _args[0] "penisentrance">><<set $penisuse to 1>><<set $penisstate to "otherhandentrance">><<neutral 1 "genitals" _n>>
					<</if>>
				<</if>>
			<</if>>
			<<bodypart_admire_chance pubic>>
		<<elseif $worn.lower.state isnot "waist">>
			<<if $worn.under_lower.name isnot "naked" and $worn.under_lower.state isnot "totheside">>
				<span class="purple"><<He>> grasps your $worn.under_lower.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "underlowerclothes">><<neutral 1 "genitals" _n>>
			<<elseif $analdisable is "f" and random(0,1) is 0 and playerHasButtPlug()>>
				<span class="purple"><<He>> places <<his>> hand on your $worn.butt_plug.name.</span>
				<<neutral 1 _n>><<set $handtarget to "buttplug">>
			<<elseif $worn.genitals.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.genitals.name with <<his>> _args[0] hand.</span>
				<<combat-set-hand-target _args[0] "genitals">><<neutral 1 "genitals" _n>>
			<<elseif $worn.under_lower.vagina_exposed is 1 and $worn.genitals.vagina_exposed is 1>>
				<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $penisuse isnot 0 or random(0,100) gte 50)>>
						<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<pussy>>, <<his>> finger resting on your entrance.</span>
						<<combat-set-hand-target _args[0] "vaginaentrance">><<set $vaginause to 1>><<neutral 1 "genitals" _n>>
					<<elseif $player.penisExist and $penisuse is 0>>
						<span class="purple"><<He>> presses <<his>> _args[0] hand against your <<penis>>.</span>
						<<combat-set-hand-target _args[0] "penisentrance">><<set $penisuse to 1>><<neutral 1 "genitals" _n>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<bodypart_admire_chance pubic>>

	<<elseif $enemyanger + $rng lte 140>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> slaps your <<bottom>>.
			<<violence 1>><<bruise bottom>><<hitstat>>
			<<bodypart_admire_chance random_bottom>>
		<<else>>
			<span class="purple"><<He>> seizes your hair with <<his>> _args[0] hand.</span>
			<<combat-set-hand-target _args[0] "hair">><<violence 2>><<set $speechhair to 1>>
			<<bodypart_admire_chance forehead>>
		<</if>>
	<<elseif $enemyanger + $rng lte 160>>
		<<if $asphyxiaLvl gte 4 and $nochoke isnot 1 and ($neckuse isnot "hand" or $otherNPChand is "throat") and random(1,2) is 1>>
			<span class="purple"><<He>> grabs your throat.</span>
			<<violence 2>><<combat-set-hand-target _args[0] "throat">><<set $neckuse to "hand">>
		<<elseif $leftarm isnot "bound" and $rightarm isnot "bound" and $leftarm isnot "grappled" and $rightarm isnot "grappled" and $NPCList[_n].lefthand isnot "arms" and $NPCList[_n].righthand isnot "arms">>
			<span class="purple"><<He>> pins down your arms.</span>
			<<combat-set-hand-target _args[0] "arms">><<disablearms>><<set $leftarm to "grappled">><<set $rightarm to "grappled">><<set $lefttarget to _n>><<set $righttarget to _n>><<violence 2>><<bruise leftarm>><<bruise rightarm>><<set $speecharms to 1>>
			<<if $vaginause is "cover">>
				<<set $vaginause to 0>>
			<</if>>
			<<if $anususe is "cover">>
				<<set $anususe to 0>>
			<</if>>
			<<if $penisuse is "cover">>
				<<set $penisuse to 0>>
			<</if>>
			<<bodypart_admire_chance random_shoulder>>
		<<else>>
			<<if $walltype is "front">>
				<<He>> slaps your face.
				<<violence 10>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
				<<bodypart_admire_chance random_cheek>>
			<<else>>
				<<He>> slaps your <<bottom>>.
				<<violence 10>><<bruise bottom>><<hitstat>><<set $speechspank to 1>>
				<<bodypart_admire_chance random_bottom>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 175>>
		<<if $walltype is "front">>
			<<He>> digs <<his>> nails into your <<breasts>> while groping, giving no heed to your comfort.
			<<violence 10>><<bruise chest>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance back>>
		<<else>>
			<<He>> digs <<his>> nails into your <<bottom>> while groping, giving no heed to your comfort.
			<<violence 10>><<bruise bottom>><<hitstat>><<set $speechspank to 1>>
			<<bodypart_admire_chance back>>
		<</if>>
	<<elseif $enemyanger + $rng lte 180>>
		<<if $walltype is "front">>
			<<He>> smacks your <<breasts>>.
			<<violence 10>><<bruise chest>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance back>>
		<<else>>
			<<He>> smacks your thighs.
			<<violence 10>><<bruise thigh>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance random_thigh>>
		<</if>>
	<<elseif $enemyanger + $rng lte 185 and !(playerBellySize(true) gte 8)>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> beats your thigh.
			<<bruise thigh>><<hitstat>><<violence 10>><<set $speechbeat to 1>>
			<<bodypart_admire_chance random_thigh>>
		<<else>>
			<<He>> punches your tummy.
			<<violence 20>><<bruise tummy>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance back>>
		<</if>>
	<<elseif $enemyanger + $rng lte 190>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> spanks your <<bottom>>.
			<<violence 20>><<bruise bottom>><<hitstat>><<set $speechbeat to 1>>
			<<bodypart_admire_chance random_bottom>>
		<<else>>
			<<He>> slaps your <<breasts>>.
			<<violence 20>><<bruise chest>><<hitstat>><<set $speechbeat to 1>><<playWithBreasts>>
			<<bodypart_admire_chance breasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 195>>
		<<if $walltype is "front">>
			<<He>> spits on your face.
			<<neutral 5 _n>>
		<<else>>
			<<if $worn.feet.cursed is 1>>
				<<He>> tests the restraints binding your legs.
				<<neutral 5 _n>>
			<<elseif $worn.feet.name isnot "naked">>
				<span class="purple"><<He>> grasps your $worn.feet.name.</span>
				<<combat-set-hand-target _args[0] "shoes">>
				<<neutral 3 _n>>
			<<elseif $enemytype is "man" and $NPCList[_n].fullDescription isnot "Ivory Wraith" and !$abomination and !$possessed and !$robinmist and $role isnot "islander">>
				<span class="pink"><<He>> produces a pair of menacing metal shackles.</span>
				<<combat-set-hand-target _args[0] "shackle_entrance">>
				<<neutral 4 _n>>
			<<else>>
				<<He>> looks at your feet.
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng gte 196>>
		<<if _args[0] is "left">>
			<<if $position is "wall" and $walltype isnot "front">>
				<<if $player.penisExist>>
					<<He>> scratches your helpless <<bottom>>.
					<<violence 20>><<bruise bottom>><<hitstat>><<set $speechbeat to 1>>
				<<elseif $player.vaginaExist>>
					<<He>> scratches your helpless <<bottom>>.
					<<violence 20>><<bruise bottom>><<hitstat>><<set $speechbeat to 1>>
				<</if>>
				<<bodypart_admire_chance random_bottom>>
			<<else>>
				<<rng>>
				<<if $rng gte 81>>
					<<He>> punches your nose.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance forehead>>
				<<elseif $rng gte 61>>
					<<He>> punches the back of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance back>>
				<<elseif $rng gte 41>>
					<<He>> punches your cheek.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance random_cheek>>
				<<elseif $rng gte 21>>
					<<He>> punches your jaw.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance breasts>>
				<<else>>
					<<He>> jabs the front of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance random_shoulder>>
				<</if>>
			<</if>>
		<<else>>
			<<if $position is "wall" and $walltype isnot "front">>
				<<if $player.penisExist and (!$player.vaginaExist or random(0,100) gte 50)>>
					<<He>> jabs your gooch.
					<<violence 20>><<bruise penis>><<hitstat>><<set $speechbeat to 1>>
				<<elseif $player.vaginaExist>>
					<<He>> jabs your gooch.
					<<violence 20>><<bruise vagina>><<hitstat>><<set $speechbeat to 1>>
				<</if>>
				<<bodypart_admire_chance pubic>>
			<<else>>
				<<rng>>
				<<if $rng gte 81>>
					<<He>> scratches the side of your face.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance random_cheek>>
				<<elseif $rng gte 61>>
					<<He>> scratches the back of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance back>>
				<<elseif $rng gte 41>>
					<<He>> scratches your cheek.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance random_cheek>>
				<<elseif $rng gte 21>>
					<<He>> scratches your jaw.
					<<violence 20>><<bruise face>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance random_shoulder>>
				<<else>>
					<<He>> scratches the front of your neck.
					<<violence 20>><<bruise neck>><<hitstat>><<set $speechbeat to 1>>
					<<bodypart_admire_chance back>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
<</widget>>

<<widget "man-combat">>
	<<outfitChecks>>
	<<set _n to _args[0]>>
	<!-- Converted his1-6 to hisselect #. Person1-6 to personselect #. $intro1-6 as array $NPCList[_n].intro -->
	<!-- Converted man1-6speech to manspeech #. Randomised penissize reaction.-->

	<<if ["m", "f", "i", "n", "t"].includes($NPCList[_n].pronoun)>>
		<<set $pronoun to $NPCList[_n].pronoun>>
	<<elseif $options.debugdisable is "f">>
		<span class="red">ERROR: Unexpected $$NPCList[_n].pronoun: [$NPCList[_n].pronoun]</span>
	<</if>>
	<<personselect _n>>
	<<switch _n>>
		<<case 0>>
			<<manspeech _n>>
			<<if $NPCList[0].intro isnot -1>>
				<<set $NPCList[0].intro to 1>>
			<</if>>
		<<case 1 2 3 4 5>>
			<<manspeech _n>><<if $NPCList[_n].intro isnot -1>><<set $NPCList[_n].intro to 1>><</if>>
	<</switch>>

	<<if $NPCList[_n].state is "stalk">>
		<<man-stalk>>
	<<elseif $NPCList[_n].state is "pursuit">>
		<<man-pursuit>>
	<<else>>
		<!-- HAND SECTION -->

		<<hand_section>>

		<!-- PENIS START -->

		<<rng>>
		<<if $NPCList[_n].penis is "clothed" and $npcSub isnot 1>>
			<<if $enemyarousal gte 40>>
				<span class="blue"><<He>> <<npcUndressText $NPCList[_n] "lower" "self">>, <<npcRevealText $NPCList[_n] "lower">>.</span>
				<<npcGenitalReaction $NPCList[_n]>>
				<<set $NPCList[_n].penis to 0>>
				<<if $NPCList[_n].vagina isnot "none">>
					<<set $NPCList[_n].vagina to 0>>
				<</if>>
			<</if>>
			<<if $NPCList[_n].fullDescription is "Sydney">>
				<<sydneyExpose>>
			<</if>>
		<</if>>
		<<if $NPCList[_n].penis is "strap-on">>
			<<He>> buckles <span class="blue"><<his>> $NPCList[_n].strapon.description around <<his>> hips.</span>
			<<set $NPCList[_n].penis to 0>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "thighs">>
			<<set $speechthigh to 1>>
			<<if $player.vaginaExist>>
				<<if $rng gte 101>>
					<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
						<<if $NPCList[_n].chastity.penis.includes("chastity")>>
							<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
							<<set $NPCList[_n].condom.willUse to false>>
						<<else>>
							<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
							<<equipNPCCondom _n>>
						<</if>>
					<</if>>
					<span class="blue"><<He>> angles <<his>> $NPCList[_n].penisdesc towards your <<pussy>>.</span>
					<<if $NPCList[_n].type is "plant" and $NPCList[_n].penissize gte 4 and canImpregnateParasite("vagina")>>
						<span class="red">Something about it scares you.</span>
					<</if>>
					<<set $thighuse to 0>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $vaginastate to "entrance">><<set $vaginatarget to _n>><<set $speechvaginaentrance to 1>>
				<<else>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your thighs and <<pussy>>.
					<<sex 5 "genital" _n>>
				<</if>>
			<<else>>
				<<if $rng gte 101>>
					<<He>> moves <<his>> penis out from between your thighs.
					<<set $thighuse to 0>><<set $NPCList[_n].penis to 0>>
				<<else>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your thighs.
					<<sex 5 "genital" _n>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "cheeks">>
			<<set $speechcheeks to 1>>
			<<if $rng gte 101>>
				<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
					<<if $NPCList[_n].chastity.penis.includes("chastity")>>
						<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
						<<set $NPCList[_n].condom.willUse to false>>
					<<else>>
						<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
						<<equipNPCCondom _n>>
					<</if>>
				<</if>>
				<span class="blue"><<He>> angles <<his>> $NPCList[_n].penisdesc towards your anus.</span>
				<<if $NPCList[_n].type is "plant" and $NPCList[_n].penissize gte 4 and canImpregnateParasite("anus")>>
					<span class="red">Something about it scares you.</span>
				<</if>>
				<<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">><<set $anustarget to _n>><<set $bottomuse to 0>><<set $cheekactiondefault to "cheeks">><<set $speechanusentrance to 1>>
			<<else>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your cheeks.
				<<submission 3 _n>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "leftarm">>
			<<set $speechhandjobpenis to 1>>
			<<if $rng gte 1>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your fingers.
				<<submission 1 _n>>
			<<elseif $rng gte 101>>
				<<He>> moves <<his>> penis away from your hand.
				<<set $NPCList[_n].penis to 0>><<set $leftarm to 0>><<set $leftactiondefault to "leftgrab">>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "rightarm">>
			<<set $speechhandjobpenis to 1>>
			<<if $rng gte 1>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your fingers.
				<<submission 1 _n>>
			<<elseif $rng gte 101>>
				<<He>> moves <<his>> penis away from your hand.
				<<set $NPCList[_n].penis to 0>><<set $rightarm to 0>><<set $rightactiondefault to "rightgrab">>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "botharm">>
			<<set $speechhandjobpenis to 1>>
			<<if $rng gte 1>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your hands.
				<<submission 2 _n>>
			<<elseif $rng gte 101>>
				<<He>> moves <<his>> penis away from your hands.
				<<set $NPCList[_n].penis to 0>><<set $leftarm to 0>><<set $rightarm to 0>><<set $rightactiondefault to "rightgrab">><<set $leftactiondefault to "leftgrab">>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "feet">>
			<<set $speechfeet to 1>>
			<<if $rng gte 1>>
				<<if $enemyarousal gte (($enemyarousalmax / 10) * 8)>>
					<<if $npcSub>>You quicken your pace, rubbing <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your feet<</if>> with increasing force as <<he>> approaches <<his>> peak.
					<<submission 1 _n>>
				<<elseif $enemyarousal gte (($enemyarousalmax / 10) * 4)>>
					<<if $npcSub>>You rub and knead<<else>><<He>> pounds<</if>> <<his>> $NPCList[_n].penisdesc between your feet.
					<<submission 1 _n>>
				<<else>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your feet.
					<<submission 1 _n>>
				<</if>>
			<<elseif $rng gte 101>>
				<<He>> moves <<his>> penis away from your feet.
				<<set $NPCList[_n].penis to 0>><<set $feetuse to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "vagina">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> slides <<his>> $NPCList[_n].penisdesc out of your <<pussy>>.</span>
				<<sex 30 "genital" _n>><<set $NPCList[_n].penis to "vaginaimminent">><<bruise vagina>><<violence 1>><<set $vaginastate to "imminent">>
			<<elseif $rng gte 1>>
				<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
				<<if $enemyanger gte 100>><<set _pain *= 1.5>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<He>> violates your <<pussy>> with increasing intensity.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues to fuck your <<pussy>> with no regard for your comfort.
					<<else>>
						<<He>> fucks your <<pussy>> with rough thrusts, giving no regard to your comfort.
					<</if>>
				<<elseif $enemyanger gte 20>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if npcHasStrapon(_n)>>
						<<He>> ruthlessly pounds your <<pussy>> with <<his>> $NPCList[_n].penisdesc.
						<<else>>
						You feel <<his>> $NPCList[_n].penisdesc throb as <<he>> pounds away at your <<pussy>>.
						<</if>>
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues to violate your <<pussy>>.
					<<else>>
						<<He>> fucks your <<pussy>> with deep and deliberate thrusts.
					<</if>>
				<<else>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if $npcSub>>You feel <<him>> approaching <<his>> peak, and ride <<him>><<else>><<He>> fucks your <<pussy>><</if>> with increasing power.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<pussy>>.<</if>>
					<<else>>
						<<if $npcSub>>You fuck <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your <<pussy>><</if>> with steady thrusts.
					<</if>>
				<</if>>
				<<sex 30 "genital" _n>><<bruise vagina>><<violence 1>><<set $speechvaginapenetrated to 1>><<pain _pain>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "vaginaimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your pussy.</span>
				<<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginastate to "entrance">>
			<<elseif $rng gte 1>>
				<<if $novaginal is 0>>
					<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
					<<if $player.virginity.vaginal isnot true>>
						<<if $enemyanger gte 80>>
							<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
							<<set _pain *= 1.5>>
						<<elseif $enemyanger gte 20>>
							<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
						<<else>>
							<span class="pink"><<He>> glides <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
						<</if>>
						<<switch $NPCList[_n].penissize>>
						<<case 4>>
							<span class="red"> You whimper as your <<pussy>> stretches to accommodate <<his>> cock.</span>
						<<default>>
						<</switch>>
						<<sex 30 "genital" _n>><<takeTempleVirginity $NPCList[_n].fullDescription "vaginal">><<violence 1>><<set $speechvaginapenetrated to 1>>
						<<pain _pain>>
					<<elseif $player.virginity.vaginal is true>>
						<<if $sexStats.vagina.pregnancy.totalBirthEvents gt 0>>
							<span class="red">Despite your lack of a hymen, you feel something inside you change as your virginity and purity are taken.</span>
							<<violence 10>>
						<<else>>
							<<switch $NPCList[_n].penissize>>
							<<case 4>>
								<span class="red"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy, obliterating your hymen and <<virginitylosttext $NPCList[_n].fullDescription>> You scream out as your <<pussy>> struggles to accommodate <<his>> cock.</span>
								<<violence 200>>
							<<case 1>>
								<span class="red"><<His>> $NPCList[_n].penisdesc pushes into your virgin pussy, breaking your hymen and <<virginitylosttext $NPCList[_n].fullDescription>></span> <span class="green"> While technically no longer a virgin, you can barely feel it.</span>
								<<violence 25 4 4>>
							<<default>>
								<span class="pink"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy,</span><span class="red"> tearing your hymen and <<virginitylosttext $NPCList[_n].fullDescription>></span>
								<<violence 100>>
							<</switch>>
						<</if>>
						<<sex 100 "genital" _n>><<takeVirginity $NPCList[_n].fullDescription "vaginal">><<set $speechvaginavirgin to 1>>
						<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
					<</if>>
					<<vaginalstat>><<set $NPCList[_n].penis to "vagina">><<takeNPCVirginity _n "penile">><<bruise vagina>><<raped>><<vaginaraped>><<set $vaginastate to "penetrated">>
				<<else>>
					Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> but does not penetrate.
					<<sex 15 "genital" _n>><<set $speechvaginawithhold to 1>>
				<</if>>
				<<if setup.bodyliquid.combined("vagina") gte 1 or setup.bodyliquid.combined("vaginaoutside") gte 1>>
					Fluid oozes from your <<pussy>>, over <<his>> length.
				<</if>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "vaginaentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> penis away from your <<pussy>>.</span>
				<<set $NPCList[_n].penis to 0>><<set $vaginause to 0>><<set $vaginastate to 0>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.over_lower.name.
					<<sex 5 "genital" _n>><<set $worn.over_lower.integrity -= 10>><<set $speechvaginaentrance to 1>><<set $enemyanger += 15>>
				<<elseif $worn.lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.lower.name.
					<<sex 5 "genital" _n>><<set $worn.lower.integrity -= 10>><<set $speechvaginaentrance to 1>><<set $enemyanger += 15>>
				<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.vagina_exposed is 0>>
						<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.under_lower.name.
						<<sex 5 "genital" _n>><<set $worn.under_lower.integrity -= 10>><<set $speechvaginaentrance to 1>>
					<<elseif $worn.under_lower.vagina_exposed is 1>>
						<<if $rng gte 51>>
							<<if $NPCList[_n].chastity.penis.includes("chastity")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.penis against your <<pussy>><<if playerChastity("vagina")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
								<<sex 25 "genital" _n>><<set $speechNPCChastity to 1>>
							<<elseif playerChastity("vagina")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.genitals.name.
								<<sex 25 "genital" _n>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
							<<elseif !$npcSub>>
								<<if $vaginaWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(1, 2) is 2>>
									<<He>> pushes <<his>> $NPCList[_n].penisdesc against your <<pussy>>. <<vagina_lube_text>><span class="pink">the tip presses into you, a thrust away from penetrating.</span>
									<<sex 20 "genital" _n>><<set $NPCList[_n].penis to "vaginaimminent">><<set $vaginastate to "imminent">><<set $speechvaginaimminent to 1>>
								<<else>>
									<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>>, <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it against your <<clit>>.
									<<sex 5 "genital" _n>><<set $speechvaginaimminent to 1>>
									<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
										Precum leaks from the tip, <span class="blue">lubricating your pussy.</span>
										<<bodyliquid "vaginaoutside" "semen">>
									<</if>>
								<</if>>
							<</if>>
						<<elseif $rng gte 1>>
							<<if !playerChastity("vagina")>>
								<<if $npcSub>>
									You tease <<his>> <<print $NPCList[_n].penisdesc>> with your <<pussy>> without trying to penetrate.
								<<else>>
									<<He>> teases your <<pussy>> with <<his>> <<print $NPCList[_n].penisdesc>> without trying to penetrate.
								<</if>>
								<<sex 10 "genital" _n>><<set $speechvaginaentrance to 1>>
							<<else>>
								<<if $npcSub>>
									You tease <<his>> <<print $NPCList[_n].penisdesc>> with your <<pussy>> as best you can with your $worn.genitals.name in the way.
								<<else>>
									<<He>> teases your <<pussy>> with <<his>> <<print $NPCList[_n].penisdesc>> as best <<he>> can with your $worn.genitals.name in the way.
								<</if>>
								<<sex 5 "genital" _n>><<set $speechchastity to 1>>
							<</if>>
						<</if>>
					<</if>>
				<</if>>
				<<if setup.bodyliquid.combined("vagina") gte 1 or setup.bodyliquid.combined("vaginaoutside") gte 1>>
					Fluid oozes from your <<pussy>>, over <<his>> length.
				<</if>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "vaginadouble">>
		<!-- Notes for how double functions work are found in the NPC action select section -->
			<<set _dvp to 0>>
			<<set _npcA to $vaginatarget>>
			<<set _npcB to $vaginadoubletarget>>
			<<if $NPCList[_npcA] is $NPCList[_n]>> /* State 1 is out of sync, state 2 is in sync */
				<<set _dvp to ($NPCList[_npcB].penis isnot "vaginadouble" ? 1 : 2)>>
			<<elseif $NPCList[_npcB] is $NPCList[_n]>>
				<<set _dvp to ($NPCList[_npcA].penis isnot "vaginadouble" ? 1 : 2)>>
			<</if>>

			<<if $rng gte 101>>
				<span class="purple"><<He>> slides <<his>> $NPCList[_n].penisdesc out of your <<pussy>>.</span>
				<<sex 30 "genitals" _n>><<set $NPCList[_n].penis to "vaginaimminentdouble">><<bruise vagina>><<violence 1>><<set $vaginastate to "doubleimminent">>
			<<elseif $rng gte 1>>
				<<if _dvp is 2>>
					<<set $_alongsidearray to ["alongside","alongside","in time with","heedless of","pounding away against","thrusting against"]>>
					<<set $_alongsidetext to $_alongsidearray[random(0,5)]>>
					<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
					<<if $enemyanger gte 100>><<set _pain *= 1.5>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<He>> violates your <<pussy>> with increasing intensity, $_alongsidetext the other cock.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<He>> continues to fuck your <<pussy>> $_alongsidetext the other cock, with no regard for your comfort nor the other cock's.
						<<else>>
							<<He>> fucks your <<pussy>> with rough thrusts, $_alongsidetext the other cock, giving no regard to your comfort nor the other cock's.
						<</if>>
					<<elseif $enemyanger gte 20>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<if npcHasStrapon(_n)>>
								<<He>> ruthlessly pounds your <<pussy>> with <<his>> $NPCList[_n].penisdesc, $_alongsidetext the other cock.
							<<else>>
								You feel <<his>> $NPCList[_n].penisdesc throb as <<he>> pounds away at your <<pussy>>, $_alongsidetext the other cock.
							<</if>>
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<He>> continues to violate your <<pussy>>, $_alongsidetext the other cock.
						<<else>>
							<<He>> fucks your <<pussy>> $_alongsidetext the other cock, with deep and deliberate thrusts.
						<</if>>
					<<else>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<if $npcSub>>You feel <<him>> approaching <<his>> peak, and ride <<him>><<else>><<He>> fucks your <<pussy>><</if>> with increasing power, $_alongsidetext the other cock.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<pussy>>, $_alongsidetext the other cock.<</if>>
						<<else>>
							<<if $npcSub>>You fuck <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your <<pussy>><</if>> with steady thrusts, $_alongsidetext the other cock.
						<</if>>
					<</if>>
					<<sex 30 "genitals" _n>><<bruise vagina>><<violence 1>><<set $speechvaginapenetrated to 1>><<pain _pain>>
				<<else>> /* single penetration */
					<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
					<<if $enemyanger gte 100>><<set _pain *= 1.5>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<He>> violates your <<pussy>> with increasing intensity.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<He>> continues to fuck your <<pussy>> with no regard for your comfort.
						<<else>>
							<<He>> fucks your <<pussy>> with rough thrusts, giving no regard to your comfort.
						<</if>>
					<<elseif $enemyanger gte 20>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<if npcHasStrapon(_n)>>
								<<He>> ruthlessly pounds your <<pussy>> with <<his>> $NPCList[_n].penisdesc.
							<<else>>
								You feel <<his>> $NPCList[_n].penisdesc throb as <<he>> pounds away at your <<pussy>>.
							<</if>>
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<He>> continues to violate your <<pussy>>.
						<<else>>
							<<He>> fucks your <<pussy>> with deep and deliberate thrusts.
						<</if>>
					<<else>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<if $npcSub>>You feel <<him>> approaching <<his>> peak, and ride <<him>><<else>><<He>> fucks your <<pussy>><</if>> with increasing power.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<pussy>>.<</if>>
						<<else>>
							<<if $npcSub>>You fuck <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your <<pussy>><</if>> with steady thrusts.
						<</if>>
					<</if>>
					<<sex 30 "genitals" _n>><<bruise vagina>><<violence 1>><<set $speechvaginapenetrated to 1>><<pain _pain>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "vaginaimminentdouble">>
			<<set _dvp to 0>>
			<<set _npcA to (_n is $vaginatarget ? $vaginatarget : $vaginadoubletarget)>>
			<<set _npcB to (_n is $vaginatarget ? $vaginadoubletarget : $vaginatarget)>>
			<<if _npcA is _n>> /* State 1 is out of sync, state 2 is in sync */
				<<set _dvp to ($NPCList[_npcB].penis isnot "anusdouble" ? 1 : 2)>>
			<<elseif _npcB is _n>>
				<<set _dvp to ($NPCList[_npcA].penis isnot "anusdouble" ? 1 : 2)>>
			<</if>>
			<<set $_n to _n>> /* backup _n so that we can use personselect widget without errors */

			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your pussy.</span>
				<<set $NPCList[_n].penis to "vaginaentrancedouble">><<set $vaginastate to "doubleentrance">>
			<<elseif $rng gte 1>>
				<<if _dvp is 2>>
					<<if $novaginal is 0>>
						<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
						<<if $player.virginity.vaginal isnot true>>
							<<if $enemyanger gte 80>>
								<span class="pink"><<He>> furiously thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>, joining <<personselect _npcB>><<combatperson>>'s <<npcPenisSimple _npcB>>.</span><<set _n to $_n>>
								<<personselect _npcA>><<set _pain *= 1.5>>
							<<elseif $enemyanger gte 20>>
								<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>, joining <<personselect _npcB>><<combatperson>>'s <<npcPenisSimple _npcB>>.</span><<set _n to $_n>>
								<<personselect _npcA>>
							<<else>>
								<span class="pink"><<He>> glides <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>, joining <<personselect _npcB>><<combatperson>>'s <<npcPenisSimple _npcB>>.</span><<set _n to $_n>>
								<<personselect _npcA>>
							<</if>>
							<<switch $NPCList[_n].penissize>>
							<<case 3 4 5>>
								<span class="red"> You whimper as your <<pussy>> stretches to accommodate their <<penises>>.</span>
							<<default>>
							<</switch>>
							<<sex 30 "genitals" _n>><<takeTempleVirginity $NPCList[_n].fullDescription "vaginal">><<violence 1>><<set $speechvaginapenetrated to 1>>
							<<pain _pain>>
						<<elseif $player.virginity.vaginal is true>>
							<<if $sexStats.vagina.pregnancy.totalBirthEvents gt 0>>
								<span class="red">Despite your lack of a hymen, you feel something inside you change as your virginity and purity are taken.</span>
								<<violence 10>>
							<<else>>
								<<switch $NPCList[_n].penissize>>
								<<case 4 5>>
									<span class="red"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy, joining <<personselect _npcB>><<combatperson>>'s <<npcPenisSimple _npcB>><<personselect _npcA>>, obliterating your hymen and <<virginitylosttext $NPCList[_n].fullDescription>> You scream out as your <<pussy>> struggles to accommodate <<his>> cock.</span><<set _n to $_n>>
									<<violence 200>>
								<<case 1>>
									<span class="red"><<His>> $NPCList[_n].penisdesc pushes into your virgin pussy, joining <<personselect _npcB>><<combatperson>>'s <<npcPenisSimple _npcB>><<personselect _npcA>>, breaking your hymen and <<virginitylosttext $NPCList[_n].fullDescription>></span> <span class="green"> While technically no longer a virgin, you can barely feel it.</span><<set _n to $_n>>
									<<violence 25 4 4>>
								<<default>>
									<span class="pink"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy, joining <<personselect _npcB>><<combatperson>>'s <<npcPenisSimple _npcB>><<personselect _npcA>>,</span><span class="red"> tearing your hymen and <<virginitylosttext $NPCList[_n].fullDescription>></span><<set _n to $_n>>
									<<violence 100>>
								<</switch>>
							<</if>>
							<<sex 100 "genitals" _n>><<takeVirginity $NPCList[_n].fullDescription "vaginal">><<set $speechvaginavirgin to 1>>
							<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
						<</if>>
						<<vaginalstat>><<vaginaldoublestat>><<set $NPCList[_n].penis to "vaginadouble">><<takeNPCVirginity _n "penile">><<bruise vagina>><<raped>><<vaginaraped>><<set $vaginastate to "doublepenetrated">>
					<<else>>
						Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> but does not penetrate.
						<<sex 15 "genitals" _n>><<set $speechvaginawithhold to 1>>
					<</if>>
				<<else>>
					<<if $novaginal is 0>>
						<<set _pain to Math.floor($vaginalPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
						<<if $player.virginity.vaginal isnot true>>
							<<if $enemyanger gte 80>>
								<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
								<<set _pain *= 1.5>>
							<<elseif $enemyanger gte 20>>
								<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
							<<else>>
								<span class="pink"><<He>> glides <<his>> $NPCList[_n].penisdesc deep into your <<pussy>>.</span>
							<</if>>
							<<switch $NPCList[_n].penissize>>
							<<case 4>>
								<span class="red"> You whimper as your <<pussy>> stretches to accommodate <<his>> cock.</span>
							<<default>>
							<</switch>>
							<<sex 30 "genitals" _n>><<takeTempleVirginity $NPCList[_n].fullDescription "vaginal">><<violence 1>><<set $speechvaginapenetrated to 1>>
							<<pain _pain>>
						<<elseif $player.virginity.vaginal is true>>
							<<if $sexStats.vagina.pregnancy.totalBirthEvents gt 0>>
								<span class="red">Despite your lack of a hymen, you feel something inside you change as your virginity and purity are taken.</span>
								<<violence 10>>
							<<else>>
								<<switch $NPCList[_n].penissize>>
								<<case 4>>
									<span class="red"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy, obliterating your hymen and <<virginitylosttext $NPCList[_n].fullDescription>> You scream out as your <<pussy>> struggles to accommodate <<his>> cock.</span>
									<<violence 200>>
								<<case 1>>
									<span class="red"><<His>> $NPCList[_n].penisdesc pushes into your virgin pussy, breaking your hymen and <<virginitylosttext $NPCList[_n].fullDescription>></span> <span class="green"> While technically no longer a virgin, you can barely feel it.</span>
									<<violence 25 4 4>>
								<<default>>
									<span class="pink"><<His>> $NPCList[_n].penisdesc thrusts deep into your virgin pussy,</span><span class="red"> tearing your hymen and <<virginitylosttext $NPCList[_n].fullDescription>></span>
									<<violence 100>>
								<</switch>>
							<</if>>
							<<sex 100 "genitals" _n>><<takeVirginity $NPCList[_n].fullDescription "vaginal">><<set $speechvaginavirgin to 1>>
							<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
						<</if>>
						<<vaginalstat>><<set $NPCList[_n].penis to "vaginadouble">><<takeNPCVirginity _n "penile">><<bruise vagina>><<raped>><<vaginaraped>><<set $vaginastate to "doublepenetrated">>
					<<else>>
						Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> but does not penetrate.
						<<sex 15 "genitals" _n>><<set $speechvaginawithhold to 1>>
					<</if>>
				<</if>>
				<<if setup.bodyliquid.combined("vagina") gte 1 or setup.bodyliquid.combined("vaginaoutside") gte 1>>
					Fluid oozes from your <<pussy>>, over their lengths.
				<</if>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "vaginaentrancedouble">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> penis away from your <<pussy>>, and the other cock.</span>
				<<set $NPCList[_n].penis to 0>><<set $vaginause to 0>><<set $vaginastate to 0>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.over_lower.name.
					<<sex 5 "genitals" _n>><<set $worn.over_lower.integrity -= 10>><<set $speechvaginaentrance to 1>><<set $enemyanger += 15>>
				<<elseif $worn.lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.lower.name.
					<<sex 5 "genitals" _n>><<set $worn.lower.integrity -= 10>><<set $speechvaginaentrance to 1>><<set $enemyanger += 15>>
				<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.vagina_exposed is 0>>
						<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.under_lower.name.
						<<sex 5 "genitals" _n>><<set $worn.under_lower.integrity -= 10>><<set $speechvaginaentrance to 1>>
					<<elseif $worn.under_lower.vagina_exposed is 1>>
						<<if $rng gte 51>>
							<<if $NPCList[_n].chastity.penis.includes("chastity")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.penis against your <<pussy>><<if playerChastity("vagina")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
								<<sex 25 "genitals" _n>><<set $speechNPCChastity to 1>>
							<<elseif playerChastity("vagina")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.genitals.name.
								<<sex 25 "genitals" _n>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
							<<elseif !$npcSub>>
								<<if $vaginaWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(1, 3) is 2>>
									<<He>> pushes <<his>> $NPCList[_n].penisdesc against your <<pussy>>. <<vagina_lube_text>><span class="pink">the tip presses into you, a thrust away from penetrating.</span>
									<<sex 20 "genitals" _n>><<set $NPCList[_n].penis to "vaginaimminentdouble">><<set $speechvaginaimminent to 1>>
									<<if $vaginastate isnot "doublepenetrated">><<set $vaginastate to "doubleimminent">><</if>>
								<<else>>
									<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<pussy>>; <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it against your <<clit>> and the other cock.
									<<sex 5 "genitals" _n>><<set $speechvaginaimminent to 1>>
									<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
										Precum leaks from the tip, <span class="blue">lubricating your pussy.</span>
										<<bodyliquid "vaginaoutside" "semen">>
									<</if>>
								<</if>>
							<</if>>
						<<elseif $rng gte 1>>
							<<if !playerChastity("vagina")>>
								<<if $npcSub>>
									You tease <<his>> <<print $NPCList[_n].penisdesc>> with your <<pussy>> without trying to penetrate.
								<<else>>
									<<He>> teases your <<pussy>> with <<his>> <<print $NPCList[_n].penisdesc>> without trying to penetrate.
								<</if>>

								<<sex 10 "genitals" _n>><<set $speechvaginaentrance to 1>>
							<<else>>
								<<if $npcSub>>
									You tease <<his>> <<print $NPCList[_n].penisdesc>> with your <<pussy>> as best you can with your $worn.genitals.name in the way.
								<<else>>
									<<He>> teases your <<pussy>> with <<his>> <<print $NPCList[_n].penisdesc>> as best <<he>> can with your $worn.genitals.name in the way.
								<</if>>
								<<sex 5 "genitals" _n>><<set $speechchastity to 1>>
							<</if>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
			<<if setup.bodyliquid.combined("vagina") gte 1 or setup.bodyliquid.combined("vaginaoutside") gte 1>>
				Fluid oozes from your <<pussy>>, over <<his>> length.
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "anus">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> withdraws <<his>> penis from your anus.</span>
				<<sex 30 "anal" _n>><<set $NPCList[_n].penis to "anusimminent">><<bruise anus>><<violence 1>><<set $anusstate to "imminent">>
			<<elseif $rng gte 1 and playerHasButtPlug()>>
				<<set _pain to Math.floor($analPain * (1.5 / (6 - ($NPCList[_n].penissize+1 or 1))))>>
				<<if $enemyanger gte 100>><<set _pain *= 1.5>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<He>> ravages your <<bottom>> with a violent intensity<<alongsideButtPlug>>.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						You feel <<his>> $NPCList[_n].penisdesc ever deeper within you as <<he>> fucks your <<bottom>><<alongsideButtPlug>>.
					<<else>>
						<<He>> fucks your <<bottom>> with rough thrusts<<alongsideButtPlug>>, intent on showing you who's boss.
					<</if>>
				<<elseif $enemyanger gte 20>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if npcHasStrapon(_n)>>
						You feel <<his>> pace quicken as <<he>> fucks your <<bottom>> with <<his>> <<print $NPCList[_n].penisdesc>><<alongsideButtPlug>>.
						<<else>>
						You feel <<his>> $NPCList[_n].penisdesc throb within you as <<he>> fucks your <<bottom>><<alongsideButtPlug>>.
						<</if>>
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues to violate your <<bottom>><<alongsideButtPlug>>, giving no regard to your comfort.
					<<else>>
						<<He>> fucks your <<bottom>> with deep and dominating thrusts<<alongsideButtPlug>>.
					<</if>>
				<<else>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if $npcSub>>You feel <<him>> approaching <<his>> peak, and ride <<him>><<else>><<He>> fucks your <<bottom>><</if>> with increasing power<<alongsideButtPlug>>.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<bottom>><<alongsideButtPlug>>.<</if>>
					<<else>>
						<<if $npcSub>>You fuck <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your <<bottom>><</if>> with steady thrusts<<alongsideButtPlug>>.
					<</if>>
				<</if>>
				<<sex 30 "anal" _n>><<bruise anus>><<violence 1>><<set $speechanuspenetrated to 1>><<pain _pain>>
			<<elseif $rng gte 1>>
				<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
				<<if $enemyanger gte 100>><<set _pain *= 1.5>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<He>> ravages your <<bottom>> with a violent intensity.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						You feel <<his>> $NPCList[_n].penisdesc ever deeper within you as <<he>> fucks your <<bottom>>.
					<<else>>
						<<He>> fucks your <<bottom>> with rough thrusts, intent on showing you who's boss.
					<</if>>
				<<elseif $enemyanger gte 20>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if npcHasStrapon(_n)>>
						You feel <<his>> pace quicken as <<he>> fucks your <<bottom>> with <<his>> $NPCList[_n].penisdesc.
						<<else>>
						You feel <<his>> $NPCList[_n].penisdesc throb within you as <<he>> fucks your <<bottom>>.
						<</if>>
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues to violate your <<bottom>>, giving no regard to your comfort.
					<<else>>
						<<He>> fucks your <<bottom>> with deep and dominating thrusts.
					<</if>>
				<<else>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if $npcSub>>You feel <<him>> approaching <<his>> peak, and ride <<him>><<else>><<He>> fucks your <<bottom>><</if>> with increasing power.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<bottom>>.<</if>>
					<<else>>
						<<if $npcSub>>You fuck <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your <<bottom>><</if>> with steady thrusts.
					<</if>>
				<</if>>
				<<sex 30 "anal" _n>><<bruise anus>><<violence 1>><<set $speechanuspenetrated to 1>><<pain _pain>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "anusimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your anus.</span>
				<<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">>
			<<elseif $rng gte 1 and playerHasButtPlug()>>
				<<set $_buttplug to $worn.butt_plug.name>>
				<<set $_alongside to either("alongside","heedless of","pushing aside")>>
				<<if $noanal is 0>>
					<<set _pain to Math.floor($analPain * (1.5 / (6 - ($NPCList[_n].penissize+1 or 1))))>>
					<<if $player.virginity.anal isnot true>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<bottom>><<alongsideButtPlug>>.</span>
						<<switch $NPCList[_n].penissize>>
						<<case 3 4>>
							<span class="red"> You <<if $speech_attitude is "meek">>moan<<else>>whimper<</if>> as your ass stretches to accommodate both <<his>> cock and your $_buttplug.</span>
						<<case 1>>
							<span class="green">You can barely feel it.</span>
						<<default>>
						<</switch>>
						<<sex 30 "anal" _n>><<violence 1>><<set $speechanuspenetrated to 1>>
						<<if $enemyanger gte 100>><<set _pain *= 1.75>><</if>><<pain _pain>>
					<<elseif $player.virginity.anal is true>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your virgin anus<<alongsideButtPlug>>,</span> <span class="red">violating you in a way you hadn't conceived of.</span>
						<<switch $NPCList[_n].penissize>>
						<<case 3 4>>
							<span class="red"> You <<if $speech_attitude is "meek">>squeal<<else>>scream<</if>> as your ass struggles to accommodate both <<his>> cock and your $_buttplug.</span>
						<<case 1>>
							<span class="green"> While your ass is technically no longer virgin, you can barely feel it.</span>
						<<default>>
						<</switch>>
						<<sex 100 "anal" _n>><<violence 50>><<set $speechanusvirgin to 1>>
						<<if $enemyanger gte 100>><<set _pain *= 1.75>><</if>><<pain _pain>>
						<<takeVirginity $NPCList[_n].fullDescription "anal">>
					<</if>>
					<<analstat>><<set $NPCList[_n].penis to "anus">><<takeNPCVirginity _n "penile">><<set $anusstate to "penetrated">><<bruise anus>><<raped>><<anusraped>>
				<<else>>
					Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your anus and $_buttplug but does not penetrate.
					<<sex 15 "anal" _n>><<set $speechanuswithhold to 1>>
				<</if>>
			<<elseif $rng gte 1>>
				<<if $noanal is 0>>
					<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
					<<if $player.virginity.anal isnot true>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<bottom>>.</span>
						<<switch $NPCList[_n].penissize>>
						<<case 4>>
							<span class="red"> You whimper as your ass stretches to accommodate <<his>> cock.</span>
						<<default>>
						<</switch>>
						<<sex 30 "anal" _n>><<violence 1>><<set $speechanuspenetrated to 1>>
						<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
					<<elseif $player.virginity.anal is true>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your virgin anus,</span> <span class="red">violating you in a way you hadn't conceived of.</span>
						<<switch $NPCList[_n].penissize>>
						<<case 4>>
							<span class="red"> You scream as your ass struggles to accommodate <<his>> cock.</span>
						<<case 1>>
							<span class="green"> While your ass is technically no longer virgin, you can barely feel it.</span>
						<<default>>
						<</switch>>
						<<sex 100 "anal" _n>><<takeVirginity $NPCList[_n].fullDescription "anal">><<violence 50>><<set $speechanusvirgin to 1>>
						<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
					<</if>>
					<<analstat>><<set $NPCList[_n].penis to "anus">><<takeNPCVirginity _n "penile">><<bruise anus>><<raped>><<anusraped>><<set $anusstate to "penetrated">>
				<<else>>
					Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your anus but does not penetrate.
					<<sex 15 "anal" _n>><<set $speechanuswithhold to 1>>
				<</if>>
			<</if>>
			<<if setup.bodyliquid.combined("bottom") gte 1 or setup.bodyliquid.combined("anus") gte 1>>
				Fluid oozes from your <<bottom>>, over <<his>> length.
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "anusentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> penis away from your <<bottom>>.</span>
				<<set $NPCList[_n].penis to 0>><<set $anususe to 0>><<set $anusstate to 0>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.anus_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.over_lower.name.
					<<sex 5 "anal" _n>><<set $worn.over_lower.integrity -= 10>><<set $speechanusentrance to 1>>
				<<elseif $worn.lower.anus_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.lower.name.
					<<sex 5 "anal" _n>><<set $worn.lower.integrity -= 10>><<set $speechanusentrance to 1>>
				<<elseif $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.anus_exposed is 0>>
						<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.under_lower.name.
						<<set $speechanusentrance to 1>><<sex 5 "anal" _n>><<set $worn.under_lower.integrity -= 10>>
					<<elseif $worn.under_lower.anus_exposed is 1>>
						<<if $rng gte 51>>
							<<if $NPCList[_n].chastity.penis.includes("chastity")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.penis against your anus<<if playerChastity("anus")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
								<<sex 25 "anal" _n>><<set $speechNPCChastity to 1>>
							<<elseif playerChastity("anus")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your anus through your $worn.genitals.name.
								<<sex 25 "anal" _n>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
							<<elseif playerHasButtPlug()>>
								<<switch random(0,2)>>
									<<case 0>>
										<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your anus and your $worn.butt_plug.name.
										<<sex 10 "anal" _n>><<set $speechanusentrance to 1>>
										<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
											Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
											<<bodyliquid "bottom" "semen">>
										<</if>>
									<<case 1>>
										<<if $NPCList[_n].lefthand is 0 or $NPCList[_n].righthand is 0>>
											<<He>> removes your $worn.butt_plug.name.
											<<set $worn.butt_plug.state to "removed">>
										<<else>>
											<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your anus and your $worn.butt_plug.name.
											<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
												Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
												<<bodyliquid "bottom" "semen">>
											<</if>>
										<</if>>
										<<sex 10 "anal" _n>><<set $speechanusentrance to 1>>
									<<case 2>>
										<<if $anusWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(0, 2) is 2>>
											<<anus_lube_text>><<if $npcSub>>you press<<else>><<he>> presses<</if>> <<his>> $NPCList[_n].penisdesc against your anus and your $worn.butt_plug.name, <span class="pink">a thrust away from penetrating.</span>
											<<sex 10 "anal" _n>><<set $NPCList[_n].penis to "anusimminent">><<set $anusstate to "imminent">><<set $speechanusimminent to 1>>
										<<else>>
											<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> and your $worn.butt_plug.name, <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it between your cheeks.
											<<sex 5 "anal" _n>><<set $speechanusimminent to 1>>
											<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
												Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
												<<bodyliquid "bottom" "semen">>
											<</if>>
										<</if>>
								<</switch>>
							<<elseif !$npcSub>>
								<<if $anusWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(1, 2) is 2>>
									<<He>> presses <<his>> $NPCList[_n].penisdesc against your <<bottom>>. <<anus_lube_text>><span class="pink">the tip presses into you, a thrust away from penetrating.</span>
									<<sex 20 "anal" _n>><<set $NPCList[_n].penis to "anusimminent">><<set $anusstate to "imminent">><<set $speechanusimminent to 1>>
								<<else>>
									<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>>, <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it between your cheeks.
									<<sex 5 "anal" _n>><<set $speechanusimminent to 1>>
									<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
										Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
										<<bodyliquid "bottom" "semen">>
									<</if>>
								<</if>>
							<</if>>
						<<elseif $rng gte 1>>
							<<if playerHasButtPlug()>>
								<<His>> $NPCList[_n].penisdesc rubs against your <<bottom>> and $worn.butt_plug.name.
							<<else>>
								<<His>> $NPCList[_n].penisdesc rubs against your <<bottom>>.
							<</if>>
							<<sex 5 "anal" _n>><<set $speechanusentrance to 1>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
			<<if setup.bodyliquid.combined("bottom") gte 1 or setup.bodyliquid.combined("anus") gte 1>>
				Fluid oozes from your <<bottom>>, over <<his>> length.
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "anusdouble">>
			<!-- Notes for how double functions work are found in the NPC action select section -->
			<<set _dap to 0>>
			<<if $NPCList[$anustarget] is $NPCList[_n]>> /* State 1 is out of sync, state 2 is in sync */
				<<set _dap to ($NPCList[$anusdoubletarget].penis isnot "anusdouble" ? 1 : 2)>>
			<<elseif $NPCList[$anusdoubletarget] is $NPCList[_n]>>
				<<set _dap to ($NPCList[$anustarget].penis isnot "anusdouble" ? 1 : 2)>>
			<</if>>

			<<if $rng gte 101>>
				<span class="purple"><<He>> withdraws <<his>> penis from your anus.</span>
				<<sex 30 "anal" _n>><<set $NPCList[_n].penis to "anusimminentdouble">><<bruise anus>><<violence 1>><<set $anusstate to "doubleimminent">>
			<<elseif $rng gte 1>>
				<<if _dap is 2>> /* double */
					<<set $_alongsidearray to ["alongside","alongside","in time with","heedless of","pounding against","thrusting against"]>>
					<<set $_alongsidetext to $_alongsidearray[random(0,5)]>>
					<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
					<<if $enemyanger gte 100>><<set _pain *= 1.5>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<He>> ravages your <<bottom>> with a violent intensity, $_alongsidetext the other cock.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							You feel <<his>> $NPCList[_n].penisdesc ever deeper within you as <<he>> fucks your <<bottom>><<alongsideButtPlug>>, $_alongsidetext the other cock.
						<<else>>
							<<He>> fucks your <<bottom>><<alongsideButtPlug>>, and the other cock, with rough thrusts, intent on showing you who's boss.
						<</if>>
					<<elseif $enemyanger gte 20>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							You feel <<his>> $NPCList[_n].penisdesc <<if npcHasStrapon(_n)>>hit the right spots<<else>>throb within you<</if>> as <<he>> fucks your <<bottom>>, $_alongsidetext the other cock.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<He>> continues to violate your <<bottom>>, giving no regard to your comfort nor the other cock.
						<<else>>
							<<He>> fucks your <<bottom>> with deep and dominating thrusts, $_alongsidetext the other cock.
						<</if>>
					<<else>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<if $npcSub>>You feel <<him>> approaching <<his>> peak while riding both cocks<<else>><<He>> fucks your
							<<if playerHasButtPlug()>>
								<<bottom>>, your $worn.butt_plug.name,
							<<else>>
								<<bottom>>
							<</if>>
							and the other phallus<</if>> with increasing power.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc, and the other cock.<<else>><<He>> continues thrusting into your <<bottom>><<alongsideButtPlug>>, $_alongsidetext the other cock.<</if>>
						<<else>>
							<<if $npcSub>>You fuck <<his>> $NPCList[_n].penisdesc, and the other cock,<<else>><<He>> fucks your <<bottom>><<alongsideButtPlug>>, $_alongsidetext the other cock,<</if>> with steady thrusts.
						<</if>>
					<</if>>
					<<sex 30 "anal" _n>><<bruise anus>><<violence 1>><<set $speechanuspenetrated to 1>><<pain _pain>>

				<<else>> /* Not double */
					<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
					<<if $enemyanger gte 100>><<set _pain *= 1.5>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<He>> ravages your <<bottom>> with a violent intensity<<alongsideButtPlug>>.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							You feel <<his>> $NPCList[_n].penisdesc ever deeper within you as <<he>> fucks your <<bottom>><<alongsideButtPlug>>.
						<<else>>
							<<He>> fucks your <<bottom>> with rough thrusts<<alongsideButtPlug>>, intent on showing you who's boss.
						<</if>>
					<<elseif $enemyanger gte 20>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<if npcHasStrapon(_n)>>
							You feel <<his>> pace quicken as <<he>> fucks your <<bottom>> with <<his>> <<print $NPCList[_n].penisdesc>><<alongsideButtPlug>>.
							<<else>>
							You feel <<his>> $NPCList[_n].penisdesc throb within you as <<he>> fucks your <<bottom>><<alongsideButtPlug>>.
							<</if>>
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<He>> continues to violate your <<bottom>><<alongsideButtPlug>>, giving no regard to your comfort.
						<<else>>
							<<He>> fucks your <<bottom>> with deep and dominating thrusts<<alongsideButtPlug>>.
						<</if>>
					<<else>>
						<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
							<<if $npcSub>>You feel <<him>> approaching <<his>> peak while riding <<his>> cock<<else>><<He>> fucks your <<bottom>><</if>> with increasing power.
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
							<<if $npcSub>>You continue to ride <<his>> $NPCList[_n].penisdesc.<<else>><<He>> continues thrusting into your <<bottom>>.<</if>>
						<<else>>
							<<if $npcSub>>You fuck <<his>> $NPCList[_n].penisdesc<<else>><<He>> fucks your <<bottom>><</if>> with steady thrusts.
						<</if>>
					<</if>>
					<<sex 30 "anal" _n>><<bruise anus>><<violence 1>><<set $speechanuspenetrated to 1>><<pain _pain>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "anusimminentdouble">>

			<<set _dap to 0>>
			<<set _otherNPCindex to "f">>
			<<if $NPCList[$anustarget] is $NPCList[_n]>> /* State 1 is out of sync, state 2 is in sync */
				<<set _dap to ($NPCList[$anusdoubletarget].penis isnot "anusdouble" ? 1 : 2)>>
				<<set _otherNPCindex to $anusdoubletarget>>
			<<elseif $NPCList[$anusdoubletarget] is $NPCList[_n]>>
				<<set _dap to ($NPCList[$anustarget].penis isnot "anusdouble" ? 1 : 2)>>
				<<set _otherNPCindex to $anustarget>>
			<</if>>
			<<set $_n to _n>> /* backup _n so that we can use personselect widget without errors */

			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your anus.</span>
				<<set $NPCList[_n].penis to "anusentrancedouble">><<set $anusstate to "doubleentrance">>
			<<elseif $rng gte 1>>
				<<if _dap is 2>>
					<<if $noanal is 0>>
						<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
						<<if $player.virginity.anal isnot true>>
							<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<bottom>><<alongsideButtPlug>>, joining <<personselect _otherNPCindex>><<combatpersons _otherNPCindex>> <<npcPenisSimple _otherNPCindex>>.</span><<set _n to $_n>><<personselect _n>>
							<<switch $NPCList[_n].penissize>>
								<<case 4>>
									<span class="red"> You whimper as your ass stretches to accommodate <<his>> cock.</span>
								<<default>>
							<</switch>>
							<<sex 30 "anal" _n>><<violence 1>><<set $speechanuspenetrated to 1>>
							<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
						<<elseif $player.virginity.anal is true>>
							<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your virgin anus<<alongsideButtPlug>>,</span> <span class="red">violating you in a way you hadn't conceived of.</span>
							<<if $NPCList[$anustarget].penis is "anusdouble" and $NPCList[$anusdoubletarget].penis is "anusdouble">>
								<<switch $NPCList[_n].penissize>>
									<<default>>
										<span class="red"> You scream as your ass struggles to accommodate both cocks.</span>
								<</switch>>
							<<else>>
								<<switch $NPCList[_n].penissize>>
									<<case 4 5>>
										<span class="red"> You scream as your ass struggles to accommodate both cocks<<if playerHasButtPlug()>> and your $worn.butt_plug.name<</if>>.</span>
									<<case 1>>
										<span class="green"> While your ass is technically no longer virgin, you can barely feel it.</span>
									<<default>>
								<</switch>>
							<</if>>
							<<sex 100 "anal" _n>><<takeVirginity $NPCList[_n].fullDescription "anal">><<violence 50>><<set $speechanusvirgin to 1>>
							<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
						<</if>>
						<<analstat>><<analdoublestat>><<set $NPCList[_n].penis to "anusdouble">><<takeNPCVirginity _n "penile">><<bruise anus>><<raped>><<anusraped>><<set $anusstate to "doublepenetrated">>
					<<else>>
						Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your anus, and the other cock, but does not penetrate.
						<<sex 15 "anal" _n>><<set $speechanuswithhold to 1>>
					<</if>>
				<<else>>
					<<if $noanal is 0>>
						<<set _pain to Math.floor($analPain * (1.5 / (5 - ($NPCList[_n].penissize or 1))))>>
						<<if $player.virginity.anal isnot true>>
							<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your <<bottom>><<alongsideButtPlug>>.</span>
							<<switch $NPCList[_n].penissize>>
							<<case 4>>
								<span class="red"> You whimper as your ass stretches to accommodate <<his>> cock.</span>
							<<default>>
							<</switch>>
							<<sex 30 "anal" _n>><<violence 1>><<set $speechanuspenetrated to 1>>
							<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
						<<elseif $player.virginity.anal is true>>
							<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc deep into your virgin anus<<alongsideButtPlug>>,</span> <span class="red">violating you in a way you hadn't conceived of.</span>
							<<if $NPCList[$anustarget].penis is "anusdouble" and $NPCList[$anusdoubletarget].penis is "anusdouble">>
								<<switch $NPCList[_n].penissize>>
								<<default>>
									<span class="red"> You scream as your ass struggles to accommodate <<his>> cock.</span>
								<</switch>>
							<<else>>
								<<switch $NPCList[_n].penissize>>
									<<case 4>>
										<span class="red"> You scream as your ass struggles to accommodate <<his>> cock.</span>
									<<case 1>>
										<span class="green"> While your ass is technically no longer virgin, you can barely feel it.</span>
									<<default>>
								<</switch>>
							<</if>>
							<<sex 100 "anal" _n>><<violence 50>><<set $speechanusvirgin to 1>>
							<<if $enemyanger gte 100>><<set _pain *= 1.5>><</if>><<pain _pain>>
							<<takeVirginity $NPCList[_n].fullDescription "anal">>
						<</if>>
						<<analstat>><<set $NPCList[_n].penis to "anusdouble">><<takeNPCVirginity _n "penile">><<bruise anus>><<raped>><<anusraped>><<set $anusstate to "doublepenetrated">>
					<<else>>
						Respecting your wishes, <<he>> presses <<his>> $NPCList[_n].penisdesc against your anus, but does not penetrate.
						<<sex 15 "anal" _n>><<set $speechanuswithhold to 1>>
					<</if>>
				<</if>>
				<<if setup.bodyliquid.combined("bottom") gte 1 or setup.bodyliquid.combined("anus") gte 1>>
					Fluid oozes from your <<bottom>>, over <<his>> length.
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "anusentrancedouble">>
			<<set _dap to 0>>
			<<if $NPCList[$anustarget] is $NPCList[_n]>> /* State 1 is out of sync, state 2 is in sync */
				<<set _dap to ($NPCList[$anusdoubletarget].penis isnot "anusdouble" ? 1 : 2)>>
			<<elseif $NPCList[$anusdoubletarget] is $NPCList[_n]>>
				<<set _dap to ($NPCList[$anustarget].penis isnot "anusdouble" ? 1 : 2)>>
			<</if>>

			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> penis away from your <<bottom>> and the other cock.</span>
				<<set $NPCList[_n].penis to 0>><<set $anususe to 0>><<set $anusstate to 0>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.anus_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.over_lower.name.
					<<sex 5 "anal" _n>><<set $worn.over_lower.integrity -= 10>><<set $speechanusentrance to 1>>
				<<elseif $worn.lower.anus_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.lower.name.
					<<sex 5 "anal" _n>><<set $worn.lower.integrity -= 10>><<set $speechanusentrance to 1>>
				<<elseif $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.anus_exposed is 0>>
						<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> through your $worn.under_lower.name.
						<<set $speechanusentrance to 1>><<sex 5 "anal" _n>><<set $worn.under_lower.integrity -= 10>>
					<<elseif $worn.under_lower.anus_exposed is 1>>
						<<if $rng gte 51>>
							<<if $NPCList[_n].chastity.penis.includes("chastity")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.penis against your anus<<if playerChastity("anus")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
								<<sex 25 "anal" _n>><<set $speechNPCChastity to 1>>
							<<elseif playerChastity("anus")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your anus through your $worn.genitals.name.
								<<sex 25 "anal" _n>><<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
							<<elseif playerHasButtPlug()>>
								<<switch random(0,2)>>
									<<case 0>>
										<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your anus and your $worn.butt_plug.name.
										<<sex 10 "anal" _n>><<set $speechanusentrance to 1>>
										<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
											Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
											<<bodyliquid "bottom" "semen">>
										<</if>>
									<<case 1>>
										<<if $NPCList[_n].lefthand is 0 or $NPCList[_n].righthand is 0>>
											<<He>> removes your $worn.butt_plug.name.
											<<set $worn.butt_plug.state to "removed">>
										<<else>>
											<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your anus and your $worn.butt_plug.name.
											<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
												Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
												<<bodyliquid "bottom" "semen">>
											<</if>>
										<</if>>
										<<sex 10 "anal" _n>><<set $speechanusentrance to 1>>
									<<case 2>>
										<<if $anusWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(0, 2) is 2>>
											<<anus_lube_text>><<if $npcSub>>you press<<else>><<he>> presses<</if>> <<his>> $NPCList[_n].penisdesc against your anus and your $worn.butt_plug.name, <span class="pink">a thrust away from penetrating.</span>
											<<sex 10 "anal" _n>><<set $NPCList[_n].penis to "anusimminentdouble">>
											<<if $anusstate isnot "doublepenetrated">><<set $anusstate to "doubleimminent">><</if>><<set $speechanusimminent to 1>>
										<<else>>
											<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>> and your $worn.butt_plug.name, <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it between your cheeks.
											<<sex 5 "anal" _n>><<set $speechanusimminent to 1>>
											<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
												Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
												<<bodyliquid "bottom" "semen">>
											<</if>>
										<</if>>
								<</switch>>
							<<elseif !$npcSub>>
								<<if $anusWetness gte ($NPCList[_n].penissize * 15) + random(1, 40) or random(1, 2) is 2>>
									<<He>> presses <<his>> $NPCList[_n].penisdesc against your <<bottom>>. <<anus_lube_text>><span class="pink">the tip presses into you, a thrust away from penetrating.</span>
									<<sex 20 "anal" _n>><<set $NPCList[_n].penis to "anusimminentdouble">>
									<<if $anusstate isnot "doublepenetrated">><<set $anusstate to "doubleimminent">><</if>><<set $speechanusimminent to 1>>
								<<else>>
									<<if $npcSub>>You push<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].penisdesc against your <<bottom>>, <span class="blue">but fail<<if !$npcSub>>s<</if>> to penetrate,</span> instead angling away and rubbing it between your cheeks.
									<<sex 5 "anal" _n>><<set $speechanusimminent to 1>>
									<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3 and !npcHasStrapon(_n) and !wearingCondom(_n)>>
										Precum leaks from the tip, <span class="blue">lubricating your ass.</span>
										<<bodyliquid "bottom" "goo">>
									<</if>>
								<</if>>
							<</if>>
						<<elseif $rng gte 1>>
							<<if playerHasButtPlug()>>
								<<His>> $NPCList[_n].penisdesc rubs against your <<bottom>> and $worn.butt_plug.name.
							<<else>>
								<<His>> $NPCList[_n].penisdesc rubs against your <<bottom>>.
							<</if>>
							<<sex 5 "anal" _n>><<set $speechanusentrance to 1>>
						<</if>>
					<</if>>
				<</if>>
				<<if setup.bodyliquid.combined("bottom") gte 1 or setup.bodyliquid.combined("anus") gte 1>>
					Fluid oozes from your <<bottom>>, over <<his>> length.
				<</if>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "mouth">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> withdraws <<his>> penis from your mouth.</span>
				<<sex 30 "mouth" _n>><<set $NPCList[_n].penis to "mouthimminent">><<bruise face>><<violence 1>><<set $mouthstate to "imminent">>
			<<elseif $enemyanger gte random(1, 100) and $NPCList[_n].penissize gte 2>>
				<<if currentSkillValue("oralskill") gte random(1, 1200 + 100 * (2 - $NPCList[_n].penissize))>>
					<<He>> shoves <<his>> $NPCList[_n].penisdesc down your throat, <span class="blue">but you manage to gasp between <<his>> thrusts.</span>
					<<if $neckuse isnot "hand">>
						<<suffocatepass -1>>
					<</if>>
				<<else>>
					<span class="pink">You gag as <<he>> thrusts <<his>> $NPCList[_n].penisdesc down your throat.</span>
						<<oxygen -150>>
					/* 北极星模组 */
					<<if $slime gt 0 and $options.bjx_eventTF>>
						<span class="green">这事比起危险还是烦人更多一点。</span>
					<<elseif $oxygen gte 900>>
					/* 北极星 */
						<span class="blue">You struggle for breath.</span>
					<<elseif $oxygen gte 600>>
						<span class="purple">You can't breathe!</span>
						<<violence 10 1 1 0.2>>
					<<elseif $oxygen gte 300>>
						<span class="pink">You feel light-headed.</span>
						<<violence 20 1 1 0.2>>
					<<elseif $oxygen gte 1>>
						<span class="pink">You see stars.</span>
						<<violence 40 1 1 0.2>>
					<<else>>
						<span class="red">You are suffocating.</span>
						<<violence 100 1 1 0.2>>
						<<suffocatepass>>
					<</if>>
				<</if>>
				<<if $NPCList[_n].type is "plant">>
					<span class="pink">Nectar pours down your throat.</span>
					<<nectarfed 15>>
				<</if>>
				<<submission 10 _n>><<bruise face>><<bruise neck>><<violence 1>><<set $speechmouthpenetrated to 1>>
			<<elseif $rng gte 1>>
				<<if $npcSub>>
					You continue to service <<him>> with your mouth.
				<<else>>
					<<He>> continues thrusting into your mouth.
				<</if>>
				<<if $NPCList[_n].penissize gte 4>>
					<<switch random(1, 4)>>
					<<case 1>>
						It's a struggle not to gag as the $NPCList[_n].penisdesc fills you.
					<<case 2>>
						<span class="pink">Saliva
						<<if $NPCList[_n].type is "plant">>
							mixes with nectar and
							<<set _nectar to 1>>
						<</if>>
						drools down your chin as you struggle to keep your lips wrapped around <<his>> $NPCList[_n].penisdesc.</span>
						<<set $hygiene += 500>><<bodyliquid "face" "goo">>
					<<default>>
					<</switch>>
				<</if>>
				<<if $NPCList[_n].type is "plant" and $mouthactiondefault isnot "suck" and !_nectar>>
					<span class="pink">Sweet nectar drips into your mouth.</span>
					<<nectarfed 10>>
				<</if>>
				<<submission 10 _n>><<bruise face>><<violence 1>><<set $speechmouthpenetrated to 1>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "mouthimminent">>
			<<if $pullaway is 1>>
				<<set $pullaway to 0>>
				Saliva drips from the tip of <<his>> phallus.
			<<else>>
				<<if $rng gte 101>>
					<span class="blue"><<He>> stops pressing <<his>> $NPCList[_n].penisdesc against your mouth.</span>
					<<set $NPCList[_n].penis to "mouthentrance">><<submission 5 _n>><<set $mouthstate to "entrance">>
				<<elseif $worn.face.type.includes("covered") or $worn.face.type.includes("gag")>>
					<<if $enemyanger lt $enemyangermax/2>>
						<span class="lblue"><<He>> moves <<his>> penis away from your mouth.</span>
						<<set $NPCList[_n].penis to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
					<<else>>
						<<switch random(0,2)>>
							<<case 0 1>>
								<<He>> pushes <<his>> $NPCList[_n].penisdesc against your $worn.face.name. <<He>> seems frustrated.
								<<damageFaceCover 2>>
							<<case 2>>
								<span class="lblue"><<He>> moves <<his>> penis away from your mouth.</span>
								<<set $NPCList[_n].penis to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
						<</switch>>
					<</if>>
				<<elseif $rng lte 20>>
					<<if $player.virginity.oral isnot true>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span>
						<<if $NPCList[_n].type is "plant">>
							<span class="pink">Sweet nectar drips into your mouth.</span>
							<<nectarfed 10>>
						<</if>>
						<<submission 10 _n>><<set $speechmouthpenetrated to 1>>
					<<elseif $player.virginity.oral is true>>
						<span class="pink"><<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span>
						<<if $NPCList[_n].type is "plant">>
							<span class="red">It tastes uncomfortably sweet.</span>
						<<else>>
							<span class="red">It tastes strange.</span>
						<</if>>
						<<submission 30 _n>><<takeVirginity $NPCList[_n].fullDescription "oral">><<violence 1>><<set $speechmouthvirgin to 1>>
					<</if>>
					<<oralstat>><<set $NPCList[_n].penis to "mouth">><<bruise face>><<raped>><<set $mouthstate to "penetrated">>
				<<elseif $rng gte 21>>
					<<if $mouthsubmit is 1>>
						<<He>> allows you to pleasure <<his>> $NPCList[_n].penisdesc with your mouth.
						<<if $NPCList[_n].type is "plant" and !["peniskiss","lick"].includes($mouthactiondefault)>>
							<span class="pink">You lap up nectar with your tongue.</span>
							<<nectarfed 3>>
						<</if>>
						<<submission 5 _n>><<set $speechmouthimminent to 1>>
					<<else>>
						<<if $player.virginity.oral isnot true>>
							<span class="pink"> <<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span>
							<<if $NPCList[_n].type is "plant">>
								<span class="pink">Sweet nectar drips into your mouth.</span>
								<<nectarfed 10>>
							<</if>>
							<<submission 10 _n>><<violence 1>><<set $speechmouthpenetrated to 1>>
						<<elseif $player.virginity.oral is true>>
							<span class="pink"> <<He>> thrusts <<his>> $NPCList[_n].penisdesc into your mouth.</span>
							<<if $NPCList[_n].type is "plant">>
								<span class="red">It tastes uncomfortably sweet.</span>
								<<nectarfed 20>>
							<<else>>
								<span class="red">It tastes strange.</span>
							<</if>>
							<<submission 30 _n>><<takeVirginity $NPCList[_n].fullDescription "oral">><<violence 1>><<set $speechmouthpenetrated to 1>>
						<</if>>
						<<oralstat>><<set $NPCList[_n].penis to "mouth">><<bruise face>><<raped>><<set $mouthstate to "penetrated">>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "mouthentrance">>
			<<if $pullaway is 1>>
				<<set $pullaway to 0>>
				<<His>> $NPCList[_n].penisdesc hovers only inches from your face.
			<<else>>
				<<if $rng gte 101>>
					<span class="lblue"><<He>> moves <<his>> penis away from your mouth.</span>
					<<set $NPCList[_n].penis to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
				<<elseif $NPCList[_n].chastity.penis.includes("chastity")>>
					<span class="purple"><<if $npcSub>>You pull<<else>><<He>> pushes<</if>> <<his>> $NPCList[_n].chastity.penis against your mouth.</span>
					<<sex 25 "mouth" _n>><<set $speechNPCChastity to 1>>
				<<elseif $worn.face.type.includes("covered") or $worn.face.type.includes("gag")>>
					<<if $enemyanger lt $enemyangermax/2>>
						<span class="lblue"><<He>> moves <<his>> penis away from your mouth.</span>
						<<set $NPCList[_n].penis to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
					<<else>>
						<<switch random(0,2)>>
							<<case 0 1>>
								<<He>> pushes <<his>> $NPCList[_n].penisdesc against your $worn.face.name. <<He>> seems frustrated.
								<<damageFaceCover 2>>
							<<case 2>>
								<span class="lblue"><<He>> moves <<his>> penis away from your mouth.</span>
								<<set $NPCList[_n].penis to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
						<</switch>>
					<</if>>
				<<elseif $rng gte 1 and !$npcSub>>
					<span class="purple"><<He>> pushes <<his>> $NPCList[_n].penisdesc against your lips.</span>
					<<if $NPCList[_n].type is "plant" and !["peniskiss","penislick"].includes($mouthactiondefault)>>
						<span class="pink">Nectar glistens on the tip.</span>
					<</if>>
					<<set $NPCList[_n].penis to "mouthimminent">><<submission 5 _n>><<set $mouthstate to "imminent">><<set $speechmouthimminent to 1>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "chest">>
			<<if $rng gte 101>>
				<<He>> moves <<his>> penis away from your chest.
				<<set $NPCList[_n].penis to 0>><<set $chestuse to 0>>
			<<elseif $rng gte 1>>
				<<submission 3 _n>><<playWithBreasts>>
				<<if $breastcup is "none">>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc against your <<breasts>>.
					<<set $speechchestrub to 1>>
				<<else>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].penisdesc between your <<breasts>>.
					<<set $speechbreastrub to 1>>
				<</if>>
			<</if>>
		<</if>>
		<<if $NPCList[_n].penis is "footjob">>
			<<if $rng gte 101 or ($penisuse isnot "feet" and $vaginause isnot "feet")>>
				<span class="blue"><<He>> stops pressing <<his>> foot against your <<genitals>>.</span>
				<<set $NPCList[_n].penis to 0>>
				<<if ($player.penisExist or playerHasStrapon()) and $penisuse is "feet">>
					<<set $penisuse to 0>>
				<</if>>
				<<if $player.vaginaExist and $vaginause is "feet">>
					<<set $vaginause to 0>>
				<</if>>
			<<else>>
				<<if $penisuse is "feet">>
					<<He>> presses your <<penis>> against your stomach with <<his>> foot and rubs your <<glans>> between <<his>> toes.
					<<set $speechpenisfoot to 1>><<neutral 5 "genitals" _n>><<violence 1 1 1 1 _n>>
				<<elseif $vaginause is "feet">>
					<<He>> presses and teases your <<pussy>> with <<his>> foot.
					<<set $speechvaginafoot to 1>><<neutral 5 "genitals" _n>><<violence 1 1 1 1 _n>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "otherfrot">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> shifts <<his>> ass and presses <<his>> anus against your <<penis>>.</span>
				<<set $penisuse to "otheranus">><<set $NPCList[_n].penis to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
			<<else>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>>.
				<<sex 5 "genital" _n>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "otheranus">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> moves <<his>> pelvis away, releasing your <<penis>> from <<his>> anus.</span>
				<<sex 30 "genital" _n>><<set $NPCList[_n].penis to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<<elseif $rng gte 1>>
				<<if $enemyanger gte 100>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<He>> continues to fuck your <<penis>> with <<his>> ass, <<his>> movements violent and erratic.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues to ride you, <<if !playerHasStrapon()>>your penis helpless as it's fucked.<<else>>relishing the feel of your strap-on.<</if>>
					<<else>>
						<<He>> fucks your <<penis>> with rough movements, intent on showing you who's boss.
					<</if>>
				<<elseif $enemyanger gte 20>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if playerHasStrapon()>>
							<<his>> ass twitches around your strap-on as <<he>> fucks you with wild abandon.
						<<else>>
							You feel <<his>> ass twitch around your length as <<he>> fucks you.
						<</if>>
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if playerHasStrapon()>>
							<<He>> continues to fuck your strap-on, relishing your sex toy inside <<him>>.
						<<else>>
							<<He>> continues to violate your <<penis>>, using you as a sex toy.
						<</if>>
					<<else>>
						<<He>> fucks your <<penis>>, taking as much of you into <<his>> ass as <<he>> can.
					<</if>>
				<<else>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> anus rhythmically pounding your length. <<His>> body jerks whenever you hit a sensitive spot.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> anus rhythmically pounding your length.
					<<else>>
						<<if $npcSub>>You press into <<his>> ass<<else>><<He>> rides your <<penis>><</if>> with steady movements.
					<</if>>
				<</if>>
				<<sex 30 "genital" _n>><<set $speechotheranuspenetrated to 1>>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "otheranusimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> ass against your <<penis>>.</span>
				<<set $NPCList[_n].penis to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
			<<elseif $rng gte 1>>
				<<if $nopenile is 0>>
					<<set $penisactiondefault to "otheranustake">>
					<<if ((playerPenisSize() is -1 and $arousal lte ($arousalmax / 5) * 4) or (playerPenisSize() is -2 and $arousal lte ($arousalmax / 10) * 9))>>
						<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">But you don't have an erection.</span>
						<<set $speechpenissmall to 1>><<set $enemyanger += 5>>
					<<elseif playerPenisSize() lte 2 or playerPenisSize() is 3 and random(1, 100) gte 70 or playerPenisSize() gte 4 and random(1, 100) gte 90>>
						<<if playerHasStrapon() or $player.virginity.penile isnot true>>
							<span class="pink"><<He>> eases your <<penis>> into <<his>> ass, swallowing you to the base.</span>
							<<sex 30 "genital" _n>><<set $speechotheranuspenetrated to 1>>
							<<if playerHasStrapon()>><<violence 1 1 1 0>>
							<<else>><<bruise penis>><<takeTempleVirginity $NPCList[_n].fullDescription "penile">><<violence 1>><<raped>><<penisraped>><</if>>
						<<elseif $player.virginity.penile is true>>
							<span class="pink"><<He>> eases your virgin penis into <<his>> ass,</span><span class="red"> separating your foreskin from your glans and</span> <<virginitylosttext $NPCList[_n].fullDescription>>
							<<sex 100 "genital" _n>><<takeVirginity $NPCList[_n].fullDescription "penile">><<bruise penis>><<violence 100>><<raped>><<penisraped>><<set $speechpenisvirgin to 1>>
						<</if>>
						<<penilestat>><<set $NPCList[_n].penis to "otheranus">><<takeNPCVirginity _n "anal">><<set $penisstate to "otheranus">>
						<<if playerPenisSize() gte 4>>
							<<He>> looks proud to have taken something so big.
						<</if>>
					<<else>>
						<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">Your girth proves too much.</span>
						<<set $speechpenisbig to 1>><<set $enemyanger += 5>>
					<</if>>
				<<else>>
					Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> ass, instead teasing the tip of your <<glans>>.
					<<sex 15 "genital" _n>><<set $speechotheranuswithhold to 1>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "otheranusentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> ass away from your <<penis>>.</span>
				<<set $NPCList[_n].penis to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.over_lower.name.
					<<sex 5 "genital" _n>><<set $worn.over_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
				<<elseif $worn.lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.lower.name.
					<<sex 5 "genital" _n>><<set $worn.lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
				<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.vagina_exposed is 0>>
						<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.under_lower.name.
						<<sex 5 "genital" _n>><<set $worn.under_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
					<<elseif $worn.under_lower.vagina_exposed is 1>>
						<<if $rng gte 71>>
							<<if $NPCList[_n].chastity.anus.includes("shield")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.anus against your <<penis>><<if playerChastity("penis")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
								<<sex 25 "genital" _n>><<set $speechNPCChastity to 1>>
							<<elseif playerChastity("penis")>>
								<<if $worn.genitals.name is "chastity parasite">>
									<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your $worn.genitals.name, <span class="lewd">leaving you feeling more aroused.</span>
									<<arousal 100 "genitals">><<set $worn.genitals.integrity -= 5>>
								<<else>>
									<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.genitals.name.
									<<set $worn.genitals.integrity -= 10>>
								<</if>>
								<<sex 20 "genital" _n>><<set $speechchastity to 1>>
							<<elseif $nopenile is 1 and !$npcSub>>
								<span class="purple"><<He>> presses <<his>> ass against your <<penis>>.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].penis to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
							<<elseif $penisWetness gte (playerPenisSize() * 15) + random(1, 40) or random(1, 2) is 2 and !$npcSub>>
								<<He>> presses <<his>> ass against your <<penis>>. <<penis_lube_text>> <span class="pink">your tip is pushed into <<him>>, a thrust away from being enveloped.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].penis to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
							<<elseif !$npcSub>>
								<<He>> presses <<his>> ass against your <<penis>>, <span class="blue">but fails to envelop you.</span> Your <<penisSimple>> angles away and rubs between <<his>> cheeks.
								<<sex 5 "genital" _n>><<set $speechotheranusimminent to 1>>
							<</if>>
						<<elseif $rng gte 1>>
							<<if !playerChastity("penis")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> your <<penis>> between <<his>> cheeks.
								<<sex 10 "genital" _n>>
							<<else>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> cheeks using your $worn.genitals.name<<if $worn.genitals.name is "chastity parasite">>, <span class="lewd">making you feel more aroused.</span><<arousal 100 "genitals">><<else>>.<</if>>
								<<sex 5 "genital" _n>>
							<</if>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "mouthotheranus">>
			<<if $rng gte 1>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
					<<He>> grinds <<his>> ass against your mouth.
				<<else>>
					<<He>> slowly moves <<his>> ass against your lips.
				<</if>>
				<<sex 3 "mouth" _n>><<set $speechmouthotheranus to 1>>
				<<if $mouthactiondefault is "anallick">>
					<<set $speechanallick to 1>>
				<<elseif $mouthactiondefault is "analkiss">>
					<<set $speechanalkiss to 1>>
				<</if>>
			<<else>>
				<span class="purple"><<He>> moves <<his>> ass away from your face.</span>
				<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].penis to 0>>
				<<set $NPCList[_n].location.genitals = 0>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "penisentrance" and !$npcSub>>
			<<if $rng gte 51 and playerChastity("penis")>>
				<<He>> caresses <<his>> <<npcPenisSimple _n>> against your $worn.genitals.name.
				<<set $penisstate to "otherpenisimminent">><<set $NPCList[_n].penis to "penisimminent">><<sex 10 "genital" _n>>
				<<neutral 1 _n>>
			<<elseif $rng gte 51 and !playerChastity("penis")>>
				<<He>> caresses your <<penis>> with <<his>> <<npcPenisSimple _n>>, <span class="purple">teasing what's to come.</span>
				<<set $penisstate to "otherpenisimminent">><<set $NPCList[_n].penis to "penisimminent">><<sex 10 "genital" _n>>
			<<else>>
				<<if playerChastity("penis")>>
					<<He>> hovers <<his>> <<npcPenisSimple _n>> closer to your $worn.genitals.name.
				<<else>>
					<<He>> hovers <<his>> <<npcPenisSimple _n>> closer to your <<penis>>.
				<</if>>
				<<neutral 1 _n>>
			<</if>>
			<<set $speechfencingentrance to 1>>
		<<elseif $NPCList[_n].penis is "penisimminent" and !$npcSub>>
			<<He>> thrusts forward,
			<span class="pink">
				<<if $enemyarousal gte (($enemyarousalmax / 10) * 7)>>
					fencing
				<<elseif $enemyarousal gte (($enemyarousalmax / 10) * 4)>>
					smashing
				<<else>>
					pressing
				<</if>>
				<<if playerChastity("penis")>>
					<<his>> <<npcPenisSimple _n>> against your $worn.genitals.name.
					<<set $worn.genitals.integrity -= 10>><<set $speechchastity to 1>>
				<<else>>
					<<his>> <<npcPenisSimple _n>> against your <<penis>>.
				<</if>>
			</span>
			<<set $penisstate to "otherpenis">><<set $NPCList[_n].penis to "penis">><<sex 20 "genital" _n>><<set $speechpenispenis to 1>>
		<<elseif $NPCList[_n].penis is "penis">>
			<<if $rng gte 1>>
				<<if playerChastity("penis")>>
					<<if $enemyarousal gte $enemyarousalmax * 0.8>>
						<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> pounding into your $worn.genitals.name with <<his>> cock with a violent intensity.
					<<elseif $enemyarousal gte $enemyarousalmax * 0.6>>
						<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> smashing <<his>> <<npcPenisSimple _n>> against your $worn.genitals.name.
					<<elseif $enemyarousal gte $enemyarousalmax * 0.4>>
						<<He>> thrusts <<his>> hips, rubbing and kneading your $worn.genitals.name and <<his>> <<npcPenisSimple _n>> together.
					<<else>>
						<<He>> rubs and kneads your $worn.genitals.name and <<his>> <<npcPenisSimple _n>> together.
					<</if>>
					<<if $enemyarousal gte $enemyarousalmax * 0.6 and !wearingCondom(_n) and $worn.genitals.name is "chastity parasite">>
						<span class="purple"><<His>> precum coats your $worn.genitals.name,</span> <span class="lewd">the parasite parasite sends a wave of pleasure through your <<penis>>.</span><<set $worn.genitals.integrity -= 5>>
						<<arousal 400 "genitals">><<if !$earSlime.defyCooldown and $earSlime.vibration lt 120>><<set $earSlime.vibration += 10>><</if>>
					<<elseif $enemyarousal gte $enemyarousalmax * 0.6 and !wearingCondom(_n)>>
						<span class="purple">Your precum mingles.</span><<purity -1>><<set $worn.genitals.integrity -= 10>>
					<</if>>
					<<set $worn.genitals.integrity -= 5>>
					<<if $worn.genitals.name is "chastity parasite">><<arousal 100 "genitals">><</if>>
					<<set $speechchastity to 1>>
				<<elseif $enemyarousal gte $enemyarousalmax * 0.8>>
					<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> pounding your <<penis>> against <<his>> cock with a violent intensity.
					<<if $penisWetness gte 45 and !playerHasStrapon() and !wearingCondom(_n) and !wearingCondom("player")>>
						<span class="purple">Your precum mingles.</span><<purity -1>>
					<</if>>
				<<elseif $enemyarousal gte $enemyarousalmax * 0.6>>
					<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> smashing <<his>> <<npcPenisSimple _n>> against your <<penis>>.
					<<if $penisWetness gte 45 and !playerHasStrapon() and !wearingCondom(_n) and !wearingCondom("player")>>
						<span class="purple">Your precum mingles.</span><<purity -1>>
					<</if>>
				<<elseif $enemyarousal gte $enemyarousalmax * 0.4>>
					<<He>> thrusts <<his>> hips, rubbing and kneading your <<penises>> together.
				<<elseif $enemyarousal gte $enemyarousalmax * 0.2>>
					<<He>> rubs and kneads your <<penises>> together.
				<<else>>
					<<He>> kneads and caresses your <<penises>> together.
				<</if>>
				<<sex 20 "genital" _n>><<set $speechpenispenis to 1>>
			<<else>>
				<span class="lblue"><<He>> moves <<his>> <<npcPenisSimple _n>> away from yours.</span>
				<<set $penisuse to 0>><<set $NPCList[_n].penis to 0>>
			<</if>>
		<</if>>

		<!-- VAGINA START -->

		<<rng>>
		<<if $NPCList[_n].vagina is "clothed" and $npcSub isnot 1>>
			<<if $enemyarousal gte 40>>
				<span class="blue"><<He>> <<npcUndressText $NPCList[_n] "lower" "self">>, <<npcRevealText $NPCList[_n] "lower">>.</span>
				<<set $NPCList[_n].vagina to 0>>
				<<if $NPCList[_n].penis isnot "none">>
					<<npcGenitalReaction $NPCList[_n]>>
					<<set $NPCList[_n].penis to 0>>
				<</if>>
			<</if>>
			<<if $NPCList[_n].fullDescription is "Sydney">>
				<<sydneyExpose>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "frot">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> moves <<his>> clit away and presses <<his>> hungry pussy against your <<penis>>.</span>
				<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisentrance">><<set $penisstate to "entrance">><<set $speechpenisentrance to 1>>
			<<else>>
				<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> clit against your <<glans>>.
				<<sex 5 "genital" _n>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "penis">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> moves <<his>> pelvis away, releasing your <<penis>> from <<his>> vagina.</span>
				<<sex 30 "genital" _n>><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">><<set $speechpenisimminent to 1>>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<<elseif $rng gte 1>>
				<<if $enemyanger gte 100>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<He>> continues to fuck your <<penis>>, <<his>> movements violent and erratic as <<his>> pussy slides along your length.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if !playerHasStrapon()>>
							<<He>> continues to ride you, your penis helpless as it's fucked.
						<<else>>
							<<He>> continues to ride your <<penis>>
						<</if>>
					<<else>>
						<<He>> fucks your <<penis>> with rough movements, intent on showing you who's boss.
					<</if>>
				<<elseif $enemyanger gte 20>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if playerHasStrapon()>>
							<<His>> vagina twiches and throbs around your strap-on as <<he>> fucks you.
						<<else>>
							You feel <<his>> vagina twitch and throb around your length as <<he>> fucks you.
						<</if>>
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues to violate your <<penis>>, using you as a sex toy.
					<<else>>
						<<He>> fucks your <<penis>>, taking as much of you into <<his>> vagina as <<he>> can.
					<</if>>
				<<else>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> vagina rhythmically kneading and squeezing your length. <<His>> body jerks whenever you hit a sensitive spot.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if $npcSub>>You continue thrusting into <<him>><<else>><<He>> continues riding your <<penis>><</if>>, <<his>> vagina rhythmically kneading and squeezing your length.
					<<else>>
						<<if $npcSub>>You press into <<his>> pussy<<else>><<He>> rides your <<penis>><</if>> with steady movements.
					<</if>>
				<</if>>
				<<sex 30 "genital" _n>><<set $speechpenispenetrated to 1>>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "penisimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> pussy against your <<penis>>.</span>
				<<set $NPCList[_n].vagina to "penisentrance">><<set $penisstate to "entrance">><<set $speechpenisentrance to 1>>
			<<elseif $rng gte 1>>
				<<if $nopenile is 0>>
					<<if ((playerPenisSize() is -1 and $arousal lte ($arousalmax / 5) * 4) or (playerPenisSize() is -2 and $arousal lte ($arousalmax / 10) * 9))>>
						<<He>> presses <<his>> pussy against the tip of your <<penis>>, trying to take you in. <span class="blue">But you don't have an erection.</span>
						<<set $speechpenissmall to 1>><<set $enemyanger += 5>>
					<<elseif playerPenisSize() lte 2 or playerPenisSize() is 3 and random(1, 100) gte 70 or playerPenisSize() gte 4 and random(1, 100) gte 90>>
						<<if playerHasStrapon() or $player.virginity.penile isnot true>>
							<span class="pink"><<He>> eases your <<penis>> into <<his>> pussy, swallowing you to the base.</span>
							<<sex 30 "genital" _n>><<set $speechpenispenetrated to 1>>
							<<if playerHasStrapon()>><<violence 1 1 1 0>>
							<<else>><<bruise penis>><<takeTempleVirginity $NPCList[_n].fullDescription "penile">><<violence 1>><<raped>><<penisraped>><</if>>
						<<elseif $player.virginity.penile is true>>
							<span class="pink"><<He>> eases your virgin penis into <<his>> pussy,</span><span class="red"> separating your foreskin from your glans and <<virginitylosttext $NPCList[_n].fullDescription>></span>
							<<sex 100 "genital" _n>><<takeVirginity $NPCList[_n].fullDescription "penile">><<bruise penis>><<violence 100>><<raped>><<penisraped>><<set $speechpenisvirgin to 1>>
						<</if>>
						<<penilestat>><<set $NPCList[_n].vagina to "penis">><<takeNPCVirginity _n "vaginal">><<set $penisstate to "penetrated">>
						<<if playerPenisSize() gte 4>>
							<<He>> looks proud to have taken something so big.
						<</if>>
					<<else>>
						<<He>> presses <<his>> pussy against the tip of your <<penis>>, trying to take you in. <span class="blue">Your girth proves too much.</span> <<He>> frots against your length.
						<<set $speechpenisbig to 1>><<set $enemyanger += 5>>
					<</if>>
				<<else>>
					Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> vagina, instead teasing the tip of your glans.
					<<sex 15 "genital" _n>><<set $speechpeniswithhold to 1>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "penisentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> pussy away from your <<penis>>.</span>
				<<set $NPCList[_n].vagina to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.over_lower.name.
					<<sex 5 "genital" _n>><<set $worn.over_lower.integrity -= 10>><<set $speechpenisentrance to 1>>
				<<elseif $worn.lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.lower.name.
					<<sex 5 "genital" _n>><<set $worn.lower.integrity -= 10>><<set $speechpenisentrance to 1>>
				<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.vagina_exposed is 0>>
						<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.under_lower.name.
						<<sex 5 "genital" _n>><<set $worn.under_lower.integrity -= 10>><<set $speechpenisentrance to 1>>
					<<elseif $worn.under_lower.vagina_exposed is 1>>
						<<if $rng gte 51>>
							<<if $NPCList[_n].chastity.vagina.includes("chastity")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.vagina against your <<penis>><<if playerChastity("penis")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
								<<sex 25 "genital" _n>><<set $speechNPCChastity to 1>>
							<<elseif playerChastity("penis")>>
								<<if $worn.genitals.name is "chastity parasite">>
									<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your $worn.genitals.name, <span class="lewd">leaving you feeling more aroused.</span>
									<<arousal 100 "genitals">><<set $worn.genitals.integrity -= 5>>
								<<else>>
									<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> pussy against your <<penis>> through your $worn.genitals.name.
									<<set $worn.genitals.integrity -= 10>>
								<</if>>
								<<sex 20 "genital" _n>><<set $speechchastity to 1>>
							<<elseif $nopenile is 1 and !$npcSub>>
								<span class="purple"><<He>> presses <<his>> pussy against your <<penis>>.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">><<set $speechpenisimminent to 1>>
							<<elseif $penisWetness gte (playerPenisSize() * 15) + random(1, 40) or random(1, 2) is 2 and !$npcSub>>
								<<He>> presses <<his>> pussy against your <<penis>>. <<penis_lube_text>> <span class="pink">your tip is pushed into <<him>>, a thrust away from being enveloped.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">><<set $speechpenisimminent to 1>>
							<<elseif !$npcSub>>
								<<He>> presses <<his>> pussy against your <<penis>>, <span class="blue">but fails to envelop you.</span> Your <<penisSimple>> angles away and rubs against <<his>> clit.
								<<sex 5 "genital" _n>><<set $speechpenisimminent to 1>>
								<<if $enemyarousal gte ($enemyarousalmax / 2) and random(1, 3) is 3>>
									Lewd fluid drips from <<his>> pussy, <span class="blue">lubricating your cock.</span>
									<<bodyliquid "penis" "goo">>
								<</if>>
							<</if>>
						<<elseif $rng gte 1>>
							<<if !playerChastity("penis")>>
								<<if $npcSub>>
									You tease <<his>> labia with your <<penis>>.
								<<else>>
									<<He>> teases your <<penis>> with <<his>> labia.
								<</if>>
								<<sex 10 "genital" _n>>
							<<else>>
								<<if $npcSub>>
									You tease <<his>> labia with your <<penis>>.
								<<else>>
									<<He>> teases your <<penis>> with <<his>> labia.
								<</if>>
								<<sex 5 "genital" _n>>
							<</if>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "lefthand" or $NPCList[_n].vagina is "righthand">>
			/*<<set $_npchand to $NPCList[_n].vagina.slice(0,4)>>*/

			<<if $rng lte 80>>
				<<He>> strokes <<his>> pussy with <<his>> hand.
				<<neutral 1 _n>><<set $enemyarousal += 20>>
			<<else>>
				<span class="blue"><<He>> moves <<his>> hand away from <<his>> pussy.</span>
				<<set $NPCList[_n][$NPCList[_n].vagina] to 0>><<set $NPCList[_n].vagina to 0>>
			<</if>>
		<</if>>
		<<if $NPCList[_n].vagina is "mouth">>
			<<if $enemyanger gte 100>>
				<<He>> covers your mouth with <<his>> pussy, making it difficult to breathe.
				<<if $NPCList[_n].type is "plant" and $mouthactiondefault isnot "vaginalick">>
					<span class="pink">Sweet nectar leaks into your mouth.</span>
					<<nectarfed 8>>
				<</if>>
				<<violence 3>><<bruise face>><<set $speechvaginamouth to 1>>
			<<else>>
				<<if $mouthsubmit is 1>>
					<<if $rng gte 1>>
						<<if !$npcSub>>
							<<He>> rubs <<his>> pussy against your lips.
						<<else>>
							You continue to violate <<his>> pussy with your lips.
						<</if>>
						<<if $NPCList[_n].type is "plant" and $mouthactiondefault isnot "vaginalick">>
							<span class="pink">You can taste sweet nectar.</span>
							<<nectarfed 8>>
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
							You can taste <<his>> juices.
						<</if>>
						<<sex 3 "mouth" _n>><<set $speechvaginamouth to 1>>
					<<else>>
						<<He>> moves <<his>> pussy away from your face.
						<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
					<</if>>
				<<else>>
					<<if $rng gte 1>>
						<<if !$npcSub>>
							<<He>> rubs <<his>> pussy against your lips.
						<<else>>
							You continue to violate <<his>> pussy with your lips.
						<</if>>
						<<if $NPCList[_n].type is "plant" and $mouthactiondefault isnot "vaginalick">>
							<span class="pink">You can taste sweet nectar.</span>
							<<nectarfed 8>>
						<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
							You can taste <<his>> juices.
						<</if>>
						<<sex 3 "mouth" _n>><<set $speechvaginamouth to 1>>
					<<else>>
						<<He>> moves <<his>> pussy away from your face.
						<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "vaginaentrance" and !$npcSub>>
			<<if $rng gte 51>>
				<<He>> kisses your <<pussy>> with <<his>> own, <span class="purple">teasing what's to come.</span>
				<<set $vaginastate to "othervaginaimminent">><<set $NPCList[_n].vagina to "vaginaimminent">><<sex 10 "genital" _n>>
			<<else>>
				<<He>> hovers <<his>> pussy closer to yours.
				<<neutral 1 _n>>
			<</if>>
			<<set $speechtribentrance to 1>>
		<<elseif $NPCList[_n].vagina is "vaginaimminent" and !$npcSub>>
			<<He>> thrusts forward, <span class="pink">
			<<if $enemyarousal gte (($enemyarousalmax / 10) * 7)>>
				squelching
			<<elseif $enemyarousal gte (($enemyarousalmax / 10) * 4)>>
				smashing
			<<else>>
				pressing
			<</if>>
			<<his>> pussy against yours.</span>
			<<set $vaginastate to "othervagina">><<set $NPCList[_n].vagina to "vagina">><<sex 20 "genital" _n>><<set $speechvaginavagina to 1>>
		<<elseif $NPCList[_n].vagina is "vagina">>
			<<if $rng gte 1>>
				<<if $enemyarousal gte $enemyarousalmax * 0.8>>
					<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> pounding your <<pussy>> against <<hers>> with a violent intensity.
					<<if $vaginaWetness gte 45>>
						<span class="purple">Your juices mingle.</span><<purity -1>>
					<</if>>
				<<elseif $enemyarousal gte $enemyarousalmax * 0.6>>
					<<He>> thrusts <<his>> hips, <<if $npcSub>>instinctively<</if>> smashing <<his>> pussy against yours.
					<<if $vaginaWetness gte 45>>
						<span class="purple">Your juices mingle.</span><<purity -1>>
					<</if>>
				<<elseif $enemyarousal gte $enemyarousalmax * 0.4>>
					<<He>> thrusts <<his>> hips, rubbing and kneading your pussy with <<his>> own.
				<<elseif $enemyarousal gte $enemyarousalmax * 0.2>>
					<<He>> rubs and kneads your <<pussy>> with <<his>> own.
				<<else>>
					<<He>> kneads and kisses your <<pussy>> with <<his>> own.
				<</if>>
				<<sex 20 "genital" _n>><<set $speechvaginavagina to 1>>
			<<else>>
				<span class="lblue"><<He>> moves <<his>> pussy away from yours.</span>
				<<set $vaginause to 0>><<set $NPCList[_n].vagina to 0>>
			<</if>>
		<</if>>
		<<if $NPCList[_n].vagina is "leftarm">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> rubs <<his>> pussy against your fingers.
					<<submission 2 _n>>
				<<else>>
					You rub <<his>> pussy with your fingers.
				<</if>>
			<<else>>
				<<He>> moves your hand away from <<his>> pussy.
				<<set $leftarm to 0>><<set $NPCList[_n].vagina to 0>><<set $leftactiondefault to "leftplay">>
			<</if>>
		<</if>>
		<<if $NPCList[_n].vagina is "rightarm">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> rubs <<his>> pussy against your fingers.
					<<submission 2 _n>>
				<<else>>
					You rub <<his>> pussy with your fingers.
				<</if>>
			<<else>>
				<<He>> moves your hand away from <<his>> pussy.
				<<set $rightarm to 0>><<set $NPCList[_n].vagina to 0>><<set $rightactiondefault to "rightplay">>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "feet">>
			<<set $speechfeet to 1>>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> rubs <<his>> pussy against your feet.
					<<submission 2 _n>>
				<<else>>
					You rub <<his>> pussy with feet.
				<</if>>
			<<else>>
				<<He>> moves your feet away from <<his>> pussy.
				<<set $feetuse to 0>><<set $NPCList[_n].vagina to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "footjob">>
			<<if $rng gte 101 or ($penisuse isnot "feet" and $vaginause isnot "feet")>>
				<span class="blue"><<He>> stops pressing <<his>> foot against your <<genitals>>.</span>
				<<set $NPCList[_n].vagina to 0>>
				<<if ($player.penisExist or playerHasStrapon()) and $penisuse is "feet">>
					<<set $penisuse to 0>>
				<</if>>
				<<if $player.vaginaExist and $vaginause is "feet">>
					<<set $vaginause to 0>>
				<</if>>
			<<else>>
				<<if $penisuse is "feet">>
					<<He>> presses your <<penis>> against your stomach with <<his>> foot and rubs your <<glans>> between <<his>> toes.
					<<set $speechpenisfoot to 1>><<neutral 5 "genitals" _n>><<violence 1>>
				<<elseif $vaginause is "feet">>
					<<He>> rubs <<his>> foot against your <<pussy>>.
					<<set $speechvaginafoot to 1>><<neutral 5 "genitals" _n>><<violence 1>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "otherfrot">>
			<<if $rng gte 101>>
				<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and !$player.condom and $parasite.penis.name is undefined>>
					<<if playerChastity("penis")>>
						<<He>> tries to put a condom on your penis, but can't seem to get it over your $worn.genitals.name. <span class="red"><<He>> quickly gives up.</span>
						<<set $NPCList[_n].condom.willUse to false>>
					<<else>>
						<span class="green"><<He>> slips <<condomDesc _n>> on your <<penis>>.</span>
						<<equipNPCCondom _n "player">>
					<</if>>
				<</if>>
				<span class="blue"><<He>> shifts <<his>> ass and presses <<his>> anus against your <<penis>>.</span>
				<<set $penisuse to "otheranus">><<set $NPCList[_n].vagina to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
			<<else>>
				<<He>> rubs <<his>> ass against your <<penis>>.
				<<sex 5 "genital" _n>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "otheranus">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> moves <<his>> pelvis away, releasing your <<penis>> from <<his>> anus.</span>
				<<sex 30 "genital" _n>><<set $NPCList[_n].vagina to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<<elseif $rng gte 1>>
				<<if $enemyanger gte 100>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<He>> continues to fuck your <<penis>> with <<his>> ass, <<his>> movements violent and erratic. Fluid from <<his>> pussy drools onto your length.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<if !playerHasStrapon()>>
						<<He>> continues to ride you, your penis helpless as it's fucked.
						<<else>>
							<<He>> continues to ride your <<penis>>
						<</if>>
					<<else>>
						<<He>> fucks your <<penis>> with rough movements, intent on showing you who's boss.
					<</if>>
				<<elseif $enemyanger gte 20>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						You feel <<his>> ass twitch around your length as <<he>> fucks you.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues to violate your <<penis>>, using you as a sex toy.
					<<else>>
						<<He>> fucks your <<penis>>, taking as much of you into <<his>> ass as <<he>> can.
					<</if>>
				<<else>>
					<<if $enemyarousal gte (($enemyarousalmax / 5) * 4)>>
						<<He>> continues riding your <<penis>>, <<his>> anus rhythmically pounding your length. <<His>> body jerks whenever you hit a sensitive spot.
					<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 2)>>
						<<He>> continues riding your <<penis>>, <<his>> anus rhythmically pounding your length.
					<<else>>
						<<He>> rides your <<penis>> with steady movements.
					<</if>>
				<</if>>
				<<sex 30 "genital" _n>><<set $speechotheranuspenetrated to 1>>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "otheranusimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> ass against your <<penis>>.</span>
				<<set $NPCList[_n].vagina to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>>
			<<elseif $rng gte 1>>
				<<if $nopenile is 0>>
					<<if ((playerPenisSize() is -1 and $arousal lte ($arousalmax / 5) * 4) or (playerPenisSize() is -2 and $arousal lte ($arousalmax / 10) * 9))>>
						<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">But you don't have an erection.</span>
						<<set $speechpenissmall to 1>><<set $enemyanger += 5>>
					<<elseif playerPenisSize() lte 2 or playerPenisSize() is 3 and random(1, 100) gte 70 or playerPenisSize() gte 4 and random(1, 100) gte 90>>
						<<if playerHasStrapon() or $player.virginity.penile isnot true>>
							<span class="pink"><<He>> eases your <<penis>> into <<his>> ass, swallowing you to the base.</span>
							<<sex 30 "genital" _n>><<set $speechotheranuspenetrated to 1>>
							<<if playerHasStrapon()>><<violence 1 1 1 0>>
							<<else>><<bruise penis>><<takeTempleVirginity $NPCList[_n].fullDescription "penile">><<violence 1>><<raped>><<penisraped>><</if>>
						<<elseif $player.virginity.penile is true>>
							<span class="pink"> <<He>> eases your virgin penis into <<his>> ass,</span><span class="red"> separating your foreskin from your glans and <<virginitylosttext $NPCList[_n].fullDescription>></span>
							<<sex 100 "genital" _n>><<takeVirginity $NPCList[_n].fullDescription "penile">><<bruise penis>><<violence 100>><<raped>><<penisraped>><<set $speechpenisvirgin to 1>>
						<</if>>
						<<penilestat>><<takeNPCVirginity _n "anal">><<set $NPCList[_n].vagina to "otheranus">><<set $penisstate to "otheranus">>
						<<if playerPenisSize() gte 4>>
							<<He>> looks proud to have taken something so big.
						<</if>>
					<<else>>
						<<He>> presses <<his>> ass against the tip of your <<penis>>, trying to take you in. <span class="blue">Your girth proves too much.</span>
						<<set $speechpenisbig to 1>><<set $enemyanger += 5>>
					<</if>>
				<<else>>
					Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> ass, instead teasing the tip of your <<glans>>.
					<<sex 15 "genital" _n>><<set $speechotheranuswithhold to 1>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "otheranusentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> ass away from your <<penis>>.</span>
				<<set $NPCList[_n].vagina to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
			<<elseif $rng gte 1>>
				<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and !$player.condom and $parasite.penis.name is undefined and
				$worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<if playerChastity("penis")>>
						<<He>> tries to put a condom on your penis, but can't seem to get it over your $worn.genitals.name. <span class="red"><<He>> quickly gives up.</span>
						<<set $NPCList[_n].condom.willUse to false>>
					<<else>>
						<span class="green"><<He>> slips <<condomDesc _n>> on your <<penis>>.</span>
						<<equipNPCCondom _n "player">>
					<</if>>
				<</if>>

				<<if $worn.over_lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.over_lower.name.
					<<sex 5 "genital" _n>><<set $worn.over_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
				<<elseif $worn.lower.vagina_exposed is 0>>
					<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.lower.name.
					<<sex 5 "genital" _n>><<set $worn.lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
				<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.vagina_exposed is 0>>
						<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.under_lower.name.
						<<sex 5 "genital" _n>><<set $worn.under_lower.integrity -= 10>><<set $speechotheranusentrance to 1>>
					<<elseif $worn.under_lower.vagina_exposed is 1>>
						<<if $rng gte 51>>
							<<if $NPCList[_n].chastity.anus.includes("shield")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> $NPCList[_n].chastity.anus against your <<penis>><<if playerChastity("penis")>><<set $worn.genitals.integrity -= 10>> through your $worn.genitals.name<</if>>.
								<<sex 25 "genital" _n>><<set $speechNPCChastity to 1>>
							<<elseif playerChastity("penis")>>
								<<if $worn.genitals.name is "chastity parasite">>
									<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your $worn.genitals.name, <span class="lewd">leaving you feeling more aroused.</span>
									<<arousal 100 "genitals">><<set $worn.genitals.integrity -= 5>>
								<<else>>
									<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> ass against your <<penis>> through your $worn.genitals.name.
									<<set $worn.genitals.integrity -= 10>>
								<</if>>
								<<sex 25 "genital" _n>><<set $speechchastity to 1>>
							<<elseif $nopenile is 1 and !$npcSub>>
								<span class="purple"><<He>> presses <<his>> ass against your <<penis>>.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].vagina to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
							<<elseif $penisWetness gte (playerPenisSize() * 15) + random(1, 40) or random(1, 2) is 2 and !$npcSub>>
								<<He>> presses <<his>> ass against your <<penis>>. <<penis_lube_text>> <span class="pink">your tip is pushed into <<him>>, a thrust away from being enveloped.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].vagina to "otheranusimminent">><<set $penisstate to "otheranusimminent">><<set $speechotheranusimminent to 1>>
							<<elseif !$npcSub>>
								<<He>> presses <<his>> ass against your <<penis>>, <span class="blue">but fails to envelop you.</span> Your <<penisSimple>> angles away and rubs between <<his>> cheeks.
								<<sex 5 "genital" _n>><<set $speechotheranusimminent to 1>>
							<</if>>
						<<elseif $rng gte 1>>
							<<if !playerChastity("penis")>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> your <<penis>> between <<his>> cheeks.
								<<sex 10 "genital" _n>>
							<<else>>
								<<if $npcSub>>You rub<<else>><<He>> rubs<</if>> <<his>> cheeks on your $worn.genitals.name<<if $worn.genitals.name is "chastity parasite">>, <span class="lewd">making you feel more aroused.</span><<arousal 100 "genitals">><<else>>.<</if>>
								<<sex 10 "genital" _n>>
							<</if>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].vagina is "facesit">>
			<<if $consensual is 0 and $underwater isnot 1>>
				<<if ($oxygen gt 150 and $enemyanger gte 30) or $enemyanger gte (($enemyangermax / 5) * 4)>>
					<<oxygen -150>>

					<<if $worn.face.type.includes("covered") or $worn.face.type.includes("gag")>>
						<<if $enemyanger lt $enemyangermax/2>>
							<span class="lblue"><<He>> moves <<his>> pussy away from your mouth.</span>
							<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
						<<else>>
							<<switch random(0,2)>>
								<<case 0 1>>
									<<He>> continues to sit down full weight on your $worn.face.name.
									<<damageFaceCover 2>>
								<<case 2>>
									<span class="lblue"><<He>> moves <<his>> pussy away from your mouth.</span>
									<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
							<</switch>>
						<</if>>
					<<else>>
					<<print either(
						"<<He>> covers your face with <<his>> pussy and ass.",
						"<<His>> pussy and ass press down on your face.",
						"<<He>> continues to sit down full weight on your face.",
						"<<He>> smothers you under <<him>>.",
						"<<His>> pussy and ass press down on your mouth and nose."
					)>>
					<</if>>
					<<sex 1 "mouth" _n>><<bruise face>><<bruise face>>

					<<if $suffocationPhase isnot 2>>
					    /* 北极星模组 */
						<<if $slime gt 0 and $options.bjx_eventTF>>
							<span class="green">这事比起危险还是烦人更多一点。</span>
						<<elseif $oxygen gte 900>>
						/* 北极星 */
							<span class="blue">You struggle for breath.</span>
							<<violence 3>>
						<<elseif $oxygen gte 600>>
							<span class="purple">You can't breathe!</span>
							<<violence 5>>
						<<elseif $oxygen gte 300>>
							<span class="pink">You feel light-headed.</span>
							<<violence 10>>
						<<elseif $oxygen gte 1>>
							<span class="pink">You see stars.</span>
							<<violence 20>>
						<<else>>
							<span class="red">You are suffocating.</span>
							<<violence 50>>
							<<suffocatepass>>
						<</if>>
					<</if>>

				<<elseif $oxygen lte 900>>
					<<print either(
						"<<He>> lets you breathe in air from under <<him>>.",
						"<<He>> lifts off slightly, just enough to let you breathe a little.",
						"You are able to snatch in some small amount of air from under <<him>>."
					)>>
					<<if $neckuse isnot "hand">>
						<<suffocatepass -1>>
					<</if>>
				<</if>>
			<</if>>

			<<if $analingusdisablegiving is "f" and ($rng lt 5 or ($rng lt 10 and $enemyanger gte $enemyangermax / 10))>>
				<<He>> shifts <<his>> position on your face, pressing <<his>> ass onto your mouth.
				<<set $mouthstate to "anal">><<set $NPCList[_n].vagina to "facesitanal">>
				<<set $speechmouthotheranus to 1>>

			<<elseif $worn.face.type.includes("covered") or $worn.face.type.includes("gag")>>
				<<if $enemyanger lt $enemyangermax/2>>
					<span class="lblue"><<He>> moves <<his>> pussy away from your mouth.</span>
					<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
				<<else>>
					<<switch random(0,2)>>
						<<case 0 1>>
							<<He>> grinds <<his>> ?vulva against your $worn.face.name.
							<<damageFaceCover 2>>
						<<case 2>>
							<span class="lblue"><<He>> moves <<his>> pussy away from your mouth.</span>
							<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
					<</switch>>
				<</if>>
			<<elseif $rng gte 0>>
				<<if $mouthactiondefault is "vaginalick" and random(1) is 0>>
					<<if !$npcSub>>
						<<He>> grinds <<his>> pussy into your mouth and tongue.
					<<else>>
						You lap and lick <<his>> pussy.
					<</if>>
				<<else>>
					<<if !$npcSub>>
						<<He>> rubs <<his>> pussy against your lips.
					<<else>>
						You continue to violate <<his>> pussy with your lips.
					<</if>>
				<</if>>

				<<if $NPCList[_n].type is "plant" and $mouthactiondefault isnot "vaginalick">>
					<span class="pink">You can taste sweet nectar.</span>
					<<nectarfed 8>>
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
					You can taste <<his>> juices.
				<</if>>
				<<sex 3 "mouth" _n>><<set $speechfacesit to 1>>
			<<else>>
				<<He>> gets up off of your face.
				<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].vagina is "facesitanal">>
			<<if $rng gt 10 or ($rng gt 5 and $enemyanger gte $enemyangermax / 10)>>
				<<if $worn.face.type.includes("covered") or $worn.face.type.includes("gag")>>
					<<switch random(0,2)>>
						<<case 0 1>>
							<<He>> grinds <<his>> ass against your $worn.face.name.
						<<case 2>>
							<span class="lblue"><<He>> moves <<his>> ass away from your mouth.</span>
							<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
					<</switch>>
				<<elseif $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
					<<He>> grinds <<his>> ass against your mouth.
				<<else>>
					<<He>> slowly moves <<his>> ass against your lips.
				<</if>>
				<<sex 3 "mouth" _n>><<set $speechmouthotheranus to 1>>
				<<if $mouthactiondefault is "anallick">>
					<<set $speechanallick to 1>>
				<<elseif $mouthactiondefault is "analkiss">>
					<<set $speechanalkiss to 1>>
				<</if>>
			<<elseif $rng gte 0>>
				<<He>> moves <<his>> ass away from your mouth, pressing <<his>> pussy down onto it as <<he>> changes <<his>> position.
				<<if $NPCList[_n].type is "plant">>
					<span class="pink">Nectar glistens at the entrance.</span>
				<</if>>
				<<set $mouthstate to "vagina">><<set $NPCList[_n].vagina to "facesit">>
				<<set $speechfacesit to 1>><<set $mouthtarget to _n>>
			<<else>>
				<<He>> gets up off of your face.
				<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].vagina to 0>>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].vagina is "mouthotheranus">>
			<<if $rng gte 1>>
				<<if $enemyarousal gte (($enemyarousalmax / 5) * 3)>>
					<<He>> grinds <<his>> ass against your mouth.
				<<else>>
					<<He>> slowly moves <<his>> ass against your lips.
				<</if>>
				<<sex 3 "mouth" _n>><<set $speechmouthotheranus to 1>>
				<<if $mouthactiondefault is "anallick">>
					<<set $speechanallick to 1>>
				<<elseif $mouthactiondefault is "analkiss">>
					<<set $speechanalkiss to 1>>
				<</if>>
			<<else>>
				<span class="purple"><<He>> moves <<his>> ass away from your face.</span>
				<<set $mouthuse to 0>><<set $mouthstate to 0>><<set $NPCList[_n].penis to 0>>
				<<set $NPCList[_n].location.genitals = 0>>
			<</if>>
		<</if>>

		<<if $NPCList[_n].vagina is 0 and $NPCList[_n].penis is 0>>
			<<if random(0,1) is 0>>
				<<vaginainit>>
				<<penisinit>>
			<<else>>
				<<penisinit>>
				<<vaginainit>>
			<</if>>
		<<elseif $NPCList[_n].vagina is 0>>
			<<vaginainit>>
		<<elseif $NPCList[_n].penis is 0>>
			<<penisinit>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].vagina is "leftDildo">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<if $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
						<<He>> <<print either("rhythmically","","")>> thrusts <<his>> pussy against your $currentSexToyLeft.name.
					<<else>>
						<<print either(
							`<<He>> thrusts <<his>> pussy up and down your dildo, fucking <<him>>self with a violent intensity as <<he>> approaches <<his>> peak.`,
							`<<He>> <<print either("forcefully","desperately","rhythmically")>> thrusts <<his>> pussy against your $currentSexToyLeft.name.`,
							`<<He>> <<print either("thrusts","grinds")>> <<his>> pussy against your $currentSexToyLeft.name in circular motions.`,
						)>>
						<<if $NPCList[$lefttarget].type is "plant">>Nectar drips<<else>>Fluids drip<</if>> down the toy.
					<</if>>
				<<else>>
					<<if $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
						You fuck <<his>> pussy with your $currentSexToyLeft.name.
					<<else>>
						You fuck <<his>> pussy with your $currentSexToyLeft.name. <<if $NPCList[$lefttarget].type is "plant">>Nectar drips<<else>>Fluids drip<</if>> down your toy.
					<</if>>
				<</if>>
				<<submission 2 _n>>
			<<else>>
				<<He>> moves your $currentSexToyLeft.name away from <<his>> pussy.
				<<set $leftarm to 0>><<set $NPCList[_n].vagina to 0>><<set $leftactiondefault to "dildoOtherPussyFuck">>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "rightDildo">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<if $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
						<<He>> <<print either("rhythmically","","")>> thrusts <<his>> pussy against your $currentSexToyLeft.name.
					<<else>>
						<<print either(
							`<<He>> thrusts <<his>> pussy up and down your dildo, fucking <<him>>self with a violent intensity as <<he>> approaches <<his>> peak.`,
							`<<He>> <<print either("forcefully","desperately","rhythmically")>> thrusts <<his>> pussy against your $currentSexToyLeft.name.`,
							`<<He>> <<print either("thrusts","grinds")>> <<his>> pussy against your $currentSexToyLeft.name in circular motions.`,
						)>>
						<<if $NPCList[$lefttarget].type is "plant">>Nectar drips<<else>>Fluids drip<</if>> down your toy.
					<</if>>
				<<else>>
					<<if $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
						You fuck <<his>> pussy with your $currentSexToyLeft.name.
					<<else>>
						You fuck <<his>> pussy with your $currentSexToyLeft.name. <<if $NPCList[$lefttarget].type is "plant">>Nectar drips<<else>>Fluids drip<</if>> from <<his>> pussy.
					<</if>>
				<</if>>
				<<submission 2 _n>>
			<<else>>
				<<He>> moves your $currentSexToyRight.name away from <<his>> pussy.
				<<set $rightarm to 0>><<set $NPCList[_n].vagina to 0>><<set $rightactiondefault to "dildoOtherPussyFuck">>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].vagina is "leftDildoAnus">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> thrusts <<his>> ass against your $currentSexToyLeft.name.
					<<submission 2 _n>>
				<<else>>
					You fuck <<his>> ass with your $currentSexToyLeft.name.
				<</if>>
			<<else>>
				<<He>> moves your $currentSexToyLeft.name away from <<his>> ass.
				<<set $leftarm to 0>><<set $NPCList[_n].vagina to 0>><<set $leftactiondefault to "dildoOtherAnusFuck">>
			<</if>>
		<</if>>
		<<if $NPCList[_n].penis is "leftDildoAnus">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> thrusts <<his>> ass against your $currentSexToyLeft.name.
					<<submission 2 _n>>
				<<else>>
					You fuck <<his>> ass with your $currentSexToyLeft.name.
				<</if>>
			<<else>>
				<<He>> moves your $currentSexToyLeft.name away from <<his>> ass.
				<<set $leftarm to 0>><<set $NPCList[_n].penis to 0>><<set $leftactiondefault to "dildoOtherAnusFuck">>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].vagina is "rightDildoAnus">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> thrusts <<his>> ass against your $currentSexToyRight.name.
					<<submission 2 _n>>
				<<else>>
					You fuck <<his>> ass with your $currentSexToyRight.name.
				<</if>>
			<<else>>
				<<He>> moves your $currentSexToyRight.name away from <<his>> ass.
				<<set $rightarm to 0>><<set $NPCList[_n].vagina to 0>><<set $rightactiondefault to "dildoOtherAnusFuck">>
			<</if>>
		<</if>>
		<<if $NPCList[_n].penis is "rightDildoAnus">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> thrusts <<his>> ass against your $currentSexToyRight.name.
					<<submission 2 _n>>
				<<else>>
					You fuck <<his>> ass with your $currentSexToyRight.name.
				<</if>>
			<<else>>
				<<He>> moves your $currentSexToyRight.name away from <<his>> ass.
				<<set $rightarm to 0>><<set $NPCList[_n].penis to 0>><<set $rightactiondefault to "dildoOtherAnusFuck">>
			<</if>>
		<</if>>

		<<rng>>
		<<if $NPCList[_n].penis is "leftStroker">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> fucks your $currentSexToyLeft.name with steady thrusts.
					<<submission 2 _n>>
				<<else>>
					You fuck <<his>> <<npcPenis _n>> with your $currentSexToyLeft.name.
				<</if>>
			<<else>>
				<<He>> moves your $currentSexToyLeft.name away from <<his>> <<npcPenisSimple _n>>.
				<<set $leftarm to 0>><<set $NPCList[_n].vagina to 0>><<set $leftactiondefault to "dildoOtherPussyFuck">>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].penis is "rightstroker">>
			<<if $rng gte 1>>
				<<if !$npcSub>>
					<<He>> fucks your $currentSexToyRight.name with steady thrusts.
					<<submission 2 _n>>
				<<else>>
					You fuck <<his>> <<npcPenisSimple _n>> with your $currentSexToyRight.name.
				<</if>>
			<<else>>
				<<He>> moves your $currentSexToyRight.name away from <<his>> <<npcPenisSimple _n>>.
				<<set $rightarm to 0>><<set $NPCList[_n].penis to 0>><<set $rightactiondefault to "dildoOtherPussyFuck">>
			<</if>>
		<</if>>

		<!-- CHEST START -->

		<<rng>>
		<<if $NPCList[_n].chest is "clothed" and $npcSub isnot 1>>
			<<if ($NPCList[_n].pronoun is "f" and ($NPCList[_n].lactation is 1 or $rng lte ($enemyarousal - 80))) or
			($rng lte 15 and $enemyarousal gte 105)>>
				<<if not $gloryhole>>
					<span class="blue"><<He>> <<npcUndressText $NPCList[_n] "upper" "self">>, <<npcRevealText $NPCList[_n] "upper">>.</span>
				<<else>>
					You faintly hear fabric sliding on the other side. <<He>> must have taken off some clothing.
				<</if>>
				<<set $NPCList[_n].chest to 0>>
			<</if>>
		<</if>>
		<<chest_section>>

		<!-- MOUTH START -->

		<<rng>>
		<<if $NPCList[_n].mouth is "thigh">>
			<<He>> kisses and licks your thigh.
			<<neutral 5 _n>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "bottom">>
			<<He>> kisses and licks your <<bottom>>.
			<<neutral 5 _n>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "anus">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> retracts <<his>> tongue from your anus.</span>
				<<sex 30 "anal" _n>><<set $NPCList[_n].mouth to "anusimminent">><<bruise anus>><<violence 1>><<set $anusstate to "othermouthimminent">>
			<<elseif $rng gte 1>>
				<<if $enemyarousal lte ($enemyarousalmax / 5)>>
					<<He>> caresses your anus with <<his>> tongue.
					<<sex 30 "anal" _n>><<bruise anus>><<violence 1>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 2)>>
					<<His>> tongue probes inside your <<bottom>>.
					<<sex 30 "anal" _n>><<bruise anus>><<violence 1>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 3)>>
					<<He>> circles <<his>> tongue inside your <<bottom>>.
					<<sex 30 "anal" _n>><<bruise anus>><<violence 1>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
					<<He>> presses <<his>> mouth firmly against your <<bottom>>, letting <<him>> push <<his>> tongue deeper into your anus.
					<<sex 30 "anal" _n>><<bruise anus>><<violence 1>>
				<<else>>
					Repeatedly thrusting and retracting, <<he>> fucks your <<bottom>> with <<his>> tongue.
					<<sex 30 "anal" _n>><<bruise anus>><<violence 1>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "anusimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> tongue against your anus.</span>
				<<set $NPCList[_n].mouth to "anusentrance">><<set $anusstate to "othermouthentrance">>
			<<elseif $rng gte 1>>
				<<if $noanal is 0 and $worn.genitals.anus_exposed is 0>>
					<<He>> uses <<his>> tongue to lick around your $worn.genitals.name attempting to get past it.
					<<sex 25 "genital" _n>><<set $worn.genitals.integrity -= 10>>
				<<elseif $noanal is 1 and $worn.genitals.anus_exposed is 0>>
					<<He>> uses <<his>> tongue to lick around your $worn.genitals.name.
					<<sex 30 "genital" _n>>
				<<elseif $noanal is 0>>
					<<if $player.virginity.anal isnot true or $virginitytest isnot 1>>
						<span class="pink"><<He>> pushes <<his>> tongue into your anus.</span>
						<<sex 30 "anal" _n>><<violence 1>>
					<<elseif $player.virginity.anal is true>>
						<span class="pink"><<He>> pushes <<his>> tongue into your virgin anus,</span><span class="red"> violating you in a way you hadn't conceived of.</span>
						<<sex 100 "anal" _n>><<takeVirginity $NPCList[_n].fullDescription "anal">><<violence 100>>
					<</if>>
					<<analstat>><<set $NPCList[_n].mouth to "anus">><<bruise anus>><<set $anusstate to "othermouth">>
					<<if $virginitytest is 1>><<raped>><<anusraped>><</if>>
				<<else>>
					Respecting your wishes, <<he>> does not penetrate your <<bottom>> with <<his>> tongue, instead licking your anus.
					<<sex 15 "anal" _n>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "anusentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> head away from your <<bottom>>.</span>
				<<set $NPCList[_n].mouth to 0>><<set $anususe to 0>><<set $anusstate to 0>>
				<<if $NPCList[_n].vagina is "othermouth">>
					<<set $NPCList[_n].vagina to 0>>
				<</if>>
				<<if $NPCList[_n].penis is "othermouth">>
					<<set $NPCList[_n].penis to 0>>
				<</if>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.anus_exposed is 0>>
					<<He>> circles <<his>> tongue around your anus through your $worn.over_lower.name.
					<<sex 5 "anal" _n>><<set $worn.over_lower.integrity -= 10>>
				<<elseif $worn.lower.anus_exposed is 0>>
					<<He>> circles <<his>> tongue around your anus through your $worn.lower.name.
					<<sex 5 "anal" _n>><<set $worn.lower.integrity -= 10>>
				<<elseif $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.anus_exposed is 0>>
						<<He>> circles <<his>> tongue around your anus through your $worn.under_lower.name.
						<<sex 5 "anal" _n>><<set $worn.under_lower.integrity -= 10>>
					<<elseif $worn.genitals.anus_exposed is 0>>
						<<He>> prods your $worn.genitals.name with <<his>> tongue.
						<<sex 5 "anal" _n>><<set $worn.genitals.integrity -= 10>>
					<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
						<<if $rng gte 71>>
							<<if $noanal is 0 and playerChastity("anus")>>
								<span class="purple"><<He>> presses <<his>> tongue against your $worn.genitals.name near your anus.</span>
								<<sex 20 "anal" _n>><<set $NPCList[_n].mouth to "anusimminent">><<set $anusstate to "othermouthimminent">>
							<<elseif $noanal is 1>>
								<span class="purple"><<He>> presses <<his>> tongue against your anus.</span>
								<<sex 20 "anal" _n>><<set $NPCList[_n].mouth to "anusimminent">><<set $anusstate to "othermouthimminent">>
							<<else>>
								<span class="purple"><<He>> presses <<his>> tongue against your anus, preparing to penetrate you.</span>
								<<sex 20 "anal" _n>><<set $NPCList[_n].mouth to "anusimminent">><<set $anusstate to "othermouthimminent">>
							<</if>>
						<<elseif $rng gte 1>>
							<<He>> kisses and licks your <<bottom>>.
							<<sex 10 "anal" _n>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "vagina">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> retracts <<his>> tongue from your <<pussy>>.</span>
				<<sex 30 "genital" _n>><<set $NPCList[_n].mouth to "vaginaimminent">><<bruise vagina>><<violence 1>><<set $vaginastate to "othermouthimminent">>
			<<elseif $rng gte 1>>
				<<if $enemyarousal lte ($enemyarousalmax / 5)>>
					<<He>> caresses your vagina with <<his>> tongue.
					<<sex 30 "genital" _n>><<bruise vagina>><<violence 1>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 2)>>
					<<He>> presses down on your <<clit>> with <<his>> teeth while exploring your vagina with <<his>> tongue.
					<<sex 30 "genital" _n>><<bruise vagina>><<violence 1>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 3)>>
					<<He>> circles <<his>> tongue around your vagina.
					<<sex 30 "genital" _n>><<bruise vagina>><<violence 1>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
					<<He>> presses <<his>> mouth firmly against your <<pussy>>, then pushes <<his>> tongue deeper into your vagina. <<He>> slowly pulls out again, then takes a deep breath.
					<<sex 30 "genital" _n>><<bruise vagina>><<violence 1>>
				<<else>>
					Repeatedly thrusting and retracting, <<he>> fucks your <<pussy>> with <<his>> tongue.
					<<sex 30 "genital" _n>><<bruise vagina>><<violence 1>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "vaginaimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> tongue against your <<pussy>>.</span>
				<<set $NPCList[_n].mouth to "vaginaentrance">><<set $vaginastate to "othermouthentrance">>
			<<elseif $rng gte 1>>
				<<if $novaginal is 0 and playerChastity("vagina")>>
					<<He>> licks around your $worn.genitals.name, attempting to get past it.
					<<sex 25 "genital" _n>><<set $worn.genitals.integrity -= 10>>
				<<elseif $novaginal is 1 and playerChastity("vagina")>>
					<<He>> licks around your $worn.genitals.name.
					<<sex 30 "genital" _n>>
				<<elseif $novaginal is 0>>
					<<if $player.virginity.vaginal isnot true or $virginitytest isnot 1>>
						<span class="pink"><<He>> pushes <<his>> tongue between your <<pussy>> lips.</span>
						<<sex 30 "genital" _n>>
					<<elseif $player.virginity.vaginal is true>>
						<span class="pink"><<He>> pushes <<his>> tongue into your virgin pussy,</span><span class="red"> breaking your hymen and <<virginitylosttext $NPCList[_n].fullDescription>></span>
						<<sex 100 "genital" _n>><<takeVirginity $NPCList[_n].fullDescription "vaginal">><<violence 100>>
					<</if>>
					<<vaginalstat>><<set $NPCList[_n].mouth to "vagina">><<bruise vagina>><<violence 1>><<set $vaginastate to "othermouth">>
					<<if $virginitytest is 1>><<raped>><<vaginaraped>><</if>>
				<<else>>
					Respecting your wishes, <<he>> does not penetrate your <<pussy>> with <<his>> tongue, instead running <<his>> tongue up and down your labia.
					<<sex 15 "genital" _n>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "vaginaentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> head away from your <<pussy>>.</span>
				<<set $NPCList[_n].mouth to 0>><<set $vaginause to 0>><<set $vaginastate to 0>>
				<<if $NPCList[_n].vagina is "othermouth">>
					<<set $NPCList[_n].vagina to 0>>
				<</if>>
				<<if $NPCList[_n].penis is "othermouth">>
					<<set $NPCList[_n].penis to 0>>
				<</if>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.vagina_exposed is 0>>
					<<He>> traces the outline of your <<pussy>> with <<his>> tongue through your $worn.over_lower.name.
					<<sex 5 "genital" _n>><<set $worn.over_lower.integrity -= 10>>
				<<elseif $worn.lower.vagina_exposed is 0>>
					<<He>> traces the outline of your <<pussy>> with <<his>> tongue through your $worn.lower.name.
					<<sex 5 "genital" _n>><<set $worn.lower.integrity -= 10>>
				<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.vagina_exposed is 0>>
						<<He>> traces the outline of your <<pussy>> with <<his>> tongue through your $worn.under_lower.name.
						<<sex 5 "genital" _n>><<set $worn.under_lower.integrity -= 10>>
					<<elseif $worn.under_lower.vagina_exposed is 1>>
						<<if $rng gte 71>>
							<<if $novaginal is 0 and playerChastity("vagina")>>
								<span class="purple"><<He>> presses <<his>> lips against your $worn.genitals.name, near your <<pussy>>.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].mouth to "vaginaimminent">><<set $vaginastate to "othermouthimminent">>
							<<elseif $novaginal is 1>>
								<span class="purple"><<He>> presses <<his>> lips against your <<pussy>>.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].mouth to "vaginaimminent">><<set $vaginastate to "othermouthimminent">>
							<<else>>
								<span class="purple"><<He>> presses <<his>> lips against your <<pussy>>, preparing to fuck you with <<his>> tongue.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].mouth to "vaginaimminent">><<set $vaginastate to "othermouthimminent">>
							<</if>>
						<<elseif $rng gte 1>>
							<<if !playerChastity("vagina")>>
								<<He>> blows on your <<clit>> and runs <<his>> tongue around your labia.
								<<sex 10 "genital" _n>>
							<<else>>
								<<He>> stares at your $worn.genitals.name.
								<<sex 5 "genital" _n>>
							<</if>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "penis">>
			<<if $rng gte 101>>
				<span class="purple"><<He>> moves <<his>> head back, releasing your <<penis>> from <<his>> mouth.</span>
				<<sex 30 "genital" _n>><<set $NPCList[_n].mouth to "penisimminent">><<set $penisstate to "othermouthimminent">>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<<elseif $rng gte 1>>
				<<if $enemyarousal lte ($enemyarousalmax / 5)>>
					<<He>> slowly caresses your shaft with <<his>> tongue.
					<<sex 30 "genital" _n>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 2)>>
					Eyes fixed on your face, <<he>> wraps <<his>> tongue around your <<penis>> and sucks.
					<<sex 30 "genital" _n>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 3)>>
					<<He>> squeezes <<his>> lips around your <<penis>>, and circles <<his>> tongue around your <<glans>>.
					<<sex 30 "genital" _n>>
				<<elseif $enemyarousal lte (($enemyarousalmax / 5) * 4)>>
					<<He>> takes you deeper into <<his>> mouth, until your <<penis>> disappears inside <<him>> completely. <<He>> slowly pushes you out again, then takes a deep breath.
					<<sex 30 "genital" _n>>
				<<else>>
					<<He>> repeatedly swallows and expels your <<penis>>, fucking you with <<his>> mouth.
					<<sex 30 "genital" _n>>
				<</if>>
				<<if playerHasStrapon()>><<violence 1 1 1 0>>
				<<else>><<bruise penis>><<violence 1>><</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "penisimminent">>
			<<if $rng gte 101>>
				<span class="blue"><<He>> stops pressing <<his>> lips against your <<penis>>.</span>
				<<set $NPCList[_n].mouth to "penisentrance">><<set $penisstate to "othermouthentrance">>
			<<elseif $rng gte 1>>
				<<if $worn.genitals.name is "chastity parasite">>
					<<He>> licks your $worn.genitals.name, <span class="lewd">the parasite parasite sends a wave of pleasure through your <<penis>>.</span> Your reaction causes <<him>> to continue.
					<<arousal 400 "genitals">><<if !$earSlime.defyCooldown and $earSlime.vibration lt 120>><<set $earSlime.vibration += 10>><</if>>
					<<sex 30 "genital" _n>><<set $worn.genitals.integrity -= 5>>
				<<elseif $nopenile is 0 and playerChastity("penis")>>
					<<He>> licks around your $worn.genitals.name, near your <<penis>>, attempting to get past it.
					<<sex 25 "genital" _n>><<set $worn.genitals.integrity -= 10>>
				<<elseif $nopenile is 1 and playerChastity("penis")>>
					<<He>> licks around your $worn.genitals.name, near your <<penis>>.
					<<sex 30 "genital" _n>>
				<<elseif $nopenile is 0>>
					<<if playerHasStrapon() or $player.virginity.penile isnot true or $virginitytest isnot 1>>
						<span class="pink"><<He>> pushes <<his>> lips against your <<penis>>, taking you into <<his>> mouth.</span>
						<<sex 30 "genital" _n>>
						<<violence 1 1 1 `+playerHasStrapon()`>>
					<<elseif $player.virginity.penile is true>>
						<span class="pink"><<He>> pushes <<his>> lips against your virgin penis, taking you into <<his>> mouth,</span><span class="red"> separating your foreskin from your glans and <<virginitylosttext $NPCList[_n].fullDescription>></span>
						<<sex 100 "genital" _n>><<takeVirginity $NPCList[_n].fullDescription "penile">><<violence 100>>
					<</if>>
					<<penilestat>><<takeNPCVirginity _n "oral">><<set $NPCList[_n].mouth to "penis">><<set $penisstate to "othermouth">>
					<<if $virginitytest is 1 and !playerHasStrapon()>><<bruise penis>><<raped>><<penisraped>><</if>>
				<<else>>
					Respecting your wishes, <<he>> does not envelope your <<penis>> with <<his>> mouth, instead kissing the tip of your <<glans>>.
					<<sex 15 "genital" _n>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "penisentrance">>
			<<if $rng gte 101>>
				<span class="lblue"><<He>> moves <<his>> head away from your <<penis>>.</span>
				<<set $NPCList[_n].mouth to 0>><<set $penisuse to 0>><<set $penisstate to 0>>
				<<if $NPCList[_n].vagina is "othermouth">>
					<<set $NPCList[_n].vagina to 0>>
				<</if>>
				<<if $NPCList[_n].penis is "othermouth">>
					<<set $NPCList[_n].penis to 0>>
				<</if>>
			<<elseif $rng gte 1>>
				<<if $worn.over_lower.vagina_exposed is 0>>
					<<He>> traces the outline of your <<penis>> with <<his>> tongue through your $worn.over_lower.name.
					<<sex 5 "genital" _n>><<set $worn.over_lower.integrity -= 10>>
				<<elseif $worn.lower.vagina_exposed is 0>>
					<<He>> traces the outline of your <<penis>> with <<his>> tongue through your $worn.lower.name.
					<<sex 5 "genital" _n>><<set $worn.lower.integrity -= 10>>
				<<elseif $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
					<<rng>>
					<<if $worn.under_lower.vagina_exposed is 0>>
						<<He>> traces the outline of your <<penis>> with <<his>> tongue through your $worn.under_lower.name.
						<<sex 5 "genital" _n>><<set $worn.under_lower.integrity -= 10>>
					<<elseif $worn.under_lower.vagina_exposed is 1>>
						<<if $rng gte 71>>
							<<if playerChastity("penis")>>
								<span class="purple"><<He>> tries to wriggle <<his>> tongue into your $worn.genitals.name, eager to taste your <<penis>>.</span>
								<<sex 20 "genital" _n>>
							<<elseif $nopenile is 1>>
								<span class="purple"><<He>> presses <<his>> lips against your <<penis>>.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].mouth to "penisimminent">><<set $penisstate to "othermouthimminent">>
							<<else>>
								<span class="purple"><<He>> presses <<his>> lips against your <<penis>>, preparing to take you in <<his>> mouth proper.</span>
								<<sex 20 "genital" _n>><<set $NPCList[_n].mouth to "penisimminent">><<set $penisstate to "othermouthimminent">>
							<</if>>
						<<elseif $rng gte 1>>
							<<if !playerChastity("penis")>>
								<<He>> blows on and licks the tip of your <<penis>>.
								<<sex 10 "genital" _n>>
							<<else>>
								<<He>> stares at your $worn.genitals.name.
								<<sex 5 "genital" _n>>
							<</if>>
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "kiss">>
			<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
				<<if $rng gte 101>>
					<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
					<<set $NPCList[_n].mouth to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
					<<set $NPCList[_n].location.head to 0>>
				<<else>>
					<<if $robinDungeonKiss>>
						<<undergroundRobinKiss $mouthactiondefault>>
					<<elseif $npcSub>>
						<<He>> nervously follows your lead, allowing you to explore <<his>> mouth with your tongue.
					<<elseif $enemyanger lte 20>>
						<<He>> explores your mouth with <<his>> tongue.
						<<sex 2 "mouth" _n>>
					<<else>>
						<<He>> thrusts <<his>> tongue deep into your mouth.
						<<violence 1>>
					<</if>>
					<<if $NPCList[_n].type is "plant" and $mouthactiondefault isnot "kissback">>
						<span class="pink">Sweet nectar drips from <<his>> tongue and fills your mouth.</span>
						<<nectarfed 20>>
					<</if>>
				<</if>>
			<<else>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
				<<set $mouthuse to 0>><<set $NPCList[_n].mouth to 0>><<set $mouthstate to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "kissimminent">>
			<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
				<<if $rng gte 101>>
					<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
					<<set $NPCList[_n].mouth to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
					<<set $NPCList[_n].location.head to 0>>
				<<elseif $worn.face.type.includes("covered") or $worn.face.type.includes("gag")>>
					<<switch random(0,2)>>
						<<case 0 1>>
							<<He>> pushes <<his>> lips against your $worn.face.name. <<He>> seems disappointed.
							<<damageFaceCover 2>>
							<<if $consensual isnot 1>>
								<<brat 2>>
							<</if>>
						<<case 2>>
							<span class="lblue"><<He>> moves <<his>> penis away from your mouth.</span>
							<<set $NPCList[_n].penis to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
							<<if $consensual isnot 1>>
								<<brat 2>>
							<</if>>
					<</switch>>
				<<elseif $rng lte 100>>
					<<He>> pushes <<his>> tongue between your lips.
					<<set $NPCList[_n].mouth to "kiss">><<set $mouthstate to "kiss">><<sex 2 "mouth" _n>>
					<<if $NPCList[_n].type is "plant" and $mouthactiondefault isnot "kissback">>
						<span class="pink">Sweet nectar fills your mouth.</span>
						<<nectarfed 20>>
					<</if>>
				<<else>>
					<<if $enemyanger lte 20>>
						<<He>> gently probes your lips with <<his>> tongue.
						<<sex 2 "mouth" _n>>
					<<else>>
						<<He>> bites and toys with your lips.
						<<violence 1>>
					<</if>>
				<</if>>
			<<else>>
				<span class="lblue"> <<He>> pulls <<his>> mouth away from yours.</span>
				<<set $mouthuse to 0>><<set $NPCList[_n].mouth to 0>><<set $mouthstate to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "kissentrance">>
			<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
				<<if $rng gte 101>>
					<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
					<<set $NPCList[_n].mouth to 0>><<set $mouthuse to 0>><<set $mouthstate to 0>>
					<<set $NPCList[_n].location.head to 0>>
				<<elseif $rng lte 100>>
					<<He>> pulls you closer and presses your lips together in a kiss.
					<<if $NPCList[_n].type is "plant" and !$player.virginity.kiss>>
						<span class="pink">Sweet nectar drips from <<his>> tongue and fills your mouth.</span>
						<<nectarfed 50>>
					<</if>>
					<<if $player.virginity.kiss is true>>
						<<set $speechkissvirgin to 1>>
						<<if $npcrow.includes(_n)>>
							<<takeKissVirginityNamed `$npc[$npcrow.indexOf(_n)]`>>
						<<else>>
							<<takeKissVirginity $NPCList[_n] `($consensual is 1?"":"rape")`>>
						<</if>>
					<</if>>
					<<set $NPCList[_n].mouth to "kissimminent">><<set $mouthstate to "kissimminent">><<sex 2 "mouth" _n>>
				<<else>>
					<<if $enemyanger lte 20>>
						<<He>> gently brushes <<his>> lips against yours.
						<<sex 1 "mouth" _n>>
					<<else>>
						<<He>> bites your lower lip.
						<<violence 1>>
					<</if>>
				<</if>>
			<<else>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from yours.</span>
				<<set $mouthuse to 0>><<set $NPCList[_n].mouth to 0>><<set $mouthstate to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "chest">>
			<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
				<<if $enemyanger gte 100>>
					<<if $milk_amount gte 1>>
						<<He>> sucks your <<nipple>>. <<Hes>> rough, biting and squeezing. Milk leaks from the tip.
						<<breastfeed>>
						<<violence 5>>
					<<else>>
						<<He>> sucks your <<nipple>>. <<Hes>> rough, biting and squeezing. Despite <<his>> efforts, no milk comes out. You've been sucked dry.
						<<milkvolume 1>>
						<<set $cheststate to "chestimminent">><<set $NPCList[_n].mouth to "chestimminent">>
						<<violence 3>>
					<</if>>
				<<else>>
					<<if $milk_amount gte 1>>
						<<He>> continues to suck your <<nipple>>. Milk leaks from the tip.
						<<breastfeed>>
						<<sex 5 "breast" _n>>
					<<else>>
						<<He>> continues to suck your <<nipple>>, but no milk comes out. You've been sucked dry.
						<<milkvolume 1>>
						<<set $cheststate to "chestimminent">><<set $NPCList[_n].mouth to "chestimminent">>
						<<sex 3 "breast" _n>>
					<</if>>
				<</if>>
			<<else>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from your chest.</span>
				<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "chestimminent">>
			<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
				<<if $lactating is 1 and $breastfeedingdisable is "f" and $milk_amount gte 1>>
					<span class="pink"><<He>> takes your <<nipple>> into <<his>> mouth. You feel milk leak from your tip.</span>
					<<breastfeed>>
					<<set $cheststate to "chest">><<set $NPCList[_n].mouth to "chest">><<sex 5 "breast" _n>>
					<<milkvolume 1>><<set $enemyanger -= 10>>
				<<else>>
					<<if random(1, 100) gte 81>>
						<<He>> pulls <<his>> head away from your chest.
						<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
					<<else>>
						<<if $enemyanger gte 100>>
							<<He>> kneads your <<nipple>> between <<his>> teeth.
							<<violence 3>>
						<<else>>
							<<He>> sucks your <<nipple>> while <<his>> tongue works the tip.
							<<sex 3 "breast" _n>>
						<</if>>
						<<milkvolume 1>>
					<</if>>
				<</if>>
			<<else>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from your chest.</span>
				<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<if $NPCList[_n].mouth is "chestentrance">>
			<<if $speechvaginavirgin isnot 1 and $speechpenisvirgin isnot 1 and $speechanusvirgin isnot 1 and $speechmouthvirgin isnot 1>>
				<<if $enemyanger gte 100>>
					<<He>> bites your <<nipple>>, hard enough to hurt.
					<<set $NPCList[_n].mouth to "chestimminent">><<set $cheststate to "chestimminent">>
					<<violence 3>>
				<<else>>
					<<He>> presses the tip of <<his>> tongue against your <<nipple>>, licking and teasing.
					<<set $NPCList[_n].mouth to "chestimminent">><<set $cheststate to "chestimminent">>
					<<sex 3 "breast" _n>>
				<</if>>
				<<milkvolume 1>>
			<<else>>
				<span class="lblue"><<He>> pulls <<his>> mouth away from your chest.</span>
				<<set $chestuse to 0>><<set $cheststate to 0>><<set $NPCList[_n].mouth to 0>>
				<<set $NPCList[_n].location.head to 0>>
			<</if>>
		<</if>>
		<<rng>>
		<<namedNpcComments $NPCList[_n].fullDescription>>
		<<if ($NPCList[_n].mouth is 0 or $NPCList[_n].mouth is "speech_only" or ($NPCList[_n].type is "plant" and $speechkissvirgin is 1)) and $speechdisable isnot 1 and _noNameComment>>
			<<if $role is "islander" and (!$islander_language or $islander_language lt 100)>>
				<<He>> speaks and gesticulates in <<his>> incomprehensible language.
			<<elseif $NPCList[_n].type is "plant">>
				<<plantspeech>>
			<<elseif $combatgoal is "strip">>
				<<rng>>
				<<if $rng lte 25>>
					<<if $enemyanger lte 60>>
						<<He>> speaks.
						"<<print either("Let me take all these clothes off.",
						"Let's get you naked.",
						"I think you enjoy being stripped naked!",
						"You don't need clothes.",
						"You need to be naked!")>>"
					<<else>>
						<<He>> speaks.
						"<<print either("I'll rip your clothes off if I need to!",
						"I'll get you naked one way or another!",
						"I want your clothes gone!",
						"You like being stripped naked, don't you!",
						"You don't deserve clothes.",
						"I want you nude!")>>"
					<</if>>
				<</if>>
			<<elseif $speechvaginavirgin is 1 and $NPCList[_n].penis is "vagina">>
				<<if $enemyanger lte 60>>
					<<He>> speaks. "You were a virgin! I can't believe my luck!"
				<<else>>
					<<He>> speaks. "I felt your hymen tear bitch. Something to remember me by."
				<</if>>
			<<elseif $speechpenisvirgin is 1 and ($NPCList[_n].vagina is "penis" or $NPCList[_n].vagina is "otheranus" or $NPCList[_n].penis is "otheranus")>>
				<<if $enemyanger lte 60>>
					<<He>> speaks. "AHH! This was your first time wasn't it? It feels so good!"
				<<else>>
					<<He>> speaks. "How's it feel to have your virgin dick broken in? Feels amazing for me."
				<</if>>
			<<elseif $speechanusvirgin is 1 and $NPCList[_n].penis is "anus">>
				<<if $enemyanger lte 60>>
					<<He>> speaks. "It's so tight! This must be the first time your ass has been used like this."
				<<else>>
					<<He>> speaks. "It's so tight! This must be the first time your ass has been used like this. I've got plenty more work to do before you're properly broken in."
				<</if>>
			<<elseif $speechmouthvirgin is 1 and $NPCList[_n].penis is "mouth">>
				<<if $enemyanger lte 60>>
					<<He>> speaks. "Is this the first time you've tasted dick?"
				<<else>>
					<<He>> speaks. "Is this the first time you've tasted dick? You'll be a cum-addicted cock slave soon."
				<</if>>
			<<elseif $speechspray is 1>>
				<<sprayspeech>>
			/* 北极星模组 */
			<<elseif $speechdragonbreath is 1>>
				<<He>><<print either("尖叫着","抽泣着","大喊着","呼喊着")>><<print either(`："好痛！"`,`陷入狂乱。`)>>
				<<unset $speechdragonbreath>>
			/* 北极星 */
			<<elseif $speechcum is 1 and $rng gte 61 and $speechorgasmrepeat lte 1 and $speechorgasmcount lte 6>>
				<<cumspeech>>
			<<elseif $rng gte 91>>
				<<if not $gloryhole>>
					<<basespeech>><<neutral 1 _n>>
				<<else>>
					<<basegloryholespeech>><<neutral 1 _n>>
				<</if>>
			<<elseif $rng gte 61>>
				<<combatspeech _n>><<neutral 1 _n>>
			<<elseif $rng gte 41 and !$gloryhole>>
				<<clothesspeech>>
			<<elseif !$gloryhole>>
				<<rng>>
				<<if $enemyanger + $rng lte 20>>
					<<He>> ?admires your body.
					<<neutral 1 _n>>
				<<elseif $enemyanger + $rng lte 25>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> ?admires your helpless <<bottom>>.
						<<neutral 1 _n>>
						<<bodypart_admire random_bottom>>
					<<else>>
						<<He>> ?admires your hair.
						<<neutral 1 _n>>
						<<bodypart_admire_chance random_shoulder>>
					<</if>>
				<<elseif $enemyanger + $rng lte 30>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> ?admires your helpless hips.
						<<neutral 1 _n>>
						<<bodypart_admire pubic>>
					<<else>>
						<<He>> ?admires your chest.
						<<neutral 1 _n>>
						<<bodypart_admire breasts>>
					<</if>>
				<<elseif $enemyanger + $rng lte 35>>
					<<if $walltype is "front">>
						<<He>> ?admires your face.
						<<neutral 1 _n>>
						<<bodypart_admire random_cheek>>
					<<else>>
						<<He>> ?admires your legs.
						<<neutral 1 _n>>
						<<bodypart_admire random_thigh>>
					<</if>>
				<<elseif $enemyanger + $rng lte 40>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> ?admires your helpless legs.
						<<neutral 1 _n>>
						<<bodypart_admire random_thigh>>
					<<elseif $chestuse is 0 and $NPCList[_n].location.genitals isnot "head" and $NPCList[_n].location.head isnot "head" and $NPCList[_n].location.head isnot "genitals">>
						<<set $NPCList[_n].mouth to "chestentrance">><<set $chestuse to "mouth">><<set $cheststate to "mouthentrance">><<set $chesttarget to _n>>
						<span class="blue"><<He>> moves <<his>> head to your chest.</span>
						<<neutralbreast 1 _n>>
						<<bodypart_admire breasts>>
						<<set $NPCList[_n].location.head to "head">>
					<<else>>
						<<He>> leers at your <<breasts>>.
					<</if>>
				<<elseif $enemyanger + $rng lte 45>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> kisses your helpless thighs.
						<<neutral 3 _n>>
						<<bodypart_admire random_thigh>>
					<<else>>
						<<He>> kisses you on the forehead.
						<<neutral 3 _n>>
						<<bodypart_admire forehead>>
					<</if>>
				<<elseif $enemyanger + $rng lte 50>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> kisses you on the hips.
						<<neutral 3 _n>>
						<<bodypart_admire random_bottom>>
					<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
						<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
						<<neutral 10 _n>>
					<<else>>
						<<He>> kisses you on the cheek.
						<<neutral 3 _n>>
						<<bodypart_admire random_cheek>>
					<</if>>
				<<elseif $enemyanger + $rng lte 55>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> licks your helpless thighs.
						<<neutral 3 _n>>
						<<bodypart_admire random_thigh>>
					<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
						<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
						<<neutral 10 _n>>
					<<else>>
						<<He>> kisses your neck.
						<<neutral 3 _n>>
						<<bodypart_admire breasts>>
					<</if>>
				<<elseif $enemyanger + $rng lte 60>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> licks your helpless hips.
						<<neutral 3 _n>>
						<<bodypart_admire random_bottom>>
					<<else>>
						<<cheeklick _n>>
					<</if>>
				<<elseif $enemyanger + $rng lte 80>>
					<<neutral 10 _n>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> licks your helpless legs.
						<<neutral 3 _n>>
						<<bodypart_admire random_thigh>>
					<<else>>
						<<if $mouthuse is 0 and !$worn.face.type.includes("covered") and !$worn.face.type.includes("gag")>>
							<<if $NPCList[_n].penis is "chest">>
								<<combatspeech _n>><<neutral 1 _n>>
							<<elseif $NPCList[_n].location.genitals isnot "head">>
								<span class="blue"><<He>> moves <<his>> lips close to yours, about to kiss.</span>
								<<set $mouthuse to "kiss">><<set $mouthstate to "kissentrance">><<set $NPCList[_n].mouth to "kissentrance">><<sex 1 "mouth" _n>>
								<<set $NPCList[_n].location.head = "head">><<set $mouthtarget to _n>>
							<</if>>
						<<else>>
							<<cheeklick _n>>
						<</if>>
					<</if>>
				<<elseif $enemyanger + $rng lte 84 and $anususe is 0 and $analingusdisablereceiving is "f" and $NPCList[_n].location.head is 0 and $NPCList[_n].location.genitals isnot "genitals" and $walltype isnot "front">>
					<<neutral 10 _n>>
					<<if $NPCList[_n].location.genitals is "head">>
						<span class="blue">You feel <<him>> lean forward along your body, then you feel <<his>> breath on your <<bottom>>.</span>
					<<else>>
						<span class="blue"><<He>> kneels behind you. You feel <<his>> breath on your <<bottom>>.</span>
					<</if>>
					<<set $anususe to "othermouth">><<set $anusstate to "othermouthentrance">><<set $NPCList[_n].mouth to "anusentrance">>
					<<sex 1 "anal" _n>><<set $NPCList[_n].location.head to "genitals">><<set $anustarget to _n>>
				<<elseif $enemyanger + $rng lte 92 and $NPCList[_n].location.head is 0 and $NPCList[_n].location.genitals isnot "genitals" and $walltype isnot "front">>
					<<neutral 10 _n>>
					<<if $vaginause is 0 and $NPCList[_n].vagina is 0 and $player.vaginaExist>>
						<span class="blue"><<He>> kneels beside you. You feel <<his>> breath on your <<pussy>>.</span>
						<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">><<set $NPCList[_n].mouth to "vaginaentrance">>
						<<set $NPCList[_n].vagina to "othermouth">><<sex 1 "genital" _n>><<set $NPCList[_n].location.head to "genitals">><<set $vaginatarget to _n>>
					<<elseif $vaginause is 0 and $NPCList[_n].penis is 0 and $player.vaginaExist>>
						<span class="blue"><<He>> kneels beside you. You feel <<his>> breath on your <<pussy>>.</span>
						<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">><<set $NPCList[_n].mouth to "vaginaentrance">>
						<<set $NPCList[_n].penis to "othermouth">><<sex 1 "genital" _n>><<set $NPCList[_n].location.head to "genitals">><<set $vaginatarget to _n>>
					<<elseif $vaginause is 0 and $NPCList[_n].vagina is "facesit" and $player.vaginaExist>>
						<span class="blue">You feel <<him>> lean forward along your body, then feel <<his>> breath on your <<pussy>>.</span>
						<<set $vaginause to "othermouth">><<set $vaginastate to "othermouthentrance">><<set $NPCList[_n].mouth to "vaginaentrance">>
						<<sex 1 "genital" _n>><<set $NPCList[_n].location.head to "genitals">><<set $vaginatarget to _n>>
					<<else>>
						<<He>> breathes on your skin, making your hair stand on end.
						<<neutral 1>>
					<</if>>
				<<elseif $enemyanger + $rng lte 100 and $NPCList[_n].location.head is 0 and $NPCList[_n].location.genitals isnot "genitals" and $walltype isnot "front">>
					<<neutral 10 _n>>
					<<if $penisuse is 0 and $NPCList[_n].penis is 0 and $player.penisExist>>
						<<if $player.condom>>
							<<He>> removes <<condomDesc "player" "the">> from your penis.
							<<removeNPCCondom $mouthtarget "player">>
						<</if>>
						<span class="blue">
							<<He>> kneels beside
							<<if $player.condom>>
								you and removes <<condomDesc "player" "your">>.
								<<removeNPCCondom $mouthtarget "player">>
							<<else>>
								you.
							<</if>>
							You feel <<his>> breath on your <<penis>>.
						</span>
						<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">><<set $NPCList[_n].mouth to "penisentrance">>
						<<set $NPCList[_n].penis to "othermouth">><<sex 1 "genital" _n>><<set $NPCList[_n].location.head to "genitals">><<set $penistarget to _n>>
					<<elseif $penisuse is 0 and $NPCList[_n].vagina is 0 and $player.penisExist>>
						<span class="blue">
							<<He>> kneels beside
							<<if $player.condom>>
								you and removes <<condomDesc "player" "your">>.
								<<removeNPCCondom $mouthtarget "player">>
							<<else>>
								you.
							<</if>>
							You feel <<his>> breath on your <<penis>>.
						</span>
						<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">><<set $NPCList[_n].mouth to "penisentrance">>
						<<set $NPCList[_n].vagina to "othermouth">><<sex 1 "genital" _n>><<set $NPCList[_n].location.head to "genitals">><<set $penistarget to _n>>
					<<elseif $penisuse is 0 and $NPCList[_n].vagina is "facesit" and $player.penisExist>>
						<span class="blue">
							You feel <<him>> lean forward along your body, then feel <<his>> breath on your
							<<if $player.condom>>
								<<penis>> as <<condomDesc "player" "your">> is removed.
								<<removeNPCCondom $mouthtarget "player">>
							<<else>>
								<<penis>>.
							<</if>>
						</span>
						<<set $penisuse to "othermouth">><<set $penisstate to "othermouthentrance">><<set $NPCList[_n].mouth to "penisentrance">>
						<<sex 1 "genital" _n>><<set $NPCList[_n].location.head to "genitals">><<set $penistarget to _n>>
					<<else>>
						<<He>> breathes on your skin, making your hair stand on end.
						<<neutral 1 _n>>
					<</if>>
				<<elseif $enemyanger + $rng lte 105>>
					<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
						<<He>> kisses and caresses your helpless thighs with <<his>> tongue.
						<<neutral 10 _n>>
						<<bodypart_admire random_thigh>>
					<<elseif $NPCList[_n].location.genitals isnot "head">>
						<<He>> kisses and caresses your <<nipple>> with <<his>> tongue.
						<<neutralbreast 10 _n>>
						<<bodypart_admire breasts>>
					<</if>>
				<<elseif $enemyanger + $rng lte 110>>
					<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
						<<He>> kisses and gently bites your helpless <<bottom>>.
						<<neutral 10 _n>>
						<<bodypart_admire random_bottom>>
					<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
						<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
						<<neutral 10 _n>>
					<<elseif $NPCList[_n].location.genitals isnot "head">>
						<<He>> kisses and gently bites you on the neck.
						<<neutral 10 _n>>
						<<bodypart_admire breasts>>
					<</if>>
				<<elseif $enemyanger + $rng lte 115>>
					<<if $walltype is "front">>
						<<He>> spits on your face.
						<<neutral 5 _n>>
						<<bodypart_admire forehead>>
					<<else>>
						<<He>> spits on your <<genitals>>.
						<<neutral 5 "genitals" _n>>
						<<bodypart_admire pubic>>
					<</if>>
				<<elseif $enemyanger + $rng lte 120>>
					<<if $walltype is "front">>
						<<He>> spits on your back.
						<<neutral 5 _n>>
						<<bodypart_admire back>>
					<<else>>
						<<He>> spits on your <<bottom>>.
						<<neutral 5 _n>>
						<<bodypart_admire random_bottom>>
					<</if>>
				<<elseif $enemyanger + $rng lte 130>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> spits on your tummy.
						<<neutral 5 _n>>
						<<bodypart_admire back>>
						<<if playerBellyVisible()>><<set $speechpregnant to 1>><</if>>
					<<elseif $NPCList[_n].location.genitals isnot "head" and $NPCList[_n].location.head isnot "head" and $NPCList[_n].location.head isnot "genitals" and $chestuse is 0>>
						<<set $NPCList[_n].mouth to "chestentrance">><<set $chestuse to "mouth">><<set $cheststate to "mouthentrance">><<set $chesttarget to _n>>
						<span class="blue"><<He>> moves <<his>> head to your chest.</span>
						<<neutralbreast 1 _n>>
						<<bodypart_admire breasts>>
						<<set $NPCList[_n].location.head to "head">>
					<</if>>
				<<elseif $enemyanger + $rng lte 135 and $NPCList[_n].location.genitals isnot "genitals">>
					<<if $walltype is "front">>
						<<He>> runs <<his>> tongue over your cheek and jaw.
						<<neutral 5 _n>>
						<<bodypart_admire random_cheek>>
					<<else>>
						<<He>> runs <<his>> tongue up your inner thigh.
						<<neutral 5 _n>>
						<<bodypart_admire random_thigh>>
					<</if>>
				<<elseif $enemyanger + $rng lte 140>>
					<<if $position is "wall" and $walltype isnot "front">>
						<<He>> spits on your helpless thighs.
						<<neutral 5 _n>>
						<<bodypart_admire random_thigh>>
					<<else>>
						<<He>> spits on your face.
						<<neutral 5 _n>>
						<<bodypart_admire random_cheek>>
					<</if>>
				<<elseif $enemyanger + $rng lte 145 and $NPCList[_n].location.genitals isnot "head">>
					<<He>> presses <<his>> mouth against your forehead.
					<<neutral 5 _n>>
					<<bodypart_admire forehead>>
				<<elseif $enemyanger + $rng lte 150>>
					<<if $walltype isnot "front">>
						<<He>> bites your cheek.
						<<violence 10>><<hitstat>><<bruise face>>
						<<bodypart_admire random_cheek>>
					<<else>>
						<<He>> bites your <<bottom>>.
						<<violence 10>><<hitstat>><<bruise bottom>>
						<<bodypart_admire random_bottom>>
					<</if>>
				<<elseif $enemyanger + $rng lte 155>>
					<<if $walltype isnot "front">>
						<<He>> ?admires your <<breasts>>, eyes full of thirst.
						<<neutral 5 _n>>
						<<bodypart_admire chest>>
					<<else>>
						<<He>> ?admires your groin, eyes full of thirst.
						<<neutral 5 _n>>
						<<bodypart_admire pubic>>
					<</if>>
				<<elseif $enemyanger + $rng lte 160>>
					<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
						<<He>> bites your thighs.
						<<violence 10>><<hitstat>><<bruise thigh>>
						<<bodypart_admire random_thigh>>
					<<elseif $NPCList[_n].location.genitals isnot "head">>
						<<He>> bites your shoulders.
						<<violence 10>><<hitstat>><<bruise leftarm>><<bruise rightarm>>
						<<bodypart_admire_chance random_shoulder>>
					<</if>>
				<<elseif $enemyanger + $rng lte 165 and $NPCList[_n].location.genitals isnot "genitals" and !(playerBellySize(true) gte 8)>>
					<<He>> bites your tummy.
					<<violence 10>><<hitstat>><<bruise tummy>>
					<<bodypart_admire back>>
				<<elseif $enemyanger + $rng lte 170>>
					<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
						<<He>> bites your hips.
						<<violence 10>><<hitstat>><<bruise tummy>>
						<<bodypart_admire pubic>>
					<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
						<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
						<<neutral 10 _n>>
					<<elseif $NPCList[_n].location.genitals isnot "head">>
						<<He>> bites your neck.
						<<violence 10>><<hitstat>><<bruise neck>>
						<<bodypart_admire breasts>>
					<</if>>
				<<elseif $enemyanger + $rng lte 180>>
					<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
						<<He>> bites your thighs.
						<<violence 10>><<hitstat>><<bruise thigh>>
						<<bodypart_admire random_thigh>>
					<<elseif $NPCList[_n].penis is "mouth" or $NPCList[_n].vagina is "mouth">>
						<<He>> leans back, savouring the feel of your mouth on <<his>> genitals.
						<<neutral 10 _n>>
					<<elseif $NPCList[_n].location.genitals isnot "head">>
						<<He>> bites your cheek.
						<<violence 10>><<hitstat>><<bruise face>>
						<<bodypart_admire random_cheek>>
					<</if>>
				<<elseif $enemyanger + $rng gte 190>>
					<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals isnot "genitals">>
						<<He>> bites your <<bottom>>.
						<<violence 10>><<hitstat>><<bruise bottom>>
						<<bodypart_admire random_bottom>>
					<<elseif $NPCList[_n].location.genitals isnot "head">>
						<<He>> bites your <<breasts>>.
						<<violence 10>><<hitstat>><<bruise chest>><<playWithBreasts>>
						<<bodypart_admire breasts>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<</if>>
	<<if $possessed>>
		<span class="blue">You barely feel a thing.</span>
	<</if>>
	<<if $stalk and _stripped>>/*NPC can run off with clothes, and trigger a chase sequence. */
		<<stalk_flight>>
		<<set $position to "stalk">>
		<<He>> runs away, <span class="pink">with your clothes still in <<his>> possession!</span>
	<</if>>
	<<manend>><<set $pullaway to 0>><<set $NPCList[_n].intro to 0>>
<</widget>>


<<widget "penisinit">>
	<<rng>>

	<<if $gloryhole>>
		The $NPCList[_n].penisdesc waits expectantly.
	<<elseif $npcSub>>
		<<His>> $NPCList[_n].penisdesc twitches, awaiting your touch.
	<<elseif $enemyanger + $rng lte 20>>
		<<if $NPCList[_n].lefthand is 0>>
			<<if $enemyarousal lte 40>>
				<<He>> slowly rubs <<his>> shaft.
				<<submission 1 _n>>
			<<elseif $enemyarousal lte 90>>
				<<He>> quickly rubs <<his>> shaft.
				<<submission 2 _n>>
			<<elseif $enemyarousal gte 91>>
				<<He>> rapidly rubs <<his>> shaft.
				<<submission 3 _n>>
			<</if>>
		<<elseif $NPCList[_n].righthand is 0>>
			<<if $enemyarousal lte 40>>
				<<He>> slowly rubs <<his>> shaft.
				<<submission 1 _n>>
			<<elseif $enemyarousal lte 90>>
				<<He>> quickly rubs <<his>> shaft.
				<<submission 2 _n>>
			<<elseif $enemyarousal gte 91>>
				<<He>> rapidly rubs <<his>> shaft.
				<<submission 3 _n>>
			<</if>>
		<<else>>
			<<if $walltype is "front">>
				<<He>> slaps <<his>> $NPCList[_n].penisdesc against your cheek.
				<<submission 2 _n>>
			<<else>>
				<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
				<<submission 2 _n>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 25>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2 _n>>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your tummy.
			<<submission 2 _n>>
			<<if playerBellyVisible()>><<set $speechpregnant to 1>><</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 30>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2 _n>>
		<<elseif $player.breastsize gte 3>>
			<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<breasts>>.</span>
			<<submission 2 _n>><<playWithBreasts>><<set $chestactiondefault to "rub">><<set $chestuse to "penis">><<set $chesttarget to _n>><<cheststat>><<set $mouthactiondefault to "peniskiss">><<set $NPCList[_n].penis to "chest">><<set $NPCList[_n].location.genitals to "head">>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your <<breasts>>.
			<<submission 2 _n>><<playWithBreasts>>
		<</if>>
	<<elseif $enemyanger + $rng lte 35>>
		<<if $walltype is "front">>
			<<He>> slaps <<his>> $NPCList[_n].penisdesc against your cheek.
			<<submission 2 _n>>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2 _n>>
		<</if>>
	<<elseif $enemyanger + $rng lte 40>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2 _n>>
		<<elseif $NPCList[_n].mouth is 0>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your face.
			<<submission 2 _n>>
		<<else>>
			<<He>> rubs <<his>> $NPCList[_n].penisdesc against your thighs.
			<<submission 2 _n>>
		<</if>>
	<<elseif $enemyanger + $rng lte 45 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<!-- anal -->
		<<if $player.penisExist or playerHasStrapon()>>
			<<if $penisuse is 0>>
				<<if $analdisable is "f" and $consensual is 1>>
					<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and !$player.condom and $parasite.penis.name is undefined and
					$worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
						<<if playerChastity("penis")>>
							<<He>> tries to put a condom on your penis, but can't seem to get it over your $worn.genitals.name. <span class="red"><<He>> quickly gives up.</span>
							<<set $NPCList[_n].condom.willUse to false>>
						<<else>>
							<span class="green"><<He>> slips <<condomDesc _n>> on your <<penis>>.</span>
							<<equipNPCCondom _n "player">>
						<</if>>
					<</if>>
					<span class="blue"><<He>> straddles you, rubbing <<his>> ass against your <<penis>>.</span>
					<<neutral 5 _n>><<set $penisuse to "otheranus">><<set $NPCList[_n].penis to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>><<set $penistarget to _n>>
					<<set $NPCList[_n].location.genitals = "genitals">>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 60 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head">>
		<<if $mouthuse is 0>>
			<<if $penisbitten is 0>>
				<<if $position isnot "wall">>
					<<if wearingCondom(_n)>>
						<<He>> removes <<condomDesc _n "the">> from <<his>> penis.
						<<removeNPCCondom _n>>
					<</if>>
					<span class="blue"><<He>> positions <<his>> $NPCList[_n].penisdesc in front of your mouth.</span>
					<<if $NPCList[_n].type is "plant" and !["peniskiss","penislick"].includes($mouthactiondefault)>>
						<span class="pink">Nectar glistens on the tip.</span>
					<</if>>
					<<neutral 5 _n>><<set $mouthuse to "penis">><<set $NPCList[_n].penis to "mouthentrance">><<set $mouthstate to "entrance">><<set $speechmouthentrance to 1>>
					<<set $NPCList[_n].location.genitals = "head">><<set $mouthtarget to _n>>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 70 and $penisuse is 0 and ($player.penisExist or (playerHasStrapon() and !npcHasStrapon(_n))) and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<set $penisuse to "otherpenis">><<set $penisstate to "otherpenisentrance">><<set $NPCList[_n].penis to "penisentrance">><<sex 5 "genital" _n>><<set $penistarget to _n>>
		<<if $NPCList[_n].chastity.penis.includes("chastity")>>
			<span class="blue"><<He>> moves <<his>> caged $NPCList[_n].penisdesc close to your penis.</span>
		<<elseif playerChastity("penis")>>
			<span class="blue"><<He>> moves <<his>> $NPCList[_n].penisdesc close to your $worn.genitals.name.</span>
		<<else>>
			<span class="blue"><<He>> moves <<his>> $NPCList[_n].penisdesc close to your <<penis>>.</span>
		<</if>>
	<<elseif $enemyanger + $rng lte 100 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<if $player.vaginaExist and $vaginause is 0 and ($anususe isnot 0 or random(0,100) gte 50)>>
			<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
				<<if $NPCList[_n].chastity.penis.includes("chastity")>>
					<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
					<<set $NPCList[_n].condom.willUse to false>>
				<<else>>
					<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
					<<equipNPCCondom _n>>
				<</if>>
			<</if>>
			<span class="blue"><<He>> moves between your legs, positioning <<his>> $NPCList[_n].penisdesc in front of your <<pussy>>.</span>
			<<neutral 5 _n>><<set $vaginause to "penis">><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>><<set $vaginatarget to _n>>
			<<set $NPCList[_n].location.genitals = "genitals">>

		<<elseif $player.vaginaExist and $vaginaldoubledisable is "f" and ($awareness lt 300 ? random(0,1) is 0 : random(0,3) isnot 0) and $anususe isnot "penisdouble" and $vaginause is "penis" and $NPCList[_n].penissize gte 2 and $NPCList[$vaginatarget].penissize gte 2 and !["legLock","legLocked"].includes($feetuse)>>
			/* level 4 awareness( $awareness gt 300) should make this more common
			This action requires both NPCs to have a minimum penis size to initiate */
			<!--
			Double combat actions:
			Double comabt actions work similarly to their single counterparts, albeit with penetration states and enter/exit conditions.
			NPCs and player actions happen more or less the same way as existing actions.
			Initiation/escape actions will add or remove one NPC and switch the other one to single/double as appropriate.
			There are two primary states; in sync and out of sync. While out of sync, they typically display text more or less the same as their singular versions.
			While in sync, they display the double version text and combat outcomes.
			-->

			/* Error handling for escaped penises. Divert to regular penetration */
			/* Essentially, NPC's penis has been set to 0 somehow, yet the player's states have not been reset. */
			<<set $vaginadoubletarget to _n>>
			<<if $vaginatarget is $vaginadoubletarget>>
				<br><br>
				<<error {
					message	: `[${$NPCList[$vaginatarget].fullDescription}] penis has escaped. It is set to [${$NPCList[$vaginatarget].penis}] but player state remains [${$vaginastate}]`,
					source	: "[0x0] Occurred in man-combat -> penisinit: DVP. Please export and report."
				}>>
				<br><br>
				<<He>> teases your <<pussy>> with <<his>> $NPCList[$vaginatarget].penisdesc.
				<<set $NPCList[$vaginatarget].penis to "vaginaentrance">>

				<<if $vaginastate is "entrance">><<set $NPCList[$vaginatarget].penis to "vaginaentrance">>
				<<elseif $vaginastate is "imminent">><<set $NPCList[$vaginatarget].penis to "vaginaimminent">>
				<<elseif $vaginastate is "penetrated">><<set $NPCList[$vaginatarget].penis to "vagina">>
				<</if>>
			<<else>>
				/* Do intended function. Switch player into DP state and set NPC state */
				<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
					<<if $NPCList[_n].chastity.penis.includes("chastity")>>
						<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
						<<set $NPCList[_n].condom.willUse to false>>
					<<else>>
						<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
						<<equipNPCCondom _n>>
					<</if>>
				<</if>>
				<span class="blue"><<He>> moves <<his>> $NPCList[_n].penisdesc between your legs, joining the other cock in front of your <<pussy>>.</span>
				<<neutral 5>>
				/* Player */
				<<set $vaginause to "penisdouble">>
				<<set $vaginastate to (["doublepenetration", "doubleimminent"].includes($vaginastate) ? $vaginastate : "doubleentrance")>>
				/* NPC */
				<<set $speechvaginaentrance to 1>>
				<<set $NPCList[_n].penis to "vaginaentrancedouble">>
				<<set $NPCList[_n].location.genitals = "genitals">>
				<<if $NPCList[$vaginatarget].penis is "vagina">>
					<<set $NPCList[$vaginatarget].penis to "vaginadouble">>
				<<elseif $NPCList[$vaginatarget].penis is "vaginaimminent">>
					<<set $NPCList[$vaginatarget].penis to "vaginaimminentdouble">>
				<<elseif $NPCList[$vaginatarget].penis is "vaginaentrance">>
					<<set $NPCList[$vaginatarget].penis to "vaginaentrancedouble">>
				<</if>>
			<</if>>

		<<elseif $analdisable is "f" and $anususe is 0>>
			<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
				<<if $NPCList[_n].chastity.penis.includes("chastity")>>
					<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
					<<set $NPCList[_n].condom.willUse to false>>
				<<else>>
					<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
					<<equipNPCCondom _n>>
				<</if>>
			<</if>>
			<span class="blue"><<He>> moves between your legs, positioning <<his>> $NPCList[_n].penisdesc in front of your <<bottom>>.</span>
			<<if $NPCList[_n].type is "plant" and $NPCList[_n].penissize gte 4 and canImpregnateParasite("anus")>>
				<span class="red">Something about it scares you.</span>
			<</if>>
			<<neutral 5>><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
			<<set $NPCList[_n].location.genitals = "genitals">>

		<<elseif $analdisable is "f" and $analdoubledisable is "f" and ($awareness lt 300 ? random(0,1) is 0 : random(0,3) isnot 0) and $vaginause isnot "penisdouble" and $bottomuse isnot "penis" and $anususe is "penis" and $anususe isnot "penisdouble" and $NPCList[_n].penissize gte 2 and $NPCList[$anustarget].penissize gte 2 and !["legLock","legLocked"].includes($feetuse)>>
			/* level 4 awareness( $awareness gt 300) should make this more common
			This action requires both NPCs to have a minimum penis size to initiate */
			<!--
			Double combat actions:
			Double comabt actions work similarly to their single counterparts, albeit with penetration states and enter/exit conditions.
			NPCs and player actions happen more or less the same way as existing actions.
			Initiation/escape actions will add or remove one NPC and switch the other one to single/double as appropriate.
			There are two primary states; in sync and out of sync. While out of sync, they typically display text more or less the same as their singular versions.
			While in sync, they display the double version text and combat outcomes.
			-->

			/* Error handling for escaped penises. Divert to regular penetration */
			/* Essentially, NPC's penis has been set to 0 somehow, yet the player's states have not been reset. */
			<<set $anusdoubletarget to _n>>
			<<if $anustarget is $anusdoubletarget>>
				<br><br>
				<<error {
					message	: `[${$NPCList[$anustarget].fullDescription}] penis has escaped. It is set to [${$NPCList[$anustarget].penis}] but player state remains [${$anusstate}]`,
					source	: "[0x0] Occurred in man-combat -> penisinit: DAP. Please export and report."
				}>>
				<br><br>
				<<He>> teases your <<bottom>> with <<his>> $NPCList[$anustarget].penisdesc.
				<<set $NPCList[$vaginatarget].penis to "anusentrance">>
				<<if $anusstate is "entrance">>
					<<set $NPCList[$anustarget].penis to "anusentrance">>
					<<He>> tries to penetrate, but slips away.
				<<elseif $vaginastate is "imminent">>
					<<set $NPCList[$vaginatarget].penis to "anusimminent">>
					<<He>> pushes <<his>> cock against your opening, teasing what's to come.
				<<elseif $vaginastate is "penetrated">>
					<<set $NPCList[$vaginatarget].penis to "anus">>
					<<He>> continues thrusting into your <<bottom>>.
				<</if>>
			<<else>>
			/* Otherwise do the intended function */
				<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
					<<if $NPCList[_n].chastity.penis.includes("chastity")>>
						<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
						<<set $NPCList[_n].condom.willUse to false>>
					<<else>>
						<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
						<<equipNPCCondom _n>>
					<</if>>
				<</if>>
				<span class="blue"><<He>> moves between your legs, joining the cock in front of your <<bottom>>.</span>
				<<neutral 5 _n>>

				/* Player */
				<<set $anusdoubletarget to _n>>
				<<set $anususe to "penisdouble">>
				<<if $anusstate isnot "doublepenetration" and $anusstate isnot "doubleimminent">>
					<<set $anusstate to "doubleentrance">>
				<</if>>

				/* NPC */
				<<set $NPCList[_n].penis to "anusentrancedouble">><<set $NPCList[_n].location.genitals = "genitals">><<set $speechanusentrance to 1>>
				<<if $NPCList[$anustarget].penis is "anus">>
					<<set $NPCList[$anustarget].penis to "anusdouble">>
				<<elseif $NPCList[$anustarget].penis is "anusimminent">>
					<<set $NPCList[$anustarget].penis to "anusimminentdouble">>
				<<elseif $NPCList[$anustarget].penis is "anusentrance">>
					<<set $NPCList[$anustarget].penis to "anusentrancedouble">>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 120>>
		<<if $analingusdisablegiving is "f" and $enemyno gte 2 and $position isnot "wall"
			and $mouthuse is 0 and $NPCList[_n].location.head isnot "head" and $NPCList[_n].location.genitals is 0
			and (!$player.vaginaExist or $vaginause isnot 0)
			and (!$player.penisExist or $penisuse isnot 0)
			and ($analdisable is "t" or $anususe isnot 0)
			and !$worn.face.type.includes("covered") and !$worn.face.type.includes("gag")>>
			<span class="purple"><<He>> turns around and moves <<his>> ass in front of your face.</span>
			<<submission 5 _n>><<set $mouthuse to "otheranus">><<set $mouthstate to "otheranus">><<set $NPCList[_n].penis to "mouthotheranus">>
			<<set $NPCList[_n].location.genitals = "head">><<set $speechmouthotheranus to 1>><<set $mouthtarget to _n>>
		<<else>>
			<<He>> slowly traces <<his>> length across your exposed skin.
			<<neutral 1 _n>><<neutral 5 _n>>
		<</if>>
	<<elseif $enemyanger + $rng lte 140>>
		<<if $penisbitten is 0>>
			<<if $position isnot "wall">>
				<<if $mouthuse is 0 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head"and !$worn.face.type.includes("covered") and !$worn.face.type.includes("gag")>>
					<<if wearingCondom(_n)>>
						<<He>> removes <<condomDesc _n "the">> from <<his>> penis.
						<<removeNPCCondom _n>>
					<</if>>
					<span class="purple"><<He>> shoves <<his>> $NPCList[_n].penisdesc against your lips.</span>
					<<if $NPCList[_n].type is "plant" and !["peniskiss","penislick"].includes($mouthactiondefault)>>
						<span class="pink">Nectar glistens on the tip.</span>
					<</if>>
					<<submission 5 _n>><<set $mouthuse to "penis">><<set $mouthstate to "imminent">><<set $NPCList[_n].penis to "mouthimminent">><<set $speechmouthimminent to 1>>
					<<set $NPCList[_n].location.genitals = "head">><<set $mouthtarget to _n>>
				<<else>>
					<<He>> slowly traces <<his>> length across your exposed skin.
					<<neutral 1 _n>>
				<</if>>
			<<else>>
				<<He>> slowly traces <<his>> length across your exposed skin.
				<<neutral 1 _n>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 150 and ($penisise is 0 or $vaginause is 0) and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $footdisable is "f" and $walltype isnot "front">>
		<span class="purple"><<He>> presses <<his>> foot against your <<genitals>>.</span>
		<<neutral 5 "genitals" _n>><<violence 1>><<set $NPCList[_n].penis to "footjob">>
		<<if $player.penisExist and $penisuse is 0>>
			<<set $penisuse to "feet">><<set $speechpenisfoot to 1>>
		<</if>>
		<<if $player.vaginaExist and $vaginause is 0>>
			<<set $vaginause to "feet">>
			<<if !$player.penisExist>>
				<<set $speechvaginafoot to 1>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 170 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<if $anususe is 0 and $analdisable is "f">>
			<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
				<<if $NPCList[_n].chastity.penis.includes("chastity")>>
					<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
					<<set $NPCList[_n].condom.willUse to false>>
				<<else>>
					<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
					<<equipNPCCondom _n>>
				<</if>>
			<</if>>
			<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
				<<if $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1 and $NPCList[_n].chastity.penis.includes("chastity")>>
					<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus.</span>
					<<neutral 5 "anus">><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
				<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
					<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus, preparing to penetrate.</span>
					<<sex 5 "anal" _n>><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusimminent">><<set $anusstate to "imminent">><<set $speechanusimminent to 1>><<set $anustarget to _n>>
				<<elseif $worn.under_lower.anus_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.under_lower.name.</span>
					<<sex 3 "anal" _n>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.under_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
				<</if>>
			<<elseif $worn.over_lower.anus_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.over_lower.name.</span>
				<<sex 2 "anal" _n>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.over_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
			<<elseif $worn.lower.anus_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.lower.name.</span>
				<<sex 2 "anal" _n>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
			<</if>>
			<<if $NPCList[_n].type is "plant" and $NPCList[_n].penissize gte 4 and canImpregnateParasite("anus")>>
				<span class="red">Something about it scares you.</span>
			<</if>>
			<<set $NPCList[_n].location.genitals = "genitals">>
		<</if>>
	<<elseif $enemyanger + $rng gte 171 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<<if $player.vaginaExist and $vaginause is 0 and (!$player.penisExist or $anususe isnot 0 or random(0,100) gte 50)>>
			<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
				<<if $NPCList[_n].chastity.penis.includes("chastity")>>
					<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
					<<set $NPCList[_n].condom.willUse to false>>
				<<else>>
					<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
					<<equipNPCCondom _n>>
				<</if>>
			<</if>>
			<<if $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
				<<if $worn.under_lower.vagina_exposed is 1 and !playerChastity("vagina") and $NPCList[_n].chastity.penis.includes("chastity")>>
					<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>>.</span>
					<<sex 5 "genital" _n>><<set $vaginause to "penis">><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>><<set $vaginatarget to _n>>
				<<elseif $worn.under_lower.vagina_exposed is 1 and !playerChastity("vagina")>>
					<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>>, preparing to penetrate.</span>
					<<sex 5 "genital" _n>><<set $vaginause to "penis">><<set $NPCList[_n].penis to "vaginaimminent">><<set $vaginastate to "imminent">><<set $speechvaginaimminent to 1>><<set $vaginatarget to _n>>
				<<elseif $worn.under_lower.vagina_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.under_lower.name.</span>
					<<set $worn.under_lower.integrity -= 10>><<sex 3 "genital" _n>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>><<set $vaginatarget to _n>>
				<</if>>
			<<elseif $worn.over_lower.vagina_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.over_lower.name.</span>
				<<sex 2 "genital" _n>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $worn.over_lower.integrity -= 10>><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>><<set $vaginatarget to _n>>
			<<elseif $worn.lower.vagina_exposed is 0>>
				<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your <<pussy>> through your $worn.lower.name.</span>
				<<sex 2 "genital" _n>><<set $NPCList[_n].penis to "vaginaentrance">><<set $vaginause to "penis">><<set $worn.lower.integrity -= 10>><<set $vaginastate to "entrance">><<set $speechvaginaentrance to 1>><<set $vaginatarget to _n>>
			<</if>>
			<<if $NPCList[_n].type is "plant" and $NPCList[_n].penissize gte 4 and canImpregnateParasite("vagina")>>
				<span class="red">Something about it scares you.</span>
			<</if>>
			<<set $NPCList[_n].location.genitals to "genitals">>
		<<elseif $player.penisExist>>
			<<if $anususe is 0 and $analdisable is "f">>
				<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and $NPCList[_n].condom.worn is false and !$NPCList[_n].penisdesc.includes("strap-on")>>
					<<if $NPCList[_n].chastity.penis.includes("chastity")>>
						<<He>> tries to put a condom on, but can't seem to get it over <<his>> $NPCList[_n].chastity.penis. <span class="red"><<He>> quickly gives up.</span>
						<<set $NPCList[_n].condom.willUse to false>>
					<<else>>
						<span class="green"><<He>> slips <<condomDesc _n>> on <<his>> penis.</span>
						<<equipNPCCondom _n>>
					<</if>>
				<</if>>
				<<if $worn.lower.anus_exposed is 1 and $worn.over_lower.anus_exposed is 1>>
					<<if $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1 and $NPCList[_n].chastity.penis.includes("chastity")>>
						<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus.</span>
						<<neutral 5 "anus">><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusentrance">><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
					<<elseif $worn.under_lower.anus_exposed is 1 and $worn.genitals.anus_exposed is 1>>
						<span class="purple"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus, preparing to penetrate.</span>
						<<sex 5 "anal" _n>><<set $anususe to "penis">><<set $NPCList[_n].penis to "anusimminent">><<set $anusstate to "imminent">><<set $speechanusimminent to 1>><<set $anustarget to _n>>
					<<elseif $worn.under_lower.anus_exposed is 0>>
						<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.under_lower.name.</span>
						<<sex 3 "anal" _n>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.under_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
					<</if>>
				<<elseif $worn.over_lower.anus_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.over_lower.name.</span>
					<<sex 2 "anal" _n>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.over_lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
				<<elseif $worn.lower.anus_exposed is 0>>
					<span class="blue"><<He>> presses <<his>> $NPCList[_n].penisdesc against your anus through your $worn.lower.name.</span>
					<<sex 2 "anal" _n>><<set $NPCList[_n].penis to "anusentrance">><<set $anususe to "penis">><<set $worn.lower.integrity -= 10>><<set $anusstate to "entrance">><<set $speechanusentrance to 1>><<set $anustarget to _n>>
				<</if>>
				<<if $NPCList[_n].type is "plant" and $NPCList[_n].penissize gte 4 and canImpregnateParasite("anus")>>
					<span class="red">Something about it scares you.</span>
				<</if>>
				<<set $NPCList[_n].location.genitals = "genitals">>
			<</if>>
		<</if>>
	<</if>>
<</widget>>

<<widget "vaginainit">>
	<<rng>>

	<<if $gloryhole>>
		The pussy waits expectantly.
	<<elseif $npcSub>>
		<<His>> legs quiver, <<his>> pussy waiting for you to do something.
		<<neutral 1 _n>><<set $speechvaginaflaunt to 1>>
	<<elseif $enemyanger + $rng lte 20 and $NPCList[_n].location.genitals is 0>>
		<<He>> sways <<his>> hips suggestively.
		<<neutral 1 _n>><<set $speechvaginaflaunt to 1>>
	<<elseif $enemyanger + $rng lte 40>>
		<<He>> rubs <<his>> pussy.
		<<neutral 3 _n>><<set $speechvaginaflaunt to 1>>
	<<elseif $enemyanger + $rng lte 50 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals"
			and ($player.penisExist or playerHasStrapon()) and $penisuse is 0 and $analdisable is "f" and $walltype isnot "front">>
		<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and !$player.condom and $parasite.penis.name is undefined and
		$worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1>>
			<<if playerChastity("penis")>>
				<<He>> tries to put a condom on your penis, but can't seem to get it over your $worn.genitals.name. <span class="red"><<He>> quickly gives up.</span>
				<<set $NPCList[_n].condom.willUse to false>>
			<<else>>
				<span class="green"><<He>> slips <<condomDesc _n>> on your <<penis>>.</span>
				<<equipNPCCondom _n "player">>
			<</if>>
		<</if>>
		<span class="blue"><<He>> straddles you, rubbing <<his>> ass against your <<penis>>.</span>
		<<neutral 5 "genitals">><<set $penisuse to "otheranus">><<set $NPCList[_n].vagina to "otheranusentrance">><<set $penisstate to "otheranusentrance">><<set $speechotheranusentrance to 1>><<set $penistarget to _n>>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 60 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head" and $mouthuse is 0 and ($position isnot "wall" or $walltype is "front") and !$worn.face.type.includes("covered") and !$worn.face.type.includes("gag")>>
		<<if $rng % 5 is 0 and $facesitdisable is "f">>
			<<if $position is "doggy">>
				<<He>> gently rolls you onto your back.
				<<set $position to "missionary">>
			<</if>>
			<span class="purple">
			<<print either(
				"<<He>> straddles your face and slowly lowers <<his>> pussy down onto your mouth.",
				"<<He>> stands over your face and lowers <<himself>>, planting <<his>> pussy on your face.",
				"<<His>> pussy comes down onto your face and rests lightly on your mouth, and <<he>> waits expectantly."
			)>>
			</span>
			<<submission 5 _n>><<set $NPCList[_n].vagina to "facesit">><<set $mouthuse to "facesit">><<set $mouthstate to "vagina">>
			<<set $speechfacesit to 1>><<set $NPCList[_n].location.genitals = "head">><<set $mouthtarget to _n>>
		<<else>>
			<span class="purple"><<He>> takes hold of your head and gently guides it in towards <<his>> pussy as <<he>> opens <<his>> legs.</span>
			<<submission 5 _n>><<set $mouthuse to "othervagina">><<set $NPCList[_n].vagina to "mouth">><<set $mouthstate to "othervagina">>
			<<set $speechvaginamouth to 1>><<set $NPCList[_n].location.genitals = "head">><<set $mouthtarget to _n>>
		<</if>>
		<<if $NPCList[_n].type is "plant">>
			<span class="pink">Nectar glistens at the entrance.</span>
		<</if>>
	<<elseif $enemyanger + $rng lte 70>>
		<<if $walltype is "front">>
			<<He>> rubs <<his>> pussy against your cheek.
			<<neutral 10 _n>>
		<<else>>
			<<He>> rubs <<his>> pussy against your thigh.
			<<neutral 10 _n>>
		<</if>>
	<<elseif $enemyanger + $rng lte 80 and $NPCList[_n].lefthand is 0>>
		<span class="lblue"><<He>> presses <<his>> fingers against <<his>> labia.</span>
		<<neutral 1 _n>><<set $enemyarousal += 10>><!-- <<set $NPCList[_n].vagina to "lefthand">><<set $NPCList[_n].lefthand to "othervagina">> -->
	<<elseif $enemyanger + $rng lte 80 and $NPCList[_n].righthand is 0>>
		<span class="lblue"><<He>> presses <<his>> fingers against <<his>> labia.</span>
		<<neutral 1 _n>><<set $enemyarousal += 10>><!-- <<set $NPCList[_n].vagina to "righthand">><<set $NPCList[_n].righthand to "othervagina">> -->
	<<elseif $enemyanger + $rng lte 80>>
		<<if $walltype is "front">>
			<<He>> rubs <<his>> pussy against your cheek.
			<<neutral 10 _n>>
		<<else>>
			<<He>> rubs <<his>> pussy against your thigh.
			<<neutral 10 _n>>
		<</if>>
	<<elseif $enemyanger + $rng lte 100 and $penisuse is 0 and ($player.penisExist or playerHasStrapon()) and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<!-- mount and prepare for vaginal sex -->
		<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisentrance">><<set $penisstate to "entrance">><<set $penistarget to _n>>
		<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and !$player.condom and $parasite.penis.name is undefined>>
			<<if playerChastity("penis")>>
				<<He>> tries to put a condom on your penis, but can't seem to get it over your $worn.genitals.name. <span class="red"><<He>> quickly gives up.</span>
				<<set $NPCList[_n].condom.willUse to false>>
			<<else>>
				<span class="green"><<He>> slips <<condomDesc _n>> on your <<penis>>.</span>
				<<equipNPCCondom _n "player">>
			<</if>>
		<</if>>
		<span class="blue"><<He>> straddles you, <<his>> pussy hovering close to your <<penis>>.</span>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 100 and $vaginause is 0 and $player.vaginaExist and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<!-- tribbing -->
		<<set $vaginause to "othervagina">><<set $vaginastate to "othervaginaentrance">><<set $NPCList[_n].vagina to "vaginaentrance">><<sex 5 "genital" _n>><<set $vaginatarget to _n>>
		<span class="blue"><<He>> moves <<his>> pussy close to yours.</span>
		<<set $NPCList[_n].location.genitals = "genitals">><<set $speechtribentrance to 1>>
	<<elseif $enemyanger + $rng lte 120 and $penisuse is 0 and ($player.penisExist or playerHasStrapon()) and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and !playerChastity("penis") and $walltype isnot "front">>
		<!-- forceful vaginal sex -->
		<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">><<set $penistarget to _n>>
		<<if $NPCList[_n].condom and $NPCList[_n].condom.willUse is true and !$player.condom and $parasite.penis.name is undefined>>
			<<if playerChastity("penis")>>
				<<He>> tries to put a condom on your penis, but can't seem to get it over your $worn.genitals.name. <span class="red"><<He>> quickly gives up.</span>
				<<set $NPCList[_n].condom.willUse to false>>
			<<else>>
				<span class="green"><<He>> slips <<condomDesc _n>> on your <<penis>>.</span>
				<<equipNPCCondom _n "player">>
			<</if>>
		<</if>>
		<<if $NPCList[_n].chastity.vagina.includes("chastity")>>
			<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisentrance">><<set $penisstate to "entrance">><<set $penistarget to _n>>
			<span class="blue"><<He>> straddles you, <<his>> pussy hovering close to your <<penis>>.</span>
		<<else>>
			<<set $penisuse to "othervagina">><<set $NPCList[_n].vagina to "penisimminent">><<set $penisstate to "imminent">><<set $penistarget to _n>>
			<span class="purple"><<He>> wraps <<his>> legs around your pelvis, pressing <<his>> pussy against your <<genitals>>.</span>
		<</if>>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 120 and $vaginause is 0 and $player.vaginaExist and $worn.under_lower.vagina_exposed is 1 and $worn.lower.vagina_exposed is 1 and $worn.over_lower.vagina_exposed is 1 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $walltype isnot "front">>
		<!-- forceful tribbing -->
		<<set $vaginause to "othervagina">><<set $vaginastate to "othervaginaimminent">><<set $NPCList[_n].vagina to "vaginaimminent">><<sex 20 "genital" _n>><<set $vaginatarget to _n>>
		<span class="purple"><<He>> pushes <<his>> pussy close to yours.</span>
		<<set $NPCList[_n].location.genitals = "genitals">>
	<<elseif $enemyanger + $rng lte 140 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals">>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> sits on your protruding <<bottom>>, pressing down on you painfully.
			<<violence 3>>
		<<elseif $mouthuse is 0>>
			<<He>> rubs <<his>> clit against your face.
			<<violence 3>>
		<<else>>
			<<He>> frots against your thigh while squeezing it with <<his>> own.
			<<violence 3>>
		<</if>>
	<<elseif $enemyanger + $rng lte 160 and ($penisise is 0 or $vaginause is 0) and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and $footdisable is "f" and $walltype isnot "front">>
		<!-- foot job -->
		<span class="purple"><<He>> presses <<his>> foot against your <<genitals>>.</span>
		<<neutral 5 "genitals" _n>><<violence 1>><<set $NPCList[_n].vagina to "footjob">>
		<<if ($player.penisExist or playerHasStrapon()) and $penisuse is 0>>
			<<set $penisuse to "feet">><<set $speechpenisfoot to 1>>
		<</if>>
		<<if $player.vaginaExist and $vaginause is 0>>
			<<set $vaginause to "feet">>
			<<if !$player.penisExist>>
				<<set $speechvaginafoot to 1>>
			<</if>>
		<</if>>
	<<elseif $enemyanger + $rng lte 180 and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals" and !(playerBellySize(true) gte 8)>>
		<<if $position is "wall" and $walltype isnot "front">>
			<<He>> kicks you in the <<bottom>>.
			<<violence 10>><<hitstat>><<bruise bottom>>
		<<else>>
			<<He>> kicks you in the stomach.
			<<violence 10>><<hitstat>><<bruise face>>
		<</if>>
	<<elseif $enemyanger + $rng lte 200 and $mouthuse is 0>>
		<<if $pullaway is 1>>
			<<set $pullaway to 0>>
			Saliva drips from <<his>> pussy.
		<<else>>
			<<if $position is "wall" and $walltype isnot "front" and $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals">>
				<<if $player.penisExist>>
					<<He>> kicks your <<penis>>.
					<<violence 20>><<hitstat>><<bruise penis>><<set $speechbeat to 1>>
				<<elseif $player.vaginaExist>>
					<<He>> kicks your <<pussy>>.
					<<violence 20>><<hitstat>><<bruise vagina>><<set $speechbeat to 1>>
				<</if>>
			<<elseif $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "head" and $mouthuse is 0 and !$worn.face.type.includes("covered") and !$worn.face.type.includes("gag")>>
				<<if $rng % 2 is 0 and $facesitdisable is "f">>
					<<if $position is "doggy">>
						<<He>> turns you onto your back.
						<<set $position to "missionary">>
					<</if>>
					<span class="purple">
					<<print either(
						"<<He>> swings a leg over your face and sits down, sitting on your face.",
						"<<He>> sits down on your face, covering your mouth with <<his>> pussy.",
						"<<His>> pussy and ass descend onto your face, as <<he>> sits on it."
					)>>
					</span>
					<<submission 5 _n>><<set $NPCList[_n].vagina to "facesit">><<set $mouthuse to "facesit">><<set $mouthstate to "vagina">>
					<<violence 3>><<bruise face>><<set $speechfacesit to 1>><<set $mouthtarget to _n>>
					<<set $NPCList[_n].location.genitals = "head">>
				<<else>>
					<span class="purple"><<He>> wraps <<his>> legs around your head and presses <<his>> pussy against your mouth.</span>
					<<submission 5 _n>><<set $mouthuse to "othervagina">><<set $NPCList[_n].vagina to "mouth">><<set $mouthstate to "othervagina">><<violence 3>><<bruise face>><<set $speechvaginamouth to 1>>
					<<set $NPCList[_n].location.genitals = "head">><<set $mouthtarget to _n>>
				<</if>>
				<<if $NPCList[_n].type is "plant">>
					<span class="pink">Nectar glistens at the entrance.</span>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $NPCList[_n].location.genitals is 0 and $NPCList[_n].location.head isnot "genitals">>
		<<if $position is "wall" and $walltype isnot "front">>
			<<if $player.penisExist>>
				<<He>> kicks your <<penis>>.
				<<violence 20>><<hitstat>><<bruise penis>><<set $speechbeat to 1>>
			<<elseif $player.vaginaExist>>
				<<He>> kicks your <<pussy>>.
				<<violence 20>><<hitstat>><<bruise vagina>><<set $speechbeat to 1>>
			<</if>>
		<<else>>
			<<He>> kicks you in the face.
			<<violence 10>><<bruise face>><<set $speechbeat to 1>><<hitstat>>
		<</if>>
	<</if>>
<</widget>>

<<widget "chest_section">>
	<<if $NPCList[_n].chest isnot "none">>
		<<if $NPCList[_n].breastsize lte 1>>
			<<set $_NPCBreastDesc to "chest">>
		<<else>>
			<<set $_NPCBreastDesc to ($NPCList[_n].chest is "clothed" ? "clothed" : either("bare", "exposed")) + " $NPCList[_n].breastsdesc">>
		<</if>>
	<</if>>
	<<if ($NPCList[_n].chest is 0 or $NPCList[_n].chest is "clothed") and !$gloryhole and $position isnot "wall">>
		<<if $NPCList[_n].pronoun is "f" and ($NPCList[_n].location.genitals is "genitals" or $NPCList[_n].stance is "top")>>
			<!-- Doggy -->
			<<if $position is "doggy">>
				<!-- Being under the player -->
				<<if $NPCList[_n].vagina.toString().includes("penis")
				or $NPCList[_n].vagina is "frot"
				or $NPCList[_n].vagina.toString().includes("vagina")
				or $NPCList[_n].vagina.toString().includes("otheranus")
				or $NPCList[_n].penis.toString().includes("otheranus")
				or $NPCList[_n].penis is "vaginadouble">>
					<<if $NPCList[_n].mouth is "kiss">>
						<<if $NPCList[_n].breastsize lte 1>>
							<<His>> nipples graze your own.
						<<else>>
							<<His>> $_NPCBreastDesc squish against <<if $NPCList[_n].breastsize is $player.breastsize>>yours<<else>>your <<breasts>><</if>>.
						<</if>>
					<<else>>
						<<if $NPCList[_n].breastsize gte 6>>
							<<if $NPCList[_n].righthand is 0 and $NPCList[_n].lefthand is 0>>
								<<He>> hugs you between <<his>> $_NPCBreastDesc.
							<<else>>
								<<His>> $NPCList[_n].breastsdesc bounce <<if $NPCList[_n].chest is "clothed">>beneath you in <<his>> $NPCList[_n].clothes.upper.name<<else>>freely beneath you with <<his>> movements<</if>>.
							<</if>>
						<<else>>
							<<His>> $_NPCBreastDesc lie<<if $_NPCBreastDesc is "chest">>s<</if>> open beneath you.
						<</if>>
					<</if>>
				<!-- Being above/behind the player -->
				<<else>>
					<<if $NPCList[_n].breastsize gte 8>>
						You feel <<his>> $_NPCBreastDesc weighing down on your back.
					<<else>>
						You feel <<his>> $_NPCBreastDesc pressing into your back.
					<</if>>
				<</if>>
			<!-- Missionary -->
			<<else>>
				<!-- Being under the player -->
				<<if $NPCList[_n].penis.toString().includes("anus") or
				$NPCList[_n].penis is "vaginadouble">>
					<<if $NPCList[_n].breastsize gte 10>>
						<<if $NPCList[_n].righthand is 0 and $NPCList[_n].lefthand is 0>>
							<<He>> hugs you between <<his>> $_NPCBreastDesc.
						<<else>>
							<<His>> $_NPCBreastDesc bounce around you as you lie between them.
						<</if>>
					<<else>>
						You feel <<his>> $_NPCBreastDesc pressing into your back.
					<</if>>
				<!-- Being above/riding the player -->
				<<else>>
					<<if $NPCList[_n].mouth is "kiss">>
						<<if $NPCList[_n].breastsize lte 1>>
							<<His>> nipples graze your own.
						<<else>>
							<<His>> $_NPCBreastDesc squish against <<if $NPCList[_n].breastsize is $player.breastsize>>yours<<else>>your <<breasts>><</if>>.
						<</if>>
					<<else>>
						<<if $NPCList[_n].breastsize gte 6>>
							<<His>> $NPCList[_n].breastsdesc bounce <<if $NPCList[_n].chest is "clothed">>above you in <<his>> $NPCList[_n].clothes.upper.name<<else>>freely above you with <<his>> movements<</if>>.
						<<else>>
							<<His>> $_NPCBreastDesc lie<<if $_NPCBreastDesc is "chest">>s<</if>> open above you.
						<</if>>
					<</if>>
				<</if>>
			<</if>>
		<</if>>
	<<elseif $NPCList[_n].chest.toString().includes("mouth")>>
		<<if $mouthstate is "breasts">>
			<<if $enemyarousal gte (($enemyarousalmax / 10) * 6)>>
				<<if $NPCList[_n].breastsize lte 1>>
					<<His>> heart beats rapidly against your cheek.
				<<else>>
					You can feel <<his>> heartbeat quickening through <<his>> $_NPCBreastDesc.
				<</if>>
			<<else>>
				<<if $NPCList[_n].breastsize lte 1>>
					<<His>> chest rubs against your face.
				<<else>>
					<<His>> chest swells with each breath, <<his>> $_NPCBreastDesc rhythmically rubbing against your face.
				<</if>>
			<</if>>
		<<elseif $mouthstate is "nipple">>
			<<if $enemyarousal gte (($enemyarousalmax / 10) * 6)>>
				<<if $NPCList[_n].breastsize lte 1>>
					<<His>> chest heaves erratically. <<He>> struggles to keep your mouth latched to <<his>> nipple.
				<<else>>
					<<His>> breaths are quick and heavy, jostling your head against <<his>> breast.
				<</if>>
			<</if>>
		<</if>>
	<</if>>
<</widget>>

<<widget "mancombat_strangle">>
	<<set _left = $NPCList[_n].lefthand is "throat">>
	<<set _right = $NPCList[_n].righthand is "throat">>
	<<set _hands = (_left ? 1 : 0) + (_right ? 1 : 0)>>
	<<set _handname = _hands == 2 ? "hands" : (_left ? "left hand" : "right hand")>>
	<<set _handvar = _left ? "lefthand" : "righthand">>

	<<if $enemyanger gte 100 or $keepchoke or ($enemyanger + $rng gte 150 and $asphyxiaLvl gte 4)>>
		<<if $underwater isnot 1 and $asphyxiaLvl gte 3>>
			<<if _hands == 2>>
				<!-- -200 per turn with both hands: max to 0 oxygen in 6 turns -->
				<<oxygen -250>>
			<<else>>
				<!-- -175 per turn with one hand: max to 0 oxygen in 7 turns -->
				<<oxygen -225>>
			<</if>>
			<<set $speechthroat to 1>>
			<<sub 1>>
		<</if>>
		<<bruise neck>><<bruise neck>>

		<<if $asphyxiaLvl gte 3>>
			<<He>> strangles your throat<<if _hands is 2>> with both hands<</if>>.
			<<if $oxygen gte 900>>
				<<violence 5 1 1 0.02>>
			<<elseif $oxygen gte 600>>
				<span class="purple"> You can't breathe!</span>
				<<violence 10 1 1 0.02>>
			<<elseif $oxygen gte 300>>
				<span class="pink"> You feel light-headed.</span>
				<<violence 20 1 1 0.02>>
			<<elseif $oxygen gte 1>>
				<span class="pink"> You see stars.</span>
				<<violence 40 1 1 0.02>>
			<<else>>
				<span class="red"> You are suffocating!</span>
				<<suffocatepass>>
				<<violence 100 1 1 0.02>>
			<</if>>
		<<else>>
			<<He>> holds you by the neck roughly <<if _hands is 2>> with both hands<</if>>.
		<</if>>
	<<elseif $rng gte 91 and _hands is 2>>
		<span class="teal"><<He>> releases <<his>> hands from your throat.</span>
		<<set $neckuse to 0>>
		<<gaspair>>
		<<set $NPCList[_n].lefthand to 0>><<set $NPCList[_n].righthand to 0>>
	<<elseif $rng gte 81>>
		<<if _hands is 2>>
			<span class="teal"><<He>> releases <<his>> right hand from your throat.</span>
			<<set $NPCList[_n].righthand to 0>>
			<<suffocatepass -1>>
		<<else>>
			<span class="teal"><<He>> releases <<his>> _handname from your throat.</span>
			<<set $neckuse to 0>>
			<<gaspair>>
			<<set $NPCList[_n][_handvar] to 0>>
		<</if>>
	<<elseif $rng gte 71 and _hands is 2>>
		<span class="teal"><<He>> releases <<his>> left hand from your throat.</span>
		<<set $NPCList[_n].lefthand to 0>>
		<<suffocatepass -1>>
	<<else>>
		<<He>> holds you down <<if _hands is 2>>with both hands around<<else>>by<</if>> your throat.
		<<violence _hands>>
		<<suffocatepass -1>>
	<</if>>
	<<bruise neck>><<if _hands is 2>><<bruise neck>><</if>>
	<<bodypart_admire_chance random_cheek>>
<</widget>>

<<widget "mancombat_choke">>
	<<set _left = $NPCList[_n].lefthand is "throat">>
	<<set _right = $NPCList[_n].righthand is "throat">>
	<<set _hands = (_left ? 1 : 0) + (_right ? 1 : 0)>>
	<<set _handname = _hands == 2 ? "hands" : (_left ? "left hand" : "right hand")>>
	<<set _handvar = _left ? "lefthand" : "righthand">>

	<!-- 97.2% probability to stop choking before you pass out if my math is correct (95% if with both hands) -->
	<<if $oxygen gt 600 or $askedtochoke gte 1 or $keepchoke or $enemyanger gte 100 or $rng lte 55>>
		<<if $underwater isnot 1 and $asphyxiaLvl gte 2>>
			<<if _hands == 2>>
				<!-- -175 per turn with both hands: max to 0 oxygen in 7 turns -->
				<<oxygen -225>>
			<<else>>
				<!-- -150 per turn with one hand: max to 0 oxygen in 8 turns -->
				<<oxygen -200>>
			<</if>>
			<<set $askedtochoke to 0>>
			<<set $speechthroat to 1>>
		<</if>>
		<<bruise neck>>

		<<if $asphyxiaLvl gte 2>>
			<<He>> chokes you with <<if _hands is 2>>both hands<<else>><<his>> _handname<</if>>.
			<<if $oxygen gte 900>>
				<<violence 5 1 0.1 0.02>>
			<<elseif $oxygen gte 600>>
				<span class="purple"> You can't breathe!</span>
				<<violence 10 1 0.1 0.02>>
			<<elseif $oxygen gte 300>>
				<span class="pink"> You feel light-headed.</span>
				<<violence 20 1 0.1 0.02>>
			<<elseif $oxygen gte 1>>
				<span class="pink"> You see stars.</span>
				<<violence 40 1 0.1 0.02>>
			<<else>>
				<span class="red"> You are suffocating!</span>
				<<suffocatepass>>
				<<violence 100 1 0.1 0.02>>
			<</if>>
		<<else>>
			<<He>> holds your neck in a gentle but firm grip<<if _hands is 2>> with both hands<</if>>.
		<</if>>
	<<elseif $rng gte 91 and _hands is 2>>
		<span class="teal"><<He>> releases <<his>> hands from your neck.</span>
		<<set $neckuse to 0>>
		<<gaspair>>
		<<set $NPCList[_n].lefthand to 0>><<set $NPCList[_n].righthand to 0>>
	<<elseif $rng gte 81>>
		<<if _hands is 2>>
			<span class="teal"><<He>> releases <<his>> right hand from your neck.</span>
			<<set $NPCList[_n].righthand to 0>>
			<<suffocatepass -1>>
		<<else>>
			<span class="teal"><<He>> releases <<his>> _handname from your neck.</span>
			<<set $neckuse to 0>>
			<<gaspair>>
			<<set $NPCList[_n][_handvar] to 0>>
		<</if>>
	<<elseif $rng gte 71 and _hands is 2>>
		<span class="teal"><<He>> releases <<his>> left hand from your neck.</span>
		<<set $NPCList[_n].lefthand to 0>>
		<<suffocatepass -1>>
	<<else>>
		<<He>> holds you down <<if _hands is 2>>with both hands around<<else>>by<</if>> your neck.
		<<violence _hands 1 0.1 0.02>>
		<<suffocatepass -1>>
	<</if>>
	<<bruise neck>>
	<<bodypart_admire_chance random_cheek>>
<</widget>>

<<widget "gaspair">>
	<<if $underwater isnot 1>>
		<<if $oxygen gte 900>>
			You inhale sharply.
		<<elseif $oxygen gte 600>>
			You gasp for air.
		<<elseif $oxygen gte 1>>
			You hungrily gasp for air.
		<<else>>
			You hungrily gasp for air and cough.
		<</if>>
	<<oxygen 300>>
	<</if>>
	<<set $suffocating to 0>>
<</widget>>

<<widget "suffocatepass">>
	<<set $suffocating = Math.clamp($suffocating + (_args[0] or 1), 0, 10)>>
	<<if $suffocating gte 1 and $suffocationPhase isnot 2>><span class="red"> You're about to lose consciousness.</span><</if>>

	<!-- see "actionsman" widget for the code relating to the PC passing out from suffocation -->
<</widget>>

:: Man combat suffocated
<<if $npc.includes("Sydney")>>
	<<run statusCheck("Sydney")>>
<</if>>
<<if $npc.includes("Kylar")>>
	<<run statusCheck("Kylar")>>
<</if>>
<<if $suffocationPhase lte 1>>
	<span class='red'>You suffocate.</span><br>
	Your vision clouds and fades.
	<<if $vaginastate is "penetrated" or $vaginastate is "othervagina" or $penisstate is "othervagina" or $penisstate is "otheranus" or $penisstate is "othermouth" or $anusstate is "penetrated" or $mouthstate is "penetrated">>
		You jerk in a spasm for the last time and droop. Your limp body continues to be fucked relentlessly.
	<<else>>
		Your body spasms for the last time and goes limp.
	<</if>>
	<<set $penisaction to 0>>
	<<set $vaginaaction to 0>>
	<<set $anusaction to 0>>
	<<set $leftaction to 0>>
	<<set $rightaction to 0>>
	<<set $mouthaction to 0>>
	<<set $thighaction to 0>>
	<<set $cheekaction to 0>>
	<<set $feetaction to 0>>
	<<set $chestaction to 0>>
	<<set $mockaction to "none">>
	<<set $bodyaction to 0>>

	<!-- Didn't use $NPCList[_n].righthand instead of .find() because once i've got a weird error
	with $NPCList[_n] being undefined here. Perhaps, temporary _n expired? -->
	<<set _npc = $NPCList.find(x => x.lefthand == "throat" || x.righthand == "throat")>>
	<<if _npc isnot undefined>>
		<<set _npc.righthand to 0>>
		<<set _npc.lefthand to 0>>
	<</if>>
	<<set $neckuse to 0>>
	<<set $enemyanger -= 70>>
	<<set $suffocationPhase to 2>>
	<br><br>
	<<link [[Next|Man combat suffocated]]>><</link>>
<<else>>
	<span class="red">You are unconscious.</span><br>
	<!-- Simulate 30 seconds of sex while passed out -->
	<<set _simTurns to 3>>
	<<for _turn to 0; _turn lte _simTurns; _turn++>>
		<<if _turn lt _simTurns>>
			<div class="unconscious shimmering" hidden="">
				<<if $enemytype is "man">>
					<<man>>
				<<else>>
					<<beast $enemyno>><br>
				<</if>>
				<<integritycheck>>
			</div>
		<<else>>
			<div class="fade-in" hidden="">
				You regain consciousness with a long gasp. Your body is still being used.
				<<oxygenrefresh>>
				<<set $suffocating to 0>>
				<<unset $suffocated>>
				<<unset $suffocationPhase>>
				<br><br>
				<span id="next"><<link [[Next|$previousPassage]]>><</link>></span>
			</div>
		<</if>>
	<</for>>
	<<script>>
		$(document).one(':passageend', function(ev) {
			const targets = [ ...document.getElementsByClassName('unconscious'), ...document.getElementsByClassName('fade-in') ];
			let delay = 1500;
			targets.forEach(ele => {
				if (ele instanceof HTMLElement) {
					/* Element is prepared and ready to be unhidden, leave a 1.5 timeout per iteration */
					setTimeout(() => {
						ele.hidden = false;
					}, delay);
					delay += 1500;
				}
			});
		});
	<</script>>
<</if>>

:: Widgets Img [widget]
<<widget "img">>
    /* 北极星模组 */
    <<if $transformationParts.sheep is undefined or $transformationParts.deer is undefined or $transformationParts.bear is undefined or $transformationParts.bee is undefined or $transformationParts.dragon is undefined or $transformationParts.lizard is undefined or $transformationParts.dolphin is undefined or $transformationParts.dog is undefined or $transformationParts.raccoon is undefined or $transformationParts.fish is undefined or $transformationParts.horse is undefined or $transformationParts.spider is undefined or $transformationParts.pig is undefined or $transformationParts.frog is undefined>>
		<<set $tfFIX to undefined>>
		<<backComp>>
		<<variablesBJXModUpdate>>
	<</if>>
	/* 北极星 */
	<<set _filters to $skinColor.current>>
	<<set _img to setup.tanImg.sidebar[($options.tanImgEnabled ? "t" : "f")]>>
	<<charLight "118px" "183px">>
	<div id="imgInv">
		<div><mouse class="tooltip-image">
			<<condomsSidebar>>
			<span class="def">Total condoms: $condoms</span>
		</mouse></div>
		<div><mouse class="tooltip-image">
			<<peppersprays>>
			<span class="def">Pepper spray: $spray / $spraymax</span>
		</mouse></div>
	</div>
	<div id="img" @class="limitedColourContainerClasses() + ($options.sidebarAnimations isnot false ? '':' noAnimations') + ' offset-sidebar-img'">
	<<if $options.sidebarRenderer is 'canvas'>>
		<<canvasimg>>
	<<else>>
		<<if $options.sidebarRenderer is 'both'>>
			<<canvasimg 'canvasimg-both'>>
		<</if>>
		/*Prep for image checks*/
		<<if $worn.under_upper.type.includes("chest_bind")>>
			<<set _breastSize to 1>>
		<<else>>
			<<switch $player.perceived_breastsize>>
			<<case 12>>
				<<set _breastSize to 6>>
			<<case 8 9 10 11>>
				<<set _breastSize to 5>>
			<<case 6 7>>
				<<set _breastSize to 4>>
			<<case 4 5>>
				<<set _breastSize to 3>>
			<<case 3>>
				<<set _breastSize to 2>>
			<<case 0 1 2>>
				<<set _breastSize to 1>>
			<</switch>>
		<</if>>
		<<if $player.penisExist>>
			<<set _penisSize to Math.clamp($player.penissize, -2, 4)>>
		<</if>>
		<<if $worn.over_head.hood is 1 or $worn.head.hood is 1>>
			<<set _hairlengthstage to "short">>
			<<set _fringelengthstage to "short">>
		<<else>>
			<<set _hairlengthstage to $hairlengthstage>>
			<<set _fringelengthstage to $fringelengthstage>>
		<</if>>
		<<set _disabled to ["disabled","hidden"]>>


		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $dontHide is false and $worn.over_upper.exposed gte 1 and ($worn.upper.exposed gte 1 or $upperwetstage gte 3)
			and ($exposed gte 2 and $uncomfortable.nude is true or $exposed is 1 and $uncomfortable.underwear is true)>>
				<<set _coverLeft to true>>
			<<else>>
				<<set _coverLeft to false>>
			<</if>>
		<</if>>

		<<if $rightarm isnot "bound" and $rightarm isnot "grappled" and $rightarm isnot "behind">>
			<<if $dontHide is false and $worn.over_lower.exposed gte 1 and ($worn.lower.exposed gte 1 or $lowerwetstage gte 3)
			and ($exposed gte 2 and $uncomfortable.nude is true or $exposed is 1 and $uncomfortable.underwear is true)>>
				<<set _coverRight to true>>
			<<else>>
				<<set _coverRight to false>>
			<</if>>
		<</if>>

		<img class="layer-base anim-idle-2f" @src="_img.basenoarms" @style="'filter: '+_filters.body">
		<img class="layer-basehead anim-idle-2f" @src="_img.basehead" @style="'filter: '+_filters.body">

		<<peppersprays>>
		<<if $options.tanImgEnabled>>
			<<if $skinColor.tanValues[0] isnot $skinColor.tanValues[2]>>
				<img class="layer-base anim-idle-2f" @src="_img.baseTanSwimshorts" @style="'filter: '+_filters.swimshorts">
				<img class="layer-base anim-idle-2f" @src="_img.baseTanSwimsuit_UUpper" @style="'filter: '+_filters.swimsuitTop">
				<img class="layer-base anim-idle-2f" @src="_img.baseTanSwimsuit_ULower" @style="'filter: '+_filters.swimsuitBottom">
				<img class="layer-base anim-idle-2f" @src="_img.baseTanBikini_ULower" @style="'filter: '+_filters.bikiniBottom">
			<</if>>
		<</if>>

		<<if $worn.upper.type.includes("naked") and $worn.over_upper.type.includes("naked")>>
			<<if !$worn.under_upper.type.includes("naked")>>
				<img class="layer-breasts anim-idle-2f" @src="_img['breasts'+ _breastSize + '_clothed']" @style="'filter: '+_filters.breasts">
			<<else>>
				<img class="layer-breasts anim-idle-2f" @src="_img['breasts'+ _breastSize]" @style="'filter: '+_filters.breasts">
			<</if>>
			<<if $options.tanImgEnabled and $skinColor.tanValues[0] isnot $skinColor.tanValues[1]>>
				<img class="layer-breasts anim-idle-2f" @src="_img.baseTanBikini_UUpper + _breastSize + '.png'" @style="'filter: '+_filters.bikiniTop">
			<</if>>
		<</if>>

		<!-- new pbhair extension for main pc-->
		<<if $pbdisable is "f" and $worn.lower.type.includes("naked") and $worn.under_lower.type.includes("naked")>>
			<<set _pbColour = ($makeup.pbcolour != 0 ? $makeup.pbcolour : $naturalhaircolour).replace(/ /g, '-')>>
			<<if $pblevel gt 1>>
				<div @class="'layer-pbhair pbhair-' + _pbColour">
				<img class="anim-idle-2f" @src="'img/hair/phair/pb' + $pblevel + '.png'">
				</div>
			<</if>>
			<<if $pbstrip gte 1>>
				<div @class="'layer-pbhair pbhair-' + _pbColour">
				<img class="anim-idle-2f" @src="'img/hair/phair/pbstrip' + $pbstrip + '.png'">
				</div>
			<</if>>
			<<if $player.ballsExist is true and $pblevelballs gt 1 and !$worn.genitals.name.startsWith("chastity")>>
				<div @class="'layer-pbhairballs pbhair-' + _pbColour">
				<img class="anim-idle-2f" @src="'img/hair/phair/balls/' + _penisSize + '_pb' + $pblevelballs + '.png'">
				</div>
			<</if>>
		<</if>>

		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $masturbationimages is 1>>
				<<if $leftaction is "mpenisentrance">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmballs.gif">
				<<elseif $leftaction is "mvaginaentrance">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmpussy.gif">
				<<elseif $leftaction is "manus">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmass.gif">
				<<elseif $leftaction is "manusentrance">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmass.gif">
				<<elseif $leftaction is "manusrub">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmass.gif">
				<<elseif $leftaction is "manustease">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmass.gif">
				<<elseif $leftaction is "manusprostate">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmass.gif">
				<<elseif $leftaction is "mpenisshaft">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmshaft.gif">
				<<elseif $leftaction is "mpenisglans">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmglans.gif">
				<<elseif $leftaction is "mvagina">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmpussy.gif">
				<<elseif $leftaction is "mvaginaclit">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmclit.gif">
				<<elseif $leftaction is "mvaginatease">>
				<img class="layer-leftarm" src="img/body/masturbation/leftarmpussy.gif">
				<</if>>
			<<elseif _coverLeft is false>>
				<img class="layer-leftarm" @src="_img.leftarmidle" @style="'filter: '+_filters.body">
				<<if !_disabled.includes($transformationParts.demon.wings)>>
					<<if $exposed gte 2 and $dontHide is false and $transformationParts.traits.flaunting is "default">>
						<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/demon/flauntwings/'+$transformationParts.demon.wings+'.png'">
					<<else>>
						<img class="layer-backhair anim-idle-2f" @src="'img/transformations/demon/wings/'+$transformationParts.demon.wings+'.png'">
					<</if>>
				<</if>>
				<<if !_disabled.includes($transformationParts.angel.wings)>>
					<img class="layer-backhair anim-idle-2f" @src="'img/transformations/angel/rightwing/'+$transformationParts.angel.wings+'.png'">
				<</if>>
				<<if !_disabled.includes($transformationParts.fallenAngel.wings)>>
					<img class="layer-backhair anim-idle-2f" @src="'img/transformations/fallen/rightwing/'+$transformationParts.fallenAngel.wings+'.png'">
				<</if>>
				<<if !_disabled.includes($transformationParts.bird.wings)>>
					<img class="layer-backhair colour-hair anim-idle-2f" @src="'img/transformations/bird/rightwing/'+$transformationParts.bird.wings+'.png'">
				<</if>>
				/* 北极星模组 */
				<<if !_disabled.includes($transformationParts.bee.wings)>>
					<img class="layer-backhair anim-idle-2f" @src="'img/transformations/bee/rightwing/'+$transformationParts.bee.wings+'.png'">
				<</if>>
				/* 北极星 */
			<<elseif _coverLeft is true>>
				<<if !_disabled.includes($transformationParts.demon.wings)>>
					<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/demon/leftcover/'+$transformationParts.demon.wings+'.png'">
					<img class="layer-leftarm" @src="_img.leftarmidle" @style="'filter: '+_filters.body">
					<<set _coverLeft to false>>
				<<elseif !_disabled.includes($transformationParts.angel.wings)>>
					<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/angel/rightcover/'+$transformationParts.angel.wings+'.png'">
					<img class="layer-leftarm" @src="_img.leftarmidle" @style="'filter: '+_filters.body">
					<<set _coverLeft to false>>
				<<elseif !_disabled.includes($transformationParts.fallenAngel.wings)>>
					<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/fallen/rightcover/'+$transformationParts.fallenAngel.wings+'.png'">
					<img class="layer-leftarm" @src="_img.leftarmidle" @style="'filter: '+_filters.body">
					<<set _coverLeft to false>>
				<<elseif !_disabled.includes($transformationParts.bird.wings)>>
					<img class="layer-tailPenisCover colour-hair anim-idle-2f" @src="'img/transformations/bird/rightcover/'+$transformationParts.bird.wings+'.png'">
					<img class="layer-leftarm" @src="_img.leftarmidle" @style="'filter: '+_filters.body">
					<<set _coverLeft to false>>
				<<else>>
					<img class="layer-leftarm anim-idle-2f" @src="_img.leftarm" @style="'filter: '+_filters.body">
				<</if>>
			<</if>>
		<</if>>

		<<if $rightarm isnot "bound" and $rightarm isnot "grappled" and $rightarm isnot "behind">>
			<<if $masturbationimages is 1>>
				<<if $rightaction is "mpenisentrance">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmballs.gif">
				<<elseif $rightaction is "mvaginaentrance">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmpussy.gif">
				<<elseif $rightaction is "manus">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmass.gif">
				<<elseif $rightaction is "manusentrance">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmass.gif">
				<<elseif $rightaction is "manusrub">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmass.gif">
				<<elseif $rightaction is "manustease">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmass.gif">
				<<elseif $rightaction is "manusprostate">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmass.gif">
				<<elseif $rightaction is "mpenisshaft">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmshaft.gif">
				<<elseif $rightaction is "mpenisglans">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmglans.gif">
				<<elseif $rightaction is "mvagina">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmpussy.gif">
				<<elseif $rightaction is "mvaginaclit">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmclit.gif">
				<<elseif $rightaction is "mvaginatease">>
				<img class="layer-rightarm" src="img/body/masturbation/rightarmpussy.gif">
				<</if>>
			<<elseif _coverRight is false>>
				<img class="layer-rightarm" @src="_img.rightarmidle" @style="'filter: '+_filters.body">
				<<if !_disabled.includes($transformationParts.demon.tail)>>
					<<if $exposed gte 2 and $dontHide is false and $transformationParts.traits.flaunting is "default">>
						<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/demon/flaunttail/'+$transformationParts.demon.tail+'.png'">
					<<else>>
						<img class="layer-backhair anim-idle-2f" @src="'img/transformations/demon/tail/'+$transformationParts.demon.tail+'.png'">
					<</if>>
				<</if>>
				<<if !_disabled.includes($transformationParts.angel.wings)>>
					<img class="layer-backhair anim-idle-2f" @src="'img/transformations/angel/leftwing/'+$transformationParts.angel.wings+'.png'">
				<</if>>
				<<if !_disabled.includes($transformationParts.fallenAngel.wings)>>
					<img class="layer-backhair anim-idle-2f" @src="'img/transformations/fallen/leftwing/'+$transformationParts.fallenAngel.wings+'.png'">
				<</if>>
				<<if !_disabled.includes($transformationParts.bird.wings)>>
					<img class="layer-backhair colour-hair anim-idle-2f" @src="'img/transformations/bird/leftwing/'+$transformationParts.bird.wings+'.png'">
				<</if>>
				/* 北极星模组 */
				<<if !_disabled.includes($transformationParts.bee.wings)>>
					<img class="layer-backhair anim-idle-2f" @src="'img/transformations/bee/leftwing/'+$transformationParts.bee.wings+'.png'">
				<</if>>
				/* 北极星 */
			<<elseif _coverRight is true>>
				<<if !_disabled.includes($transformationParts.demon.wings)>>
					<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/demon/rightcover/'+$transformationParts.demon.tail+'.png'">
					<img class="layer-rightarm" @src="_img.rightarmidle" @style="'filter: '+_filters.body">
					<<set _coverRight to false>>
				<<elseif !_disabled.includes($transformationParts.angel.wings)>>
					<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/angel/leftcover/'+$transformationParts.angel.wings+'.png'">
					<img class="layer-rightarm" @src="_img.rightarmidle" @style="'filter: '+_filters.body">
					<<set _coverRight to false>>
				<<elseif !_disabled.includes($transformationParts.fallenAngel.wings)>>
					<img class="layer-tailPenisCover anim-idle-2f" @src="'img/transformations/fallen/leftcover/'+$transformationParts.fallenAngel.wings+'.png'">
					<img class="layer-rightarm" @src="_img.rightarmidle" @style="'filter: '+_filters.body">
					<<set _coverRight to false>>
				<<elseif !_disabled.includes($transformationParts.bird.wings)>>
					<img class="layer-tailPenisCover colour-hair anim-idle-2f" @src="'img/transformations/bird/leftcover/'+$transformationParts.bird.wings+'.png'">
					<img class="layer-rightarm" @src="_img.rightarmidle" @style="'filter: '+_filters.body">
					<<set _coverRight to false>>
				<<else>>
					<img class="layer-rightarm" @src="_img.rightarm" @style="'filter: '+_filters.body">
				<</if>>
			<</if>>
		<</if>>

		<<if $options.bodywritingImages is true>>
			<<if $skin.forehead.writing>>
				<<if $skin.forehead.type is "text">>
					<<if $skin.forehead.sprites and $skin.forehead.sprites.length > 0 and $skin.forehead.sprites.includes('forehead')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.forehead.key + '/forehead.png'">
					<<else>>
						<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/forehead.png">
					<</if>>
				<<elseif $skin.forehead.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.forehead.writing + '/forehead.png'">
				<</if>>
			<</if>>
			<<if $skin.left_cheek.writing>>
				<<if $skin.left_cheek.type is "text">>
					<<if $skin.left_cheek.sprites and $skin.left_cheek.sprites.length > 0 and $skin.left_cheek.sprites.includes('left_cheek')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.left_cheek.key + '/left_cheek.png'">
					<<else>>
						<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/left_cheek.png">
					<</if>>
				<<elseif $skin.left_cheek.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.left_cheek.writing + '/left_cheek.png'">
				<</if>>
			<</if>>
			<<if $skin.right_cheek.writing>>
				<<if $skin.right_cheek.type is "text">>
					<<if $skin.right_cheek.sprites and $skin.right_cheek.sprites.length > 0 and $skin.right_cheek.sprites.includes('right_cheek')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.right_cheek.key + '/right_cheek.png'">
					<<else>>
						<<if $skin.right_cheek.arrow is 1>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/right_cheek_arrow.png">
						<<else>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/right_cheek.png">
						<</if>>
					<</if>>
				<<elseif $skin.right_cheek.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.right_cheek.writing + '/right_cheek.png'">
				<</if>>
			<</if>>
			<<if $skin.breasts.writing>>
				<<if $skin.breasts.type is "text">>
					<<if $skin.breasts.sprites and $skin.breasts.sprites.length > 0 and $skin.breasts.sprites.includes('breasts')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.breasts.key + '/breasts.png'">
					<<else>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/default/breasts1.png'">
						<<if _breastSize gte 2>>
							<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/default/breasts'+_breastSize+'.png'">
						<</if>>
					<</if>>
				<<elseif $skin.breasts.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.breasts.writing + '/breasts'+_breastSize+'.png'">
				<</if>>
			<</if>>
			<<if $skin.left_shoulder.writing>>
				<<if $skin.left_shoulder.type is "text">>
					<<if $skin.left_shoulder.sprites and $skin.left_shoulder.sprites.length > 0 and $skin.left_shoulder.sprites.includes('left_shoulder')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.left_shoulder.key + '/left_shoulder.png'">
					<<else>>
						<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/left_shoulder.png">
					<</if>>
				<<elseif $skin.left_shoulder.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.left_shoulder.writing + '/left_shoulder.png'">
				<</if>>
			<</if>>
			<<if $skin.right_shoulder.writing>>
				<<if $masturbationimages is 1 or _coverRight is true>>
					<<set _skin to "armS">>
				<<else>>
					<<set _skin to "s">>
				<</if>>
				<<if $skin.right_shoulder.type is "text">>
					<<if $skin.right_shoulder.sprites and $skin.right_shoulder.sprites.length > 0 and $skin.right_shoulder.sprites.includes('right_shoulder')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.right_shoulder.key + '/right_shoulder.png'">
					<<else>>
						<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/right_shoulder.png">
					<</if>>
				<<elseif $skin.right_shoulder.type is "object">>
					<img @class="'layer-' + _skin + 'kin anim-idle-2f'" @src="'img/bodywriting/' + $skin.right_shoulder.writing + '/right_shoulder.png'">
				<</if>>
			<</if>>
			<<if $skin.pubic.writing>>
				<<if $skin.pubic.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.pubic.writing + '/pubic.png'">
				<<elseif $skin.pubic.type is "text">>
					<<if $skin.pubic.sprites and $skin.pubic.sprites.length > 0 and $skin.pubic.sprites.includes('pubic')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.pubic.key + '/pubic.png'">
					<<else>>
						<<if $skin.pubic.arrow is 1>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/pubic_arrow.png">
						<<else>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/pubic.png">
						<</if>>
					<</if>>
				<</if>>
			<</if>>
			<<if $skin.left_thigh.writing>>
				<<if $skin.left_thigh.type is "text">>
					<<if $skin.left_thigh.sprites and $skin.left_thigh.sprites.length > 0 and $skin.left_thigh.sprites.includes('left_thigh')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.left_thigh.key + '/left_thigh.png'">
					<<else>>
						<<if $skin.left_thigh.arrow is 1>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/left_thigh_arrow.png">
						<<else>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/left_thigh.png">
						<</if>>
					<</if>>
				<<elseif $skin.left_thigh.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.left_thigh.writing + '/left_thigh.png'">
				<</if>>
			<</if>>
			<<if $skin.right_thigh.writing>>
				<<if $skin.right_thigh.type is "text">>
					<<if $skin.right_thigh.sprites and $skin.right_thigh.sprites.length > 0 and $skin.right_thigh.sprites.includes('right_thigh')>>
						<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/text/' + $skin.right_thigh.key + '/right_thigh.png'">
					<<else>>
						<<if $skin.right_thigh.arrow is 1>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/right_thigh_arrow.png">
						<<else>>
							<img class="layer-skin anim-idle-2f" src="img/bodywriting/text/default/right_thigh.png">
						<</if>>
					<</if>>
				<<elseif $skin.right_thigh.type is "object">>
					<img class="layer-skin anim-idle-2f" @src="'img/bodywriting/' + $skin.right_thigh.writing + '/right_thigh.png'">
				<</if>>
			<</if>>
		<</if>>

		<<faceimg>>

		<<switch setup.bodyliquid.combined("vagina")>>
			<<case 5 6 7 8 9 10>><img class="layer-tears" src="img/body/cum/VaginalCumDripVeryFast.gif">
			<<case 4>><img class="layer-tears" src="img/body/cum/VaginalCumDripFast.gif">
			<<case 3>><img class="layer-tears" src="img/body/cum/VaginalCumDripSlow.gif">
			<<case 2>><img class="layer-tears" src="img/body/cum/VaginalCumDripVerySlow.gif">
			<<case 1>><img class="layer-tears" src="img/body/cum/VaginalCumDripStart.gif">
		<</switch>>

		<<switch setup.bodyliquid.combined("anus")>>
			<<case 5 6 7 8 9 10>><img class="layer-tears" src="img/body/cum/AnalCumDripVeryFast.gif">
			<<case 4>><img class="layer-tears" src="img/body/cum/AnalCumDripFast.gif">
			<<case 3>><img class="layer-tears" src="img/body/cum/AnalCumDripSlow.gif">
			<<case 2>><img class="layer-tears" src="img/body/cum/AnalCumDripVerySlow.gif">
			<<case 1>><img class="layer-tears" src="img/body/cum/AnalCumDripStart.gif">
		<</switch>>

		<<set _shift = $facestyle == "small-eyes" ? "shift-right-2" : "">>
		<<switch setup.bodyliquid.combined("mouth")>>
			<<case 5 6 7 8 9 10>><img @class="'layer-tears '+_shift" src="img/body/cum/MouthCumDripVeryFast.gif">
			<<case 4>><img @class="'layer-tears '+_shift" src="img/body/cum/MouthCumDripFast.gif">
			<<case 3>><img @class="'layer-tears '+_shift" src="img/body/cum/MouthCumDripSlow.gif">
			<<case 2>><img @class="'layer-tears '+_shift" src="img/body/cum/MouthCumDripVerySlow.gif">
			<<case 1>><img @class="'layer-tears '+_shift" src="img/body/cum/MouthCumDripStart.png">
		<</switch>>
		<<if !_disabled.includes($transformationParts.fallenAngel.halo)>>
			<img class="layer-over_head-back anim-idle-2f" @src="'img/transformations/fallen/backbrokenhalo/'+$transformationParts.fallenAngel.halo+'.png'">
			<img class="layer-halo-front anim-idle-2f" @src="'img/transformations/fallen/frontbrokenhalo/'+$transformationParts.fallenAngel.halo+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.angel.halo)>>
			<img class="layer-over_head-back anim-idle-2f" @src="'img/transformations/angel/backhalo/'+$transformationParts.angel.halo+'.png'">
			<img class="layer-halo-front anim-idle-2f" @src="'img/transformations/angel/fronthalo/'+$transformationParts.angel.halo+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.tail)>>
			<img class="layer-backhair colour-hair anim-idle-2f" @src="'img/transformations/wolf/tail/'+$transformationParts.wolf.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.cat.tail)>>
			<img class="layer-backhair colour-hair anim-idle-2f" @src="'img/transformations/cat/tail/'+$transformationParts.cat.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.ears)>>
			<img class="layer-backhair colour-hair anim-idle-2f" @src="'img/transformations/wolf/ears/'+$transformationParts.wolf.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.pits)>>
			<img class="layer-hirsute colour-hair anim-idle-2f" @src="'img/transformations/hirsute/pits/'+$transformationParts.wolf.pits+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.pubes)>>
			<img class="layer-hirsute colour-hair anim-idle-2f" @src="'img/transformations/hirsute/pubes/'+$transformationParts.wolf.pubes+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.cheeks)>>
			<img class="layer-hirsute colour-hair anim-idle-2f" @src="'img/transformations/wolf/cheeks/'+$transformationParts.wolf.cheeks+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.cat.ears)>>
			<img class="layer-backhair colour-hair anim-idle-2f" @src="'img/transformations/cat/ears/'+$transformationParts.cat.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.demon.horns)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/demon/horns/'+$transformationParts.demon.horns+'.png'">
			/*<img class="layer-face colour-hair anim-idle-2f" src="img/transformations/demon/hair_overlay.png">*/
		<</if>>

		<<if !_disabled.includes($transformationParts.cow.horns)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/cow/horns/'+$transformationParts.cow.horns+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.cow.ears)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/cow/ears/'+$transformationParts.cow.ears+'.png'">
			<img class="layer-face anim-idle-2f" src="img/transformations/cow/tag.png">
		<</if>>

		<<if !_disabled.includes($transformationParts.cow.tail)>>
			<img class="layer-backhair anim-idle-2f" @src="'img/transformations/cow/tail/'+$transformationParts.cow.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bird.tail)>>
			<img class="layer-sexwings colour-hair anim-idle-2f" @src="'img/transformations/bird/tail/'+$transformationParts.bird.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bird.eyes)>>
			<img class="layer-irisacc anim-idle-2f" @src="'img/transformations/bird/eyes/'+$transformationParts.bird.eyes+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bird.malar)>>
			<img class="layer-sexwings colour-hair anim-idle-2f" @src="'img/transformations/bird/malar/'+$transformationParts.bird.malar+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bird.plumage)>>
			<img class="layer-sexwings colour-hair anim-idle-2f" @src="'img/transformations/bird/plumage/'+$transformationParts.bird.plumage+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bird.pubes)>>
			<img class="layer-hirsute colour-hair anim-idle-2f" @src="'img/transformations/bird/pubes/'+$transformationParts.bird.pubes+'.png'">
		<</if>>
		
		/* 北极星模组 */
		<<if !_disabled.includes($transformationParts.sheep.horns)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/sheep/horns/'+$transformationParts.sheep.horns+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.sheep.ears)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/sheep/ears/'+$transformationParts.sheep.ears+'.png'">
			<img class="layer-face anim-idle-2f" src="img/transformations/sheep/tag.png">
		<</if>>

		<<if !_disabled.includes($transformationParts.deer.horns)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/deer/horns/'+$transformationParts.deer.horns+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.deer.ears)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/deer/ears/'+$transformationParts.deer.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.deer.tail)>>
			<img class="layer-backhair anim-idle-2f" @src="'img/transformations/deer/tail/'+$transformationParts.deer.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bee.ears)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/bee/ears/'+$transformationParts.bee.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bee.tail)>>
			<img class="layer-backhair anim-idle-2f" @src="'img/transformations/bee/tail/'+$transformationParts.bee.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bear.ears)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/bear/ears/'+$transformationParts.bear.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.bear.tail)>>
			<img class="layer-backhair anim-idle-2f" @src="'img/transformations/bear/tail/'+$transformationParts.bear.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.raccoon.mask)>>
			<img class="layer-skin anim-idle-2f" @src="'img/transformations/raccoon/mask/'+$transformationParts.raccoon.mask+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.raccoon.ears)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/raccoon/ears/'+$transformationParts.raccoon.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.raccoon.tail)>>
			<img class="layer-tail anim-idle-2f" @src="'img/transformations/raccoon/tail/'+$transformationParts.raccoon.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.fish.fins)>>
			<img class="layer-horns anim-idle-2f" @src="'img/transformations/fish/fins/'+$transformationParts.fish.fins+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.fish.tail)>>
			<img class="layer-tail anim-idle-2f" @src="'img/transformations/fish/tail/'+$transformationParts.fish.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.horse.ears)>>
			<img class="layer-fronthair anim-idle-2f" @src="'img/transformations/horse/ears/'+$transformationParts.horse.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.horse.tail)>>
			<img class="layer-tail anim-idle-2f" @src="'img/transformations/horse/tail/'+$transformationParts.horse.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.pig.ears)>>
			<img class="layer-fronthair anim-idle-2f" @src="'img/transformations/pig/ears/'+$transformationParts.pig.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.pig.tail)>>
			<img class="layer-tail anim-idle-2f" @src="'img/transformations/pig/tail/'+$transformationParts.pig.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.spider.eyes)>>
			<img class="layer-irisacc anim-idle-2f" @src="'img/transformations/spider/eyes/'+$transformationParts.spider.eyes+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.spider.tail)>>
			<img class="layer-tail anim-idle-2f" @src="'img/transformations/spider/tail/'+$transformationParts.spider.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.frog.cheeks)>>
			<img class="layer-skin anim-idle-2f" @src="'img/transformations/frog/cheeks/'+$transformationParts.frog.cheeks+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.frog.eyes)>>
			<img class="layer-irisacc anim-idle-2f" @src="'img/transformations/frog/eyes/'+$transformationParts.frog.eyes+'.png'">
		<</if>>
		/* 北极星 */

		<<if $hairposition is "front">>
			<img class="layer-hairforwards colour-hair anim-idle-2f" @src="'img/hair/sides/' + $hairtype + '/' + _hairlengthstage + '.png'">
		<<else>>
			<img class="layer-backhair colour-hair anim-idle-2f" @src="'img/hair/sides/' + $hairtype + '/' + _hairlengthstage + '.png'">
		<</if>>
		<img class="layer-fronthair colour-hair anim-idle-2f" @src="'img/hair/fringe/' + $fringetype + '/' + _fringelengthstage + '.png'">

		<<if _hairlengthstage is "short">>
			<<switch $hairtype>>
				<<case "ruffled">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/ruffled/short.png">
				<<default>>
			<</switch>>
		<<elseif _hairlengthstage is "shoulder">>
			<<switch $hairtype>>
				<<case "ruffled">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/ruffled/shoulder.png">
				<<default>>
			<</switch>>
		<<elseif _hairlengthstage is "chest">>
			<<switch $hairtype>>
				<<case "ruffled">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/ruffled/chest.png">
				<<default>>
			<</switch>>
		<<elseif _hairlengthstage is "navel">>
			<<switch $hairtype>>
				<<case "ruffled">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/ruffled/navel.png">
				<<default>>
			<</switch>>
		<<elseif _hairlengthstage is "thighs">>
			<<switch $hairtype>>
				<<case "default">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/default/thighs.png">
				<<case "loose">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/loose/thighs.png">
				<<case "curl">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/curl/thighs.png">
				<<case "defined curl">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/defined curl/thighs.png">
				<<case "neat">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/neat/thighs.png">
				<<case "dreads">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/dreads/thighs.png">
				<<case "ruffled">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/ruffled/thighs.png">
				<<default>>
			<</switch>>
		<<elseif _hairlengthstage is "feet">>
			<<switch $hairtype>>
				<<case "default">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/default/feet.png">
				<<case "loose">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/loose/feet.png">
				<<case "straight">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/straight/feet.png">
				<<case "curl">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/curl/feet.png">
				<<case "defined curl">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/defined curl/feet.png">
				<<case "neat">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/neat/feet.png">
				<<case "dreads">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/dreads/feet.png">
				<<case "ruffled">>
					<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/ruffled/feet.png">
				<<default>>
			<</switch>>
		<</if>>

		<<upperimg>>
		<<overupperimg>>
		<<genitalsimg>>
		<<lowerimg>>
		<<overlowerimg>>
		<<underlowerimg>>
		<<underupperimg>>
		<<handsimg>>
		<<baseClothingImg "head">>
		<<baseClothingImg "over_head">>
		<<baseClothingImg "face">>
		<<neckimg>>
		<<baseClothingImg "legs">>
		<<baseClothingImg "feet">>

		<!-- P image insert here - This is not compatible with female pdmod, requires additional editing - add new layer in base.css-->
		<<if _penisSize isnot undefined>>
			<<if $worn.lower.exposed gte 2 and $worn.under_lower.exposed gte 1>>
				<<if playerChastity()>>
					<img class="layer-penis-chastity anim-idle-2f" @src="_img.penis_chastity" @style="'filter: '+_filters.penis">
				<<elseif $player.virginity.penile is true>>
					<img class="layer-penis anim-idle-2f" @src="_img['penis_virgin' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
				<<else>>
					<img class="layer-penis anim-idle-2f" @src="_img['penis' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
				<</if>>
			<<elseif ($lowerwetstage gt 0 or $worn.lower.type.includes("naked")) and ($underlowerwetstage gt 0 or $worn.under_lower.type.includes("naked"))>>
				<<if playerChastity()>>
					<img class="layer-genitals anim-idle-2f" @src="_img.penis_chastity" @style="'filter: '+_filters.penis">
				<<elseif $player.virginity.penile is true>>
					<img class="layer-genitals anim-idle-2f" @src="_img['penis_virgin' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
				<<else>>
					<img class="layer-genitals anim-idle-2f" @src="_img['penis' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
				<</if>>
			<</if>>
		<</if>>

		<<if $parasite.nipples.name isnot undefined>>
			<<switch $parasite.nipples.name>>
				<<case "urchin">><<set _nippleImage to "chestparasite">>
				<<case "slime">><<set _nippleImage to "chestslime">>
			<</switch>>
			<<if _nippleImage and $worn.upper.exposed gte 2 and $worn.under_upper.exposed gte 1>>
				<img class="layer-breasts anim-idle-2f" @src="'img/body/breasts/'+_nippleImage+_breastSize+'.png'">
			<<elseif _nippleImage and ($upperwetstage gt 0 or $worn.upper.type.includes("naked")) and ($underupperwetstage gt 0 or $worn.under_upper.type.includes("naked"))>>
				<img class="layer-breasts anim-idle-2f" @src="'img/body/breasts/'+_nippleImage+_breastSize+'.png'">
			<</if>>
		<</if>>

		<<if _penisSize isnot undefined and $parasite.penis.name isnot undefined and !playerChastity()>>
			<<switch $parasite.penis.name>>
				<<case "urchin">><<set _penisImage to "penisparasite">>
				<<case "slime">><<set _penisImage to "penisslime">>
			<</switch>>
			<<if _penisImage and $worn.lower.exposed gte 2 and $worn.under_lower.exposed gte 1>>
				<img class="layer-parasite anim-idle-2f" @src="'img/body/penis/'+_penisImage+_penisSize+'.png'">
			<<elseif _penisImage and ($lowerwetstage gt 0 or $worn.lower.type.includes("naked")) and ($underlowerwetstage gt 0 or $worn.under_lower.type.includes("naked"))>>
				<img class="layer-underParasite anim-idle-2f" @src="'img/body/penis/'+_penisImage+_penisSize+'.png'">
			<</if>>
		<<elseif _penisSize isnot undefined and wearingCondom("player") and !playerChastity()>>
			<<switch $player.condom.type>>
				<<case "plain">><<set _penisImage to "condom">>
			<</switch>>
			<<if _penisImage and $worn.lower.exposed gte 2 and $worn.under_lower.exposed gte 1>>
				<img @class="'layer-parasite anim-idle-2f condom-' + $player.condom.colour.replace(/ /g, '-')" @src="'img/body/penis/'+_penisImage+_penisSize+'.png'">
			<<elseif _penisImage and ($lowerwetstage gt 0 or $worn.lower.type.includes("naked")) and ($underlowerwetstage gt 0 or $worn.under_lower.type.includes("naked"))>>
				<img @class="'layer-underParasite anim-idle-2f condom-' + $player.condom.colour.replace(/ /g, '-')" @src="'img/body/penis/'+_penisImage+_penisSize+'.png'">
			<</if>>
		<</if>>

		<<if $player.vaginaExist and $parasite.clit.name isnot undefined and !playerChastity()>>
			<<switch $parasite.clit.name>>
				<<case "urchin">><<set _clitImage to "clitparasite">>
				<<case "slime">><<set _clitImage to "clitslime">>
			<</switch>>
			<<if _clitImage and $worn.lower.exposed gte 2 and $worn.under_lower.exposed gte 1>>
				<img class="layer-parasite" @src="'img/body/'+_clitImage+'.png'">
			<<elseif _penisImage and ($lowerwetstage gt 0 or $worn.lower.type.includes("naked")) and ($underlowerwetstage gt 0 or $worn.under_lower.type.includes("naked"))>>
				<img class="layer-underParasite" @src="'img/body/'+_clitImage+'.png'">
			<</if>>
		<</if>>
	<</if>>
	</div>
<</widget>>

<<widget "faceimg">>
	<<set _diagram = _args[0] ? 1 : 0>>
	<<set _animIdle = _diagram ? "" : "anim-idle-2f">>

	<<if $options.tanImgEnabled>>
		<<set _red = "/red">>
	<<else>>
		<<set _red = "">>
	<</if>>

	<img @class="'layer-facebase ' + _animIdle" @src="'img/face/' + $facestyle + _red + '/base.png'" @style="'filter: '+_filters.body">

	<<if $earsfront == true>>
		<img class="layer-ears ears" @src="'img/face/' + $facestyle + '/ears.png'" @style="'filter: '+_filters.body">
	<</if>>

	<<if $player.freckles == true and $makeup.concealer != 1>>
		<img class="layer-freckles freckles" @src="'img/face/' + $facestyle + _red + '/freckles.png'" @style="'filter: '+_filters.body">
	<</if>>

	<!-- Eyes -->
	/* 北极星模组 */
	<<if ($trauma gte ($traumamax * 0.9) and _diagram is 0) or $possessed or ($traumatized and $options.bjx_divine)>>
		<<set $traumatized to true>>
	/* 北极星 */
		<<set _iris = "irisempty">>
		<<set _trauma = "-trauma">>
	<<else>>
		<<set _iris = "iris">>
		<<set _trauma = "">>
	<</if>>
	<<if $options.blinkingEnabled and _diagram is 0>>
		<<set _blink = "eyes-blink" + _trauma>>
	<<else>>
		<<set _blink = "">>
	<</if>>
	<<if $pain gte 100 and $willpowerpain is 0 and _diagram is 0>>
		<<set _sclera = "sclerabloodshot">>
	<<else>>
		<<set _sclera = "sclera">>
	<</if>>
	<<if $options.halfClosedEnabled and ($arousal gte ($arousalmax / 5) * 4 or $orgasmdown gte 1) and _trauma is "" and $pain lt 60 and _diagram is 0 and $eyelidTEST is true or $possessed>>
		<<set _half = "_halfclosed">>
	<<else>>
		<<set _half = "">>
	<</if>>

	<<run defineCustomEyeColourStyle()>> /* define Filter: css style for eyes for old renderer */

	<<if $possessed>>
		<<set _colourEye to (["haunt", "despair"].includes($wraith.state) ? "eye-redPossessed" : "eye-bluePossessed")>>
	<<else>>
		<<set _colourEye to "">>
		<<if $passage == "Start">>
			<<set _colourEyeLeft to "eye-" + $eyeselect>>
			<<set _colourEyeRight to "eye-" + $eyeselect>>
			<<script>>T.colourEyeLeft = T.colourEyeLeft.replace(/\s/g, '-')<</script>>
			<<script>>T.colourEyeRight = T.colourEyeRight.replace(/\s/g, '-')<</script>>
		<<else>>
			<<if $makeup.eyelenses.left == 0>>
				<<set _colourEyeLeft to "eye-" + $leftEyeColour>>
				<<script>>T.colourEyeLeft = T.colourEyeLeft.replace(/\s/g, '-')<</script>>
			<<else>>
				<<set _colourEyeLeft to "eye-" + $makeup.eyelenses.left>>
				<<script>>T.colourEyeLeft = T.colourEyeLeft.replace(/\s/g, '-')<</script>>
			<</if>>
			<<if $makeup.eyelenses.right == 0>>
				<<set _colourEyeRight to "eye-" + $rightEyeColour>>
				<<script>>T.colourEyeRight = T.colourEyeRight.replace(/\s/g, '-')<</script>>
			<<else>>
				<<set _colourEyeRight to "eye-" + $makeup.eyelenses.right>>
				<<script>>T.colourEyeRight = T.colourEyeRight.replace(/\s/g, '-')<</script>>
			<</if>>
		<</if>>
	<</if>>
	<<run defineCustomEyeColourStyle()>> /* define Filter: css style for eyes for old renderer */
	<img class="layer-eyes" @src="'img/face/' + $facestyle + _red + '/eyes.png'" @style="'filter: '+_filters.body">
	<img class="layer-sclera" @src="'img/face/' + $facestyle + '/' + _sclera + '.png'">
	<img @style="_custom_eyelenses_left_style" @class="'layer-iris' + _colourEye + ' left-iris ' + _colourEyeLeft + ' ' + _animIdle" @src="'img/face/' + $facestyle + '/' + _iris + _half + '_left.png'">
	<img @style="_custom_eyelenses_right_style" @class="'layer-iris' + _colourEye + ' right-iris ' + _colourEyeRight + ' ' + _animIdle" @src="'img/face/' + $facestyle + '/' + _iris + _half + '_right.png'">
	<img @class="'layer-eyelids ' + _blink" @src="'img/face/' + $facestyle + _red + '/eyelids' + _half + '.png'" @style="'filter: '+_filters.body">
	<img @class="'layer-lashes ' + _blink" @src="'img/face/' + $facestyle + '/lashes' + _half + '.png'">

	<<if _diagram is 0>>
		<<if $makeup.eyeshadow != 0>>
			<img @class="'layer-eyelids ' + _blink + ' eyeshadow-' + $makeup.eyeshadow.replace(/ /g, '-')" @src="'img/face/' + $facestyle + '/makeup/eyeshadows' + _half + '.png'">
		<</if>>
		<<if $makeup.mascara != 0>>
			<img @class="'layer-lashes ' + _blink + ' mascara-' + $makeup.mascara.replace(/ /g, '-')" @src="'img/face/' + $facestyle + '/makeup/mascara' + _half + '.png'">
		<</if>>
	<</if>>

	<!-- Brows -->
	<<if $trauma gte $traumamax or $possessed or _diagram is 1>>
		<<set _brows = "top">>
	<<elseif $pain gte 60>>
		<<set _brows = "low">>
	<<elseif $arousal gte ($arousalmax / 5) * 4 or $orgasmdown gte 1>>
		<<set _brows = "orgasm">>
	<<elseif $pain gte 20>>
		<<set _brows = "mid">>
	<<else>>
		<<set _brows = "top">>
	<</if>>
	<<if $makeup.browscolour != 0>>
		<<set _naturalColour = "">>
		<<set _browsColour = "brows-" + $makeup.browscolour.replace(/ /g, '-')>>
	<<else>>
		<<set _naturalColour = "hair-" + $naturalhaircolour.replace(/ /g, '-')>>
		<<set _browsColour = "colour-hair">>
	<</if>>
	<<if $browsposition is "back">>
		<div @class="'layer-backbrow ' + _naturalColour">
			<img @class="_browsColour" @src="'img/face/' + $facestyle + '/brow' + _brows + '.png'">
		</div>
	<<else>>
		<div @class="'layer-brow ' + _naturalColour">
			<img @class="_browsColour" @src="'img/face/' + $facestyle + '/brow' + _brows + '.png'">
		</div>
	<</if>>


	<!-- Mouth -->
	<<if $trauma gte $traumamax or _diagram is 1>>
		<<set _mouth = "neutral">>
	<<elseif $pain gte 60 or $orgasmdown gte 1 or ($possessed)>>
		<<set _mouth = "cry">>
	<<elseif $exposed is 2 and $uncomfortable.nude is true and $dontHide is false or $pain gte 20>>
		<<set _mouth = "frown">>
	<<elseif $pain gte 1 or ($exposed is 1 and $uncomfortable.underwear is true) or ($combat is 1 and $consensual isnot 1)>>
		<<set _mouth = "neutral">>
	<<else>>
		<<set _mouth = "smile">>
	<</if>>
	<img class="layer-mouth" @src="'img/face/' + $facestyle + _red + '/mouth' + _mouth + '.png'" @style="'filter: ' + _filters.mouth">

	<<if $makeup.lipstick != 0 and _diagram is 0>>
		<img @class="'layer-mouth lipstick-' + $makeup.lipstick.replace(/ /g, '-')" @src="'img/face/' + $facestyle + '/makeup/lipstick_' + _mouth + '.png'">
	<</if>>

	<!-- Don't draw blush or tears on a static diagram -->
	<<if _diagram is 0>>
		<!-- Blush -->
		<<set _blush = Math.min(5, Math.floor($arousal / 2000) + 1)>>
		<<if _blush lt 2 and $exposed gte 2>>
			<<set _blush = 2>>
		<<elseif $arousal lt 100 and $exposed lt 1>>
			<<set _blush = 0>>
		<</if>>
		<<if !$worn.over_upper.type.includes("naked") and !$worn.over_lower.type.includes("naked") and
		$worn.upper.type.includes("naked") and $worn.lower.type.includes("naked") and
		$worn.under_upper.type.includes("naked") and $worn.under_lower.type.includes("naked")>>
			<<set _blush = 2>>
		<</if>>
		<<if _blush gte 1>>
			<img class="layer-blush" @src="'img/face/' + $facestyle + _red + '/blush' + _blush + '.png'">
		<</if>>

		<!-- Tears -->
		<<if $pain gte 20>>
			<img class="layer-tears anim-idle-2f" @src="'img/face/' + $facestyle + '/' + 'tear' + painToTearsLvl($pain) + '.png'">
			<<if $makeup.mascara != 0>>
				<img @class="'layer-lashes ' + _blink + ' mascara-' + $makeup.mascara.replace(/ /g, '-')" @src="'img/face/' + $facestyle + '/' + 'makeup/mascara' + painToTearsLvl($pain) + '.png'">
			<</if>>
		<</if>>
	<</if>>
	<<if $passage == "Pharmacy Select Custom Lenses">>
		<<unset _custom_eyelenses_right_style>>
		<<unset _custom_eyelenses_left_style>>
	<</if>>
<</widget>>

:: Widgets Combat Clothes Img [widget]
<<widget "clothesactive">>
	<<imgOpacity>>
	<div class="i256">

	<<if $worn.head.name isnot "naked" and !$worn.head.hood>>
		<img @class="'layer-sexsleeve colour-head anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/head/'+$worn.head.variable+'/full.png'" @style="$worn.head.colourCustom">
		<<if $worn.head.accessory is 1>>
			<img @class="'layer-sexsleeve colour-head_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/head/'+$worn.head.variable+'/acc.png'" @style="($worn.head.accessory_colour is 'custom' ? $worn.head.accessory_colourCustom : '')">
		<</if>>
		<<if $worn.head.back_img is 1 or $worn.head.back_img is "combat">>
			<img @class="'layer-sexlower colour-head anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/head/'+$worn.head.variable+'/back.png'" @style="$worn.head.colourCustom">
		<</if>>
	<</if>>

	<<if $worn.upper.set is $worn.lower.set and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
		<<set $_skirtOutfit to true>>
		<<if $worn.upper.name is "large towel">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/largetowel/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "waist">>
			<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt_down is 1>>
				<img @class="'layer-sexlower colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/dress/doggyactive_dress_thighs.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt_down is 0>>
				<img @class="'layer-sexlower colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/dress/doggyactive_dress_hips.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<elseif $worn.upper.state is "midriff">>
			<img @class="'layer-sexlower colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/dress/doggyactive_dress_tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img @class="'layer-sexlower colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/dress/doggyactive_dress_neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>

	/* _feet_pos is set to "footjob_" for doggy images, but "feetjob_" for missionary images. */
	<<if $feetuse is "penis" or $feetstate is "tentacles">>
		<<set _feet_pos to "footjob_">>
	<<else>>
		<<set _feet_pos to "">>
	<</if>>

	<<if $worn.lower.name is "gym bloomers">>
		<<if $worn.lower.state is "waist">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<<elseif $worn.lower.name is "rag skirt">>
		<<if $worn.lower.state is "waist">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/ragskirt/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/ragskirt/thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/ragskirt/knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/ragskirt/footjob_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/ragskirt/ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "denim shorts">>
		<<if $worn.lower.state is "waist">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/denimshorts/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/denimshorts/thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/denimshorts/knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/denimshorts/ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/denimshorts/footjob_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "booty jorts">>
		<<if $worn.lower.state is "waist">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/bootyjorts/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/bootyjorts/thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/bootyjorts/knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/bootyjorts/footjob_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/bootyjorts/ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif !$worn.lower.type.includes("naked") and !$_skirtOutfit>>
		<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
			<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<<if $worn.lower.skirt_down is 0 and $worn.lower.state is "waist">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/skirt/doggyactive_skirt_waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.vagina_exposed is 1>>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/skirt/doggyactive_skirt_waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "waist">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/skirt/doggyactive_skirt_hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "thighs">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/skirt/doggyactive_skirt_thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "knees">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/skirt/doggyactive_skirt_knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "ankles">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/skirt/doggyactive_skirt_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<<else>>
				<<if $worn.lower.state is "waist">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'waist.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "thighs">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'thighs.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "knees">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'knees.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "ankles">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'ankles.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<</if>>
		<<elseif $worn.lower.state is "waist">>
			<<if $worn.lower.name is "jeans">>
				<img @class="'layer-sexlower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'waist.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'waist.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'waist.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<elseif $worn.lower.state is "thighs">>
			<<if $worn.lower.name is "jeans">>
				<img @class="'layer-sexlower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'thighs.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'thighs.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'thighs.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<elseif $worn.lower.state is "knees">>
			<<if $worn.lower.name is "jeans">>
				<img @class="'layer-sexlower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'knees.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'knees.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'knees.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<elseif $worn.lower.state is "ankles">>
			<<if $worn.lower.name is "jeans">>
				<img @class="'layer-sexlower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'ankles.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'ankles.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'ankles.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.under_lower.name is "bikini bottoms">>
		<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/bikinibottom/doggyactive_bikinibottom_' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
	<<elseif $worn.under_lower.name is "highwaisted microkini bottom">>
		<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/under_lower/highmicrokini/' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
	<<elseif $worn.under_lower.name is "cow panties">>
		<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/cowpanties/waist.png">
	<<elseif $worn.under_lower.type.includes("strap-on") and $worn.lower.vagina_exposed is 1>>
		<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/strapon/doggyactive_strapon_' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
	<<elseif $worn.under_lower.name is "thong" or $worn.under_lower.name is "microkini bottom">>
		<<if $worn.under_lower.state is "waist">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/thong/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "totheside">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/thong/totheside.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "thighs">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/thong/thighs.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "knees">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/thong/knees.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/thong/footjob_ankles.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/thong/ankles.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif !$worn.under_lower.type.includes("naked")>>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_hips.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "thighs">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_thighs.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "knees">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_knees.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "ankles">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_ankles.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.upper.name is "tank top">>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $worn.upper.state is "waist">>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<else>>
			<<if $worn.upper.state is "waist">>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_boundwaist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">

			<<else>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_boundneck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>

	<<elseif $worn.upper.name is "tube top" or $worn.upper.name is "towel top">>
		<<if $worn.upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tit = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tit = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tit = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tit = "large">>
			<<else>>
				<<set _tit = "huge">>
			<</if>>
		<</if>>
		<<set _tubeimg = $worn.upper.state_top>>
		<<if _tubeimg is "ankles" and ($feetuse is "penis" or $feetstate is "tentacle")>>
			<<set _tubeimg += "feetjob">>
		<</if>>
		<<if (_tubeimg is "chest" or _tubeimg is "midriff") and ($leftarm is "bound" or $leftarm is "grappled" or $leftarm is "behind")>>
			<<set _tubeimg += "bound">>
		<</if>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/tubetop/'+_tubeimg+'.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<if _tit>>
			<img @class="'layer-sexbreastupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/tubetop/'+_tit+'.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>

	<<elseif $worn.upper.name is "gym shirt">>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $worn.upper.state is "waist">>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img @class="'layer-sexupper colour-upper_acc anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/waist_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img @class="'layer-sexupper colour-upper_acc anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/neck_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<else>>
			<<if $worn.upper.state is "waist">>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/boundwaist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img @class="'layer-sexupper colour-upper_acc anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/boundwaist_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/boundneck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img @class="'layer-sexupper colour-upper_acc anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/gymshirt/boundneck_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>

	<<elseif $worn.upper.name is "rag top">>
		<<if $player.perceived_breastsize is 0>>
			<<set _tit = "none">>
		<<elseif $player.perceived_breastsize lte 2>>
			<<set _tit = "tiny">>
		<<elseif $player.perceived_breastsize lte 4>>
			<<set _tit = "small">>
		<<elseif $player.perceived_breastsize lte 6>>
			<<set _tit = "large">>
		<<else>>
			<<set _tit = "huge">>
		<</if>>
		<img @class="'layer-sexbreastupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/ragtop/'+_tit+'.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">

	<<elseif $worn.upper.name is "virgin killer">>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/virginkiller/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater">>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/sweater/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/long turtleneck/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "turtleneck">>
		<<switch $player.perceived_breastsize>>
			<<case 8 9 10 11 12>>
						<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '4') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 5 6 7>>
						<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '3') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 3 4>>
						<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '2') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 1 2>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '1') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 0>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '0') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</switch>>
	<<elseif !$worn.upper.type.includes("naked") and !$_skirtOutfit>>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $worn.upper.state is "waist">>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<else>>
			<<if $worn.upper.state is "waist">>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_boundwaist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_boundneck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>
	<</if>>

	<<if setup.clothes.upper[clothesIndex('upper', $worn.upper)].sleeve_img is 1 and $worn.upper.name isnot "t-shirt">>
		<<if $worn.upper.name is "turtleneck">>
			<<set _sleeves to "turtleneck">>
		<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater" or $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
			<<set _sleeves to "sweatersleeves">>
		<<else>>
			<<set _sleeves to "sleeves">>
		<</if>>
		<<if $leftarm is "bound" or $leftarm is "grappled" or $leftarm is "behind">>
			<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/left_sleeve_bound.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $leftarm is "penis" or $leftarmstate is "tentacle">>
			<<if $enemytype is "beast">>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/left_sleeve_handjob_beast.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/left_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<else>>
			<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/left_sleeve.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
		<<if $rightarm is "penis" or $rightarmstate is "tentacle">>
			<<if $enemytype is "beast">>
				<img @class="'layer-sexsleeveback colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/right_sleeve_handjob_beast.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexsleeveback colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/right_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<elseif $rightarm isnot "bound" and $rightarm isnot "grappled" and $rightarm isnot "behind">>
			<img @class="'layer-sexsleeveback colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/right_sleeve.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.under_upper.name is "bikini top">>
		<<if $worn.under_upper.state isnot "chest" and $worn.under_upper.state isnot "midriff">>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/bikinitop/doggyactive_bikinitop_thorax.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/bikinitop/doggyactive_bikinitop_'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<<elseif $worn.under_upper.name is "cow bra">>
		<<if $worn.under_upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tit = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tit = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tit = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tit = "large">>
			<<else>>
				<<set _tit = "huge">>
			<</if>>
		<</if>>
		<img @class="'layer-sexbreastunderupper colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/cowbra/'+_tit+'.png'">
	<<elseif $worn.under_upper.name is "tape">>
		<<if $player.perceived_breastsize is 0>>
			<<set _size to "none">>
		<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
			<<set _size to "tiny">>
		<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
			<<set _size to "small">>
		<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
			<<set _size to "large">>
		<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
			<<set _size to "huge">>
		<</if>>
		<img @class="'layer-sexbreastunderupper colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/tape/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif $worn.under_upper.name is "mesh shirt">>
		<<if $worn.under_upper.exposed is 0>>
			<<if $player.perceived_breastsize is 0>>
				<<set _size to "none">>
			<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
				<<set _size to "tiny">>
			<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
				<<set _size to "small">>
			<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
				<<set _size to "large">>
			<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
				<<set _size to "huge">>
			<</if>>
			<img @class="'layer-sexbreastunderupper colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/mesh/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>

		<<if $worn.under_upper.state is "midriff">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "neck">>
		<</if>>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<set _bound to "">>
		<<else>>
			<<set _bound to "bound">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/mesh/doggyactive_mesh_'+_bound+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">

	<<elseif $worn.under_upper.name is "chest wrap">>
		<<if $worn.under_upper.exposed is 0>>
			<<if $player.perceived_breastsize is 0>>
				<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/chestwrap/none.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
				<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/chestwrap/tiny.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
				<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/chestwrap/small.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
				<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/chestwrap/large.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
				<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/chestwrap/huge.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.under_upper.name is "swim shirt">>
		<<if $worn.under_upper.state is "midriff" or $worn.under_upper.state is "waist">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "neck">>
		<</if>>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<set _bound to "">>
		<<else>>
			<<set _bound to "bound">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/swimshirt/'+_bound+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif $worn.under_upper.name is "shibari ropes">>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shibari/'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif !$worn.under_upper.type.includes("naked")>>
		<<if $worn.under_upper.state isnot "chest" and $worn.under_upper.state isnot "midriff">>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/bikinitop/doggyactive_bikinitop_thorax.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/bikinitop/doggyactive_bikinitop_'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.face.variable.startsWith("gag")>>
		<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/facewear/gag/full.png" @style="$worn.face.colourCustom">
		<<if $worn.face.type.includes("blindfold")>>
			<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/facewear/blindfold/full.png" @style="$worn.face.colourCustom">
		<</if>>
	<<elseif $worn.face.variable.startsWith("muzzle")>>
		<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/facewear/muzzle/full.png" @style="$worn.face.colourCustom">
	<<elseif $worn.face.name is "islander mask">>
		<img @class="'layer-sexsleeve anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/facewear/'+$worn.face.variable+'/full.png'">
	<<elseif $worn.face.name isnot "naked">>
		<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/facewear/'+$worn.face.variable+'/full.png'" @style="$worn.face.colourCustom">
		<<if $worn.face.accessory is 1>>
			<img @class="'layer-sexunder anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/facewear/'+$worn.face.variable+'/acc.png'" @style="$worn.face.accessory.colour">
		<</if>>
	<</if>>

	<<if $worn.neck.name is "cow bell">>
		<img @class="'layer-sexunder anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/cow/full.png">
	<<elseif $worn.neck.name is "necktie">>
		<img @class="'layer-sextiedoggy colour-neck anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/tie/neck.png">
	<<elseif $worn.neck.name is "scarf">>
		<img @class="'layer-sexunder colour-neck anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/scarf/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<<elseif $worn.neck.name is "gold choker">>
		<img @class="'layer-sexunder anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/goldchoker/full.png">
	<<elseif $worn.neck.name is "cloth choker">>
		<img @class="'layer-sexunder colour-neck anim-doggy-4f-'+_animspeed" src="img/sex/doggy/active/clothchoker/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<</if>>

	<<if $worn.hands.name isnot "naked">>
		<<if $worn.hands.leftImage is 1>>
			<<if $leftarm is "penis">>
				<<if $enemytype isnot "beast">>
					<img @class="'layer-sexunder colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/left handjob.png'" @style="$worn.hands.colourCustom">
				<</if>>
			<<elseif $leftarm is "bound">>
			<<elseif $leftarm is "grappled">>
			<<elseif $leftarm is "behind">>
			<<elseif $leftarmstate is "tentacle">>
			<<else>>
				<img @class="'layer-sexunder colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/left hand.png'" @style="$worn.hands.colourCustom">
			<</if>>
		<</if>>
		<<if $worn.hands.rightImage is 1>>
			<<if $rightarm is "penis">>
				<<if $enemytype isnot "beast">>
					<img @class="'layer-sexBackArm colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/right handjob.png'" @style="$worn.hands.colourCustom">
				<</if>>
			<<elseif $rightarm is "bound">>
			<<elseif $rightarm is "grappled">>
			<<elseif $rightarm is "behind">>
			<<elseif $rightarmstate is "tentacle">>
			<<else>>
				<img @class="'layer-sexBackArm colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/right hand.png'" @style="$worn.hands.colourCustom">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.feet.type.includes("heels") or ["light-up trainers"].includes($worn.feet.name)>>
		<<set _feetjob to ($feetuse is 'penis' ? 'feetjob' : $feetstate is 'tentacle' ? 'feetjob' : 'thighs')>>
		<<if $worn.feet.colour>>
			<<set _shoeColour to $worn.feet.colourCustom>>
		<</if>>
		<<if $worn.feet.accessory_colour>>
			<<set _shoeAccColour to $worn.feet.accessory_colourCustom>>
		<</if>>
		<img @class="'layer-sexunder colour-feet anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shoes/' + $worn.feet.variable + '/' + _feetjob + '.png'" @style="_shoeColour">
		<<if $worn.feet.accessory>>
			<<if $worn.feet.accessory_colour isnot 0>>
				<img @class="'layer-sexshoes colour-feet_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shoes/' + $worn.feet.variable + '/' + _feetjob + 'acc.png'" @style="_shoeColour">
			<<else>>
				<img @class="'layer-sexshoes anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/shoes/' + $worn.feet.variable + '/' + _feetjob + 'acc.png'">
			<</if>>
		<</if>>
	<</if>>

	<<if !$worn.legs.type.includes("naked")>>
		<<if $feetuse is "penis" or $feetstate is "tentacle">>
			<<set _feetjob to "feetjob">>
		<<else>>
			<<set _feetjob to "rest">>
		<</if>>
		<<if $worn.legs.state is setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base>>
			<<set _feetposition to "full">>
		<<else>>
			<<set _feetposition to "knees">>
		<</if>>
		<<if $worn.legs.colour>>
			<<set _legColour to $worn.legs.colourCustom>>
		<</if>>
		<<if $worn.legs.accessory_colour>>
			<<set _legAccColour to $worn.legs.accessory_colourCustom>>
		<</if>>

		<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].colour_combat is 0>>
			<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "waist">>
				<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + '.png'" @style="_legColour">
			<<elseif setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "ankles">>
				<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + '.png'" @style="_legColour">
				<img @class="'layer-sexskinback colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + '.png'" @style="_legColour">
			<<else>>
				<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + '.png'" @style="_legColour">
				<img @class="'layer-sexskinback colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + '.png'" @style="_legColour">
			<</if>>
		<</if>>
		<<if $worn.legs.accessory and setup.clothes.legs[clothesIndex('legs', $worn.legs)].accessory_colour_combat is 0>>
			<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "waist">>
				<img @class="'layer-sexlegsacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'acc.png'" @style="_legAccColour">
			<<elseif setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "ankles">>
				<img @class="'layer-sexlegsacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + 'acc.png'" @style="_legAccColour">
				<img @class="'layer-sexlegsbackacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + 'acc.png'" @style="_legAccColour">
			<<else>>
				<img @class="'layer-sexlegsacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + 'acc.png'" @style="_legAccColour">
				<img @class="'layer-sexlegsbackacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + 'acc.png'" @style="_legAccColour">
			<</if>>
		<</if>>
	<</if>>

	</div>
<</widget>>

<<widget "clothesidle">>
	<<imgOpacity>>
	<div class="i256">

	<<if $worn.head.name isnot "naked" and !$worn.head.hood>>
		<img class="layer-sexsleeve colour-head anim-idle-2f" @src="'img/sex/doggy/active/head/'+$worn.head.variable+'/full.png'" @style="$worn.head.colourCustom">
		<<if $worn.head.accessory is 1>>
			<img class="layer-sexsleeve colour-head_acc anim-idle-2f" @src="'img/sex/doggy/active/head/'+$worn.head.variable+'/acc.png'" @style="($worn.head.accessory_colour is 'custom' ? $worn.head.accessory_colourCustom : '')">
		<</if>>
		<<if $worn.head.back_img is 1 or $worn.head.back_img is "combat">>
			<img class="layer-sexlower colour-head anim-idle-2f" @src="'img/sex/doggy/active/head/'+$worn.head.variable+'/back.png'" @style="$worn.head.colourCustom">
		<</if>>
	<</if>>

	<<if $worn.upper.set is $worn.lower.set and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
		<<set $_skirtOutfit to true>>
		<<if $worn.upper.name is "large towel">>
			<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/largetowel/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "waist">>
			<<if $worn.lower.skirt_down is 1>>
				<img class="layer-sexlower colour-upper anim-idle-2f" src="img/sex/doggy/active/dress/doggyactive_dress_thighs.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<elseif $worn.lower.skirt_down is 0>>
				<img class="layer-sexlower colour-upper anim-idle-2f" src="img/sex/doggy/active/dress/doggyactive_dress_hips.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<elseif $worn.upper.state is "midriff">>
			<img class="layer-sexlower colour-upper anim-idle-2f" src="img/sex/doggy/active/dress/doggyactive_dress_tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img class="layer-sexlower colour-upper anim-idle-2f" src="img/sex/doggy/active/dress/doggyactive_dress_neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>

	<<if $feetuse is "penis" or $feetstate is "tentacles">>
		<<set _feet_pos to "footjob_">>
	<<else>>
		<<set _feet_pos to "">>
	<</if>>

	<<if $worn.lower.name is "towel skirt">>
		<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1 and $worn.lower.skirt_down is 0 and $worn.lower.state is "waist">>
			<img class="layer-sexlower colour-lower anim-idle-2f"
			@src="'img/sex/doggy/active/lowertowel/doggyactive_towel_skirtup.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<else>>
			<img class="layer-sexlower colour-lower anim-idle-2f"
			@src="'img/sex/doggy/active/lowertowel/doggyactive_towel_' + $worn.lower.state + '.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<<elseif $worn.lower.name is "gym bloomers">>
		<<if $worn.lower.state is "waist">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/gymbloomers/doggyactive_shorts_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<<elseif $worn.lower.name is "denim shorts">>
		<<if $worn.lower.state is "waist">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/denimshorts/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/denimshorts/thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/denimshorts/knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/denimshorts/footjob_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/denimshorts/ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "booty jorts">>
		<<if $worn.lower.state is "waist">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/bootyjorts/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/bootyjorts/thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/bootyjorts/knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/bootyjorts/footjob_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/bootyjorts/ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "rag skirt">>
		<<if $worn.lower.state is "waist">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/ragskirt/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "thighs">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/ragskirt/thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "knees">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/ragskirt/knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/ragskirt/footjob_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/ragskirt/ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "micro pleated skirt">>
		<<switch $worn.lower.state>>
			<<case "waist">>
				<<if $worn.lower.skirt_down is 0>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/micropleatedskirt/waist.png"
					@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<else>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/micropleatedskirt/hips.png"
					@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<<case "thighs">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/micropleatedskirt/thighs.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "knees">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/micropleatedskirt/knees.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "ankles">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/micropleatedskirt/ankles.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</switch>>
	<<elseif !$worn.lower.type.includes("naked") and !$_skirtOutfit>>
		<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
			<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<<if $worn.lower.skirt_down is 0 and $worn.lower.state is "waist">>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/skirt/doggyactive_skirt_waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.vagina_exposed is 1>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/skirt/doggyactive_skirt_waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "waist">>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/skirt/doggyactive_skirt_hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "thighs">>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/skirt/doggyactive_skirt_thighs.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "knees">>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/skirt/doggyactive_skirt_knees.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "ankles">>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/doggy/active/skirt/doggyactive_skirt_ankles.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<<else>>
				<<if $worn.lower.state is "waist">>
					<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'waist.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "thighs">>
					<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'thighs.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "knees">>
					<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'knees.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<elseif $worn.lower.state is "ankles">>
					<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/longskirt/' + _feet_pos + 'ankles.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<</if>>
		<<elseif $worn.lower.state is "waist">>
			<<if $worn.lower.name is "jeans">>
				<img class="layer-sexlower anim-idle-2f" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'waist.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'waist.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'waist.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<elseif $worn.lower.state is "thighs">>
			<<if $worn.lower.name is "jeans">>
				<img class="layer-sexlower anim-idle-2f" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'thighs.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'thighs.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'thighs.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<elseif $worn.lower.state is "knees">>
			<<if $worn.lower.name is "jeans">>
				<img class="layer-sexlower anim-idle-2f" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'knees.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'knees.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'knees.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<elseif $worn.lower.state is "ankles">>
			<<if $worn.lower.name is "jeans">>
				<img class="layer-sexlower anim-idle-2f" @src="'img/sex/doggy/active/jeans/' + _feet_pos + 'ankles.png'">
			<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/shorts/' + _feet_pos + 'ankles.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/doggy/active/trousers/' + _feet_pos + 'ankles.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.under_lower.name is "bikini bottoms">>
		<img class="layer-sexunder colour-under_lower anim-idle-2f"
		@src="'img/sex/doggy/active/bikinibottom/doggyactive_bikinibottom_' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
	<<elseif $worn.under_lower.name is "highwaisted microkini bottom">>
		<img class="layer-sexunder colour-under_lower anim-idle-2f"
		@src="'img/sex/doggy/active/under_lower/highmicrokini/' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
	<<elseif $worn.under_lower.name is "cow panties">>
		<img class="layer-sexunder colour-under_lower anim-doggy-2f" src="img/sex/doggy/active/cowpanties/waist.png">
	<<elseif $worn.under_lower.type.includes("strap-on") and $worn.lower.vagina_exposed is 1>>
		<img class="layer-sexunder colour-under_lower anim-idle-2f"
		@src="'img/sex/doggy/active/strapon/doggyactive_strapon_' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
	<<elseif $worn.under_lower.name is "thong" or $worn.under_lower.name is "microkini bottom">>
		<<if $worn.under_lower.state is "waist">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/thong/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "totheside">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/thong/totheside.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "thighs">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/thong/thighs.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "knees">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/thong/knees.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "ankles">>
			<<if _feet_pos is "footjob_">>
				<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/thong/footjob_ankles.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
				<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/thong/ankles.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif !$worn.under_lower.type.includes("naked")>>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_hips.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "thighs">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_thighs.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "knees">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_knees.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<<elseif $worn.under_lower.state is "ankles">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/doggy/active/plainpanties/doggyactive_plainpanties_ankles.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.upper.name is "tube top" or $worn.upper.name is "towel top">>
		<<if $worn.upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tit = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tit = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tit = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tit = "large">>
			<<else>>
				<<set _tit = "huge">>
			<</if>>
		<</if>>
		<<set _tubeimg = $worn.upper.state_top>>
		<<if _tubeimg is "ankles" and ($feetuse is "penis" or $feetstate is "tentacle")>>
			<<set _tubeimg += "feetjob">>
		<</if>>
		<<if (_tubeimg is "chest" or _tubeimg is "midriff") and ($leftarm is "bound" or $leftarm is "grappled" or $leftarm is "behind")>>
			<<set _tubeimg += "bound">>
		<</if>>
		<img class="layer-sexupper colour-upper" @src="'img/sex/doggy/active/tubetop/'+_tubeimg+'.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<if _tit>>
			<img class="layer-sexbreastupper colour-upper" @src="'img/sex/doggy/active/tubetop/'+_tit+'.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>

	<<elseif $worn.upper.name is "tank top">>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $worn.upper.state is "waist">>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<else>>
			<<if $worn.upper.state is "waist">>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_boundwaist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/tanktop/doggyactive_tanktop_boundneck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.upper.name is "gym shirt">>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $worn.upper.state is "waist">>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/gymshirt/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img class="layer-sexupper colour-upper_acc anim-idle-2f" src="img/sex/doggy/active/gymshirt/waist_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/gymshirt/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img class="layer-sexupper colour-upper_acc anim-idle-2f" src="img/sex/doggy/active/gymshirt/neck_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<else>>
			<<if $worn.upper.state is "waist">>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/gymshirt/boundwaist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img class="layer-sexupper colour-upper_acc anim-idle-2f" src="img/sex/doggy/active/gymshirt/boundwaist_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/gymshirt/boundneck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<img class="layer-sexupper colour-upper_acc anim-idle-2f" src="img/sex/doggy/active/gymshirt/boundneck_acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.upper.name is "rag top">>
		<<if $player.perceived_breastsize is 0>>
			<<set _tit = "none">>
		<<elseif $player.perceived_breastsize lte 2>>
			<<set _tit = "tiny">>
		<<elseif $player.perceived_breastsize lte 4>>
			<<set _tit = "small">>
		<<elseif $player.perceived_breastsize lte 6>>
			<<set _tit = "large">>
		<<else>>
			<<set _tit = "huge">>
		<</if>>
		<img class="layer-sexbreastupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/ragtop/'+_tit+'.png'">
	<<elseif $worn.upper.name is "virgin killer">>
		<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/virginkiller/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater">>
		<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/sweater/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
		<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/long turtleneck/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "turtleneck">>
		<<switch $player.perceived_breastsize>>
			<<case 8 9 10 11 12>>
						<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '4') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 5 6 7>>
						<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '3') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 3 4>>
						<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '2') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 1 2>>
				<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '1') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<case 0>>
				<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/doggy/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' ? ('_' + '0') : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</switch>>
	<<elseif $worn.upper.name is "tie-front top">>
		<<if $worn.upper.state is "waist">>
			<<switch $player.perceived_breastsize>>
				<<case 8 9 10 11 12>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/doggy/active/tiefronttop/huge.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 5 6 7>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/doggy/active/tiefronttop/large.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 3 4>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/doggy/active/tiefronttop/small.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 1 2>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/doggy/active/tiefronttop/tiny.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 0>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/doggy/active/tiefronttop/none.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</switch>>
		<</if>>
	<<elseif !$worn.upper.type.includes("naked") and !$_skirtOutfit>>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<if $worn.upper.state is "waist">>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<<else>>
			<<if $worn.upper.state is "waist">>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_boundwaist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">

			<<else>>
				<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/doggy/active/t-shirt/doggyactive_tshirt_boundneck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>
	<</if>>

	<<if setup.clothes.upper[clothesIndex('upper', $worn.upper)].sleeve_img is 1 and $worn.upper.name isnot "t-shirt">>
		<<if $worn.upper.name is "turtleneck">>
			<<set _sleeves to "turtleneck">>
		<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater" or $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
			<<set _sleeves to "sweatersleeves">>
		<<else>>
			<<set _sleeves to "sleeves">>
		<</if>>
		<<if $leftarm is "bound" or $leftarm is "grappled" or $leftarm is "behind">>
			<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/left_sleeve_bound.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $leftarm is "penis" or $leftarmstate is "tentacle">>
			<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/left_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/left_sleeve.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
		<<if $rightarm is "penis" or $rightarmstate is "tentacle">>
			<img @class="'layer-sexsleeveback colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/right_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $rightarm isnot "bound" and $rightarm isnot "grappled" and $rightarm isnot "behind">>
			<img @class="'layer-sexsleeveback colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/doggy/active/' + _sleeves + '/right_sleeve.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.under_upper.name is "bikini top">>
		<<if $worn.under_upper.state isnot "chest" and $worn.under_upper.state isnot "midriff">>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/doggy/active/bikinitop/doggyactive_bikinitop_thorax.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<else>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" @src="'img/sex/doggy/active/bikinitop/doggyactive_bikinitop_'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<<elseif $worn.under_upper.name is "cow bra">>
		<<if $worn.under_upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tit = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tit = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tit = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tit = "large">>
			<<else>>
				<<set _tit = "huge">>
			<</if>>
		<</if>>
		<img class="layer-sexbreastunderupper colour-under_upper anim-idle-2f" @src="'img/sex/doggy/active/cowbra/'+_tit+'.png'">
	<<elseif $worn.under_upper.name is "tape">>
		<<if $player.perceived_breastsize is 0>>
			<<set _size to "none">>
		<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
			<<set _size to "tiny">>
		<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
			<<set _size to "small">>
		<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
			<<set _size to "large">>
		<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
			<<set _size to "huge">>
		<</if>>
		<img @class="'layer-sexbreastunderupper colour-under_upper'" @src="'img/sex/doggy/active/tape/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif $worn.under_upper.name is "mesh shirt">>
		<<if $worn.under_upper.exposed is 0>>
			<<if $player.perceived_breastsize is 0>>
				<<set _size to "none">>
			<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
				<<set _size to "tiny">>
			<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
				<<set _size to "small">>
			<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
				<<set _size to "large">>
			<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
				<<set _size to "huge">>
			<</if>>
			<img @class="'layer-sexbreastunderupper colour-under_upper'" @src="'img/sex/doggy/active/mesh/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>

		<<if $worn.under_upper.state is "midriff">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "neck">>
		<</if>>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<set _bound to "">>
		<<else>>
			<<set _bound to "bound">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-idle-2f'" @src="'img/sex/doggy/active/mesh/doggyactive_mesh_'+_bound+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _upperOpacity : '')">

	<<elseif $worn.under_upper.name is "chest wrap">>
		<<if $worn.under_upper.exposed is 0>>
			<<if $player.perceived_breastsize is 0>>
				<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/doggy/active/chestwrap/none.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
				<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/doggy/active/chestwrap/tiny.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
				<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/doggy/active/chestwrap/small.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
				<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/doggy/active/chestwrap/large.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
				<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/doggy/active/chestwrap/huge.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.under_upper.name is "swim shirt">>
		<<if $worn.under_upper.state is "midriff" or $worn.under_upper.state is "waist">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "neck">>
		<</if>>
		<<if $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
			<<set _bound to "">>
		<<else>>
			<<set _bound to "bound">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-idle-2f-'+_animspeed" @src="'img/sex/doggy/active/swimshirt/'+_bound+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif $worn.under_upper.name is "shibari ropes">>
		<img @class="'layer-sexunder colour-under_upper anim-idle-2f-'+_animspeed" @src="'img/sex/doggy/active/shibari/'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif !$worn.under_upper.type.includes("naked")>>
		<<if $worn.under_upper.state isnot "chest" and $worn.under_upper.state isnot "midriff">>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/doggy/active/bikinitop/doggyactive_bikinitop_thorax.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<else>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" @src="'img/sex/doggy/active/bikinitop/doggyactive_bikinitop_'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.face.variable.startsWith("gag")>>
		<img @class="'layer-sexunder colour-face anim-idle-2f-'+_animspeed" src="img/sex/doggy/active/facewear/gag/full.png" @style="$worn.face.colourCustom">
		<<if $worn.face.type.includes("blindfold")>>
			<img @class="'layer-sexunder colour-face anim-idle-2f-'+_animspeed" src="img/sex/doggy/active/facewear/blindfold/full.png" @style="$worn.face.colourCustom">
		<</if>>
	<<elseif $worn.face.variable.startsWith("muzzle")>>
		<img @class="'layer-sexunder colour-face anim-idle-2f-'+_animspeed" src="img/sex/doggy/active/facewear/muzzle/full.png" @style="$worn.face.colourCustom">
	<<elseif $worn.face.name is "islander mask">>
		<img @class="'layer-sexsleeve anim-idle-2f-'+_animspeed" @src="'img/sex/doggy/active/facewear/'+$worn.face.variable+'/full.png'">
	<<elseif $worn.face.name isnot "naked">>
		<img @class="'layer-sexunder colour-face anim-idle-2f-'+_animspeed" @src="'img/sex/doggy/active/facewear/'+$worn.face.variable+'/full.png'" @style="$worn.face.colourCustom">
		<<if $worn.face.accessory is 1>>
			<img @class="'layer-sexunder colour-face_acc anim-idle-2f-'+_animspeed" @src="'img/sex/doggy/active/facewear/'+$worn.face.variable+'/acc.png'">
		<</if>>
	<</if>>

	<<if $worn.neck.name is "cow bell">>
		<img class="layer-sexunder anim-idle-2f" src="img/sex/doggy/active/cow/full.png">
	<<elseif $worn.neck.name is "necktie">>
		<img class="layer-sextiedoggy colour-neck" src="img/sex/doggy/active/tie/neck.png" style="transform: translateX(-75%);">
	<<elseif $worn.neck.name is "scarf">>
		<img class="layer-sexunder colour-neck anim-idle-2f" src="img/sex/doggy/active/scarf/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<<elseif $worn.neck.name is "gold choker">>
		<img class="layer-sexunder anim-idle-2f" src="img/sex/doggy/active/goldchoker/full.png">
	<<elseif $worn.neck.name is "cloth choker">>
		<img class="layer-sexunder colour-neck anim-idle-2f" src="img/sex/doggy/active/clothchoker/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<</if>>

	<<if $worn.hands.name isnot "naked">>
		<<if $worn.hands.leftImage is 1>>
			<<if $leftarm is "penis">>
				<img class="layer-sexunder colour-hands anim-idle-2f" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/left handjob.png'" @style="$worn.hands.colourCustom">
			<<elseif $leftarm is "bound">>
			<<elseif $leftarm is "grappled">>
			<<elseif $leftarm is "behind">>
			<<elseif $leftarmstate is "tentacle">>
			<<else>>
				<img class="layer-sexunder colour-hands anim-idle-2f" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/left hand.png'" @style="$worn.hands.colourCustom">
			<</if>>
		<</if>>
		<<if $worn.hands.rightImage is 1>>
			<<if $rightarm is "penis">>
				<img class="layer-sexBackArm colour-hands anim-idle-2f" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/right handjob.png'" @style="$worn.hands.colourCustom">
			<<elseif $rightarm is "bound">>
			<<elseif $rightarm is "grappled">>
			<<elseif $rightarm is "behind">>
			<<elseif $rightarmstate is "tentacle">>
			<<else>>
				<img class="layer-sexBackArm colour-hands anim-idle-2f" @src="'img/sex/doggy/active/hands/'+$worn.hands.variable+'/right hand.png'" @style="$worn.hands.colourCustom">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.feet.type.includes("heels") or ["light-up trainers"].includes($worn.feet.name)>>
		<<set _feetjob to ($feetuse is 'penis' ? 'feetjob' : 'thighs')>>
		<<if $worn.feet.colour>>
			<<set _shoeColour to $worn.feet.colourCustom>>
		<</if>>
		<<if $worn.feet.accessory_colour>>
			<<set _shoeAccColour to $worn.feet.accessory_colourCustom>>
		<</if>>
		<img class="layer-sexunder colour-feet anim-idle-2f" @src="'img/sex/doggy/active/shoes/'
		+ $worn.feet.variable + '/' + _feetjob + '.png'" @style="_shoeColour">
		<<if $worn.feet.accessory>>
			<<if $worn.feet.accessory_colour isnot 0>>
				<img class="layer-sexshoes colour-feet_acc anim-idle-2f" @src="'img/sex/doggy/active/shoes/'
				+ $worn.feet.variable + '/' + _feetjob + 'acc.png'" @style="_shoeColour">
			<<else>>
				<img class="layer-sexshoes anim-idle-2f" @src="'img/sex/doggy/active/shoes/'
				+ $worn.feet.variable + '/' + _feetjob + 'acc.png'">
			<</if>>
		<</if>>
	<</if>>

	<<if !$worn.legs.type.includes("naked")>>
		<<if $feetuse is "penis" or $feetstate is "tentacle">>
			<<set _feetjob to "feetjob">>
		<<else>>
			<<set _feetjob to "rest">>
		<</if>>
		<<if $worn.legs.state is setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base>>
			<<set _feetposition to "full">>
		<<else>>
			<<set _feetposition to "knees">>
		<</if>>
		<<if $worn.legs.colour>>
			<<set _legColour to $worn.legs.colourCustom>>
		<</if>>
		<<if $worn.legs.accessory_colour>>
			<<set _legAccColour to $worn.legs.accessory_colourCustom>>
		<</if>>

		<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].colour_combat is 0>>
			<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "waist">>
				<img class="layer-sexlegs colour-legs anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + '.png'" @style="_legColour">
			<<elseif setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "ankles">>
				<img class="layer-sexlegs colour-legs anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + '.png'" @style="_legColour">
				<img class="layer-sexskinback colour-legs anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + '.png'" @style="_legColour">
			<<else>>
				<img class="layer-sexlegs colour-legs anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + '.png'" @style="_legColour">
				<img class="layer-sexskinback colour-legs anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + '.png'" @style="_legColour">
			<</if>>
		<</if>>
		<<if $worn.legs.accessory and setup.clothes.legs[clothesIndex('legs', $worn.legs)].accessory_colour_combat is 0>>
			<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "waist">>
				<img class="layer-sexlegsacc colour-legs_acc anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'acc.png'" @style="_legAccColour">
			<<elseif setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "ankles">>
				<img class="layer-sexlegsacc colour-legs_acc anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + 'acc.png'" @style="_legAccColour">
				<img class="layer-sexlegsbackacc colour-legs_acc anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + 'acc.png'" @style="_legAccColour">
			<<else>>
				<img class="layer-sexlegsacc colour-legs_acc anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + 'acc.png'" @style="_legAccColour">
				<img class="layer-sexlegsbackacc colour-legs_acc anim-doggy-2f" @src="'img/sex/doggy/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + 'acc.png'" @style="_legAccColour">
			<</if>>
		<</if>>
	<</if>>

	</div>
<</widget>>

<<widget "clothesidlemissionary">>
	<<imgOpacity>>
	<<leg_position>>
	<div class="i256">

	<<if $worn.head.name isnot "naked" and !$worn.head.hood>>
		<img class="layer-sexsleeve colour-head anim-idle-2f" @src="'img/sex/missionary/active/head/'+$worn.head.variable+'/full.png'" @style="$worn.head.colourCustom">
		<<if $worn.head.accessory is 1>>
			<img class="layer-sexsleeve colour-head_acc anim-idle-2f" @src="'img/sex/missionary/active/head/'+$worn.head.variable+'/acc.png'" @style="($worn.head.accessory_colour is 'custom' ? $worn.head.accessory_colourCustom : '')">
		<</if>>
		<<if $worn.head.back_img is 1 or $worn.head.back_img is "combat">>
			<img class="layer-sexupper colour-head anim-idle-2f" @src="'img/sex/missionary/active/head/'+$worn.head.variable+'/back.png'" @style="$worn.head.colourCustom">
		<</if>>
	<</if>>

	<<if !$worn.upper.type.includes("naked") and !["gym shirt","tube top","towel top"].includes($worn.upper.name)>>
		<<if $worn.upper.name is "turtleneck" and $worn.upper.state is "chest">>

		<<elseif $player.perceived_breastsize is 0>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/none.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 2>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/tiny.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 4>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/small.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 6>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/large.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/huge.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>

	<<if !$worn.under_upper.type.includes("naked") and $worn.under_upper.state_top is setup.clothes.under_upper[clothesIndex('under_upper', $worn.under_upper)].state_top_base and $worn.under_upper.name isnot "chest wrap" and $worn.under_upper.name isnot "mesh shirt" and $worn.under_upper.name isnot "tape">>
		<<if $worn.upper.name is "turtleneck" and $worn.upper.state is "midriff">>
		<<elseif $player.perceived_breastsize is 0>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/none.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 2>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/tiny.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 4>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/small.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 6>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/large.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<else>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/idle/breastcover/huge.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.upper.set is $worn.lower.set and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
		<<set $_skirtOutfit to true>>
		<<if $worn.upper.name is "large towel">>
			<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/missionary/active/largetowel/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "waist">>
			<<if $worn.lower.skirt_down is 1>>
				<<if $anususe is "penis" or _leg_position is "up">>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<else>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/down.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<<elseif $worn.lower.skirt_down is 0>>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/top/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "midriff">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/top/tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/neck.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/top/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<<if $anususe is "penis" or _leg_position is "up">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>

		<<if $leftarm is "penis" or $leftarmstate is "tentacle">>

		<</if>>
		<<if $rightarm is "penis" or $rightarmstate is "tentacle">>

		<</if>>
	<</if>>

	<<if $worn.upper.name is "tie-front top">>
		<<if $worn.upper.state is "waist">>
			<<switch $player.perceived_breastsize>>
				<<case 8 9 10 11 12>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/missionary/active/tiefronttop/huge.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 5 6 7>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/missionary/active/tiefronttop/large.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 3 4>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/missionary/active/tiefronttop/small.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 1 2>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/missionary/active/tiefronttop/tiny.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
				<<case 0>>
					<img class="layer-sexbasefront colour-upper anim-idle-2f" src="img/sex/missionary/active/tiefronttop/none.png"
					@style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</switch>>
		<</if>>

	<<elseif $worn.upper.name is "gym shirt">>
		<<if $worn.upper.state is "waist">>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "midriff">>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
		<<if $player.perceived_breastsize is 0>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/none.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 2>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/tiny.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 4>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/small.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 6>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/large.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/active/gymshirt/huge.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<<elseif $worn.upper.name is "rag top">>
		<<if $player.perceived_breastsize is 0>>
			<<set _tit = "none">>
		<<elseif $player.perceived_breastsize lte 2>>
			<<set _tit = "tiny">>
		<<elseif $player.perceived_breastsize lte 4>>
			<<set _tit = "small">>
		<<elseif $player.perceived_breastsize lte 6>>
			<<set _tit = "large">>
		<<else>>
			<<set _tit = "huge">>
		<</if>>
		<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/missionary/active/ragtop/'+_tit+'.png'">
	<<elseif $worn.upper.name is "virgin killer">>
		<img class="layer-sexupper colour-upper anim-idle-2f-" @src="'img/sex/missionary/active/virginkiller/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater">>
		<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/missionary/active/sweater/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
		<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/missionary/active/long turtleneck/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "turtleneck">>
		<img class="layer-sexupper colour-upper anim-idle-2f" @src="'img/sex/missionary/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' and $player.perceived_breastsize >= 8 ? '_huge' : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "tube top" or $worn.upper.name is "towel top">>
		<<if $worn.upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tubeimg = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tubeimg = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tubeimg = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tubeimg = "large">>
			<<else>>
				<<set _tubeimg = "huge">>
			<</if>>
			<<set _anim = "">>
		<<else>>
			<<set _tubeimg = $worn.upper.state_top>>
			<<set _anim = " anim-idle-2f">>
		<</if>>
		<<if ($anususe is "penis" or _leg_position is "up") and ["ankles","knees","thighs"].includes(_tubeimg)>>
			<<set _tubeimg += "up">>
		<</if>>
		<img @class="'layer-sexupper colour-upper'+_anim" @src="'img/sex/missionary/active/tubetop/'+_tubeimg+'.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">

	<<elseif !$worn.upper.type.includes("naked") and !$_skirtOutfit>>
		<<if $worn.upper.state is "waist">>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/top/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "midriff">>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/top/tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img class="layer-sexupper colour-upper anim-idle-2f" src="img/sex/missionary/idle/top/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>

	<<if setup.clothes.upper[clothesIndex('upper', $worn.upper)].sleeve_img is 1 and $worn.upper.name isnot "t-shirt">>
		<<if $worn.upper.name is "turtleneck">>
			<<set _sleeves to "turtleneck">>
		<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater" or $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
			<<set _sleeves to "sweatersleeves">>
		<<else>>
			<<set _sleeves to "sleeves">>
		<</if>>
		<<if ($leftarm is "bound" or $leftarm is "grappled" or $leftarm is "behind") and ($rightarm is "bound" or $rightarm is "grappled" or $rightarm is "behind")>>
			<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/both_sleeves_bound.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<<if $leftarm is "penis" or $leftarmstate is "tentacle">>
				<img @class="'layer-sexsleeveback colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/left_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
			<<if $rightarm is "penis" or $rightarmstate is "tentacle">>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<elseif ($rightarm is "bound" or $rightarm is "grappled" or $rightarm is "behind") and $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve_bound.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<elseif $enemytype is "beast" and $monster isnot 1 and _stanceCheck is "top" and $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve_stroke.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-2f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>
	<</if>>


	<<if $feetuse is "penis" or $feetstate is "tentacle">>
		<<set _feet_pos to "_feetjob">>
	<<elseif _leg_position is "up">>
		<<set _feet_pos to "_up">>
	<<else>>
		<<set _feet_pos to "_down">>
	<</if>>

	<<if $worn.lower.name is "micro pleated skirt" and $debug is 1>>
		<<switch $worn.lower.state>>
			<<case "waist">>
				<<if $worn.lower.skirt_down is 0>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/micropleatedskirt/waist.png"
					@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<else>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/micropleatedskirt/tummy.png"
					@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<<case "thighs">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/micropleatedskirt/thighs.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "knees">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/micropleatedskirt/knees.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "ankles">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/micropleatedskirt/ankles.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "midriff">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/micropleatedskirt/tummy.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</switch>>
	<<elseif $worn.lower.name is "rag skirt">>
		<<switch $worn.lower.state>>
			<<case "waist">>
				<<if $worn.lower.skirt_down is 0>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/ragskirt/waist.png"
					@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<else>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/ragskirt/hips.png"
					@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<<case "thighs">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/ragskirt/thighs.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "knees">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/ragskirt/knees.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "ankles">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/ragskirt/anklesdown.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<case "midriff">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/ragskirt/tummy.png"
				@style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</switch>>	<<elseif $worn.lower.name is "gym bloomers">>
	<<elseif $worn.lower.name is "gym bloomers">>
		<<if $worn.lower.state is "waist">>
			<<if $anususe is "penis" or _leg_position is "up">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/gymbloomers/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/gymbloomers/waistdown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $anususe is "penis" or _leg_position is "up">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/gymbloomers/ankle.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/active/gymbloomers/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "denim shorts">>
		<img class="layer-sexlower anim-idle-2f" @src="'img/sex/missionary/active/denimshorts/' + $worn.lower.state + _feet_pos + '.png'">
	<<elseif $worn.lower.name is "booty jorts">>
		<img class="layer-sexlower anim-idle-2f" @src="'img/sex/missionary/active/bootyjorts/' + $worn.lower.state + _feet_pos + '.png'">
	<<elseif !$worn.lower.type.includes("naked") and $worn.upper.set isnot $worn.lower.set and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
		<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
			<<if $worn.lower.state is "waist">>
				<<if $worn.lower.skirt_down is 1>>
					<<if $anususe is "penis" or _leg_position is "up">>
						<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
					<<else>>
						<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/down.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
					<</if>>
				<<elseif $worn.lower.skirt_down is 0>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<<elseif $worn.lower.state is "midriff">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<elseif $worn.lower.state is "chest">>
				<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/neck.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<<if $anususe is "penis" or _leg_position is "up">>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<else>>
					<img class="layer-sexlower colour-lower anim-idle-2f" src="img/sex/missionary/idle/skirt/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<</if>>
		<<else>>
			<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/missionary/active/longskirt/' + $worn.lower.state + _feet_pos + '.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<<elseif !$worn.lower.type.includes("naked") and !$_skirtOutfit>>
		<<if $worn.lower.name is "jeans">>
			<img class="layer-sexlower anim-idle-2f" @src="'img/sex/missionary/active/jeans/' + $worn.lower.state + _feet_pos + '.png'">
		<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
			<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/missionary/active/shorts/' + $worn.lower.state + _feet_pos + '.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<else>>
			<img class="layer-sexlower colour-lower anim-idle-2f" @src="'img/sex/missionary/active/trousers/' + $worn.lower.state + _feet_pos + '.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.under_lower.name is "thong" or $worn.under_lower.name is "microkini bottom">>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<<if $anususe is "penis" or _leg_position is "up">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/active/thong/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/idle/thong/waistdown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $anususe is "penis" or $vaginause is "penis" or _leg_position is "up">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/active/thong/ankle.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/active/thong/ankledown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.under_lower.name is "highwaisted microkini bottom">>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<<if $anususe is "penis" or _leg_position is "up">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/active/under_lower/highmicrokini/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/active/under_lower/highmicrokini/waistdown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $anususe is "penis" or $vaginause is "penis" or _leg_position is "up">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/active/under_lower/highmicrokini/ankle.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/active/under_lower/highmicrokini/ankledown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.under_lower.name is "cow panties">>
		<img class="layer-sexunder colour-under_lower anim-doggy-2f" src="img/sex/missionary/active/cowpanties/waist.png">
	<<elseif $worn.under_lower.type.includes("strap-on") and $worn.lower.vagina_exposed is 1 >>
		<img class="layer-sexunder colour-under_lower anim-idle-2f"
		@src="'img/sex/missionary/active/strapon/' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
	<<elseif !$worn.under_lower.type.includes("naked")>>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<<if $anususe is "penis" or _leg_position is "up">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/idle/panties/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/idle/panties/waistdown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $anususe is "penis" or $vaginause is "penis" or _leg_position is "up">>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/idle/panties/ankle.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img class="layer-sexunder colour-under_lower anim-idle-2f" src="img/sex/missionary/idle/panties/ankledown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.under_upper.name is "chest wrap" and $worn.under_upper.exposed is 0>>
		<<if $player.perceived_breastsize is 0>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/active/chestwrap/none.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/active/chestwrap/tiny.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/active/chestwrap/small.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/active/chestwrap/large.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
			<img class="layer-sexunder colour-under_upper anim-idle-2f" src="img/sex/missionary/active/chestwrap/huge.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<<elseif $worn.under_upper.name is "tape">>
		<<if $player.perceived_breastsize is 0>>
			<<set _size to "none">>
		<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
			<<set _size to "tiny">>
		<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
			<<set _size to "small">>
		<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
			<<set _size to "large">>
		<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
			<<set _size to "huge">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper'" @src="'img/sex/missionary/active/tape/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif $worn.under_upper.name is "mesh shirt">>
		<<if $worn.under_upper.state is "midriff">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "neck">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-idle-2f'" @src="'img/sex/missionary/active/mesh/'+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _upperOpacity : '')">

		<<if $worn.under_upper.exposed is 0>>
			<<if $player.perceived_breastsize is 0>>
				<<set _size to "none">>
			<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
				<<set _size to "tiny">>
			<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
				<<set _size to "small">>
			<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
				<<set _size to "large">>
			<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
				<<set _size to "huge">>
			<</if>>
			<img @class="'layer-sexunder colour-under_upper'" @src="'img/sex/missionary/active/mesh/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<<elseif $worn.under_upper.name is "cow bra">>
		<<if $worn.upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tit = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tit = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tit = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tit = "large">>
			<<else>>
				<<set _tit = "huge">>
			<</if>>
		<</if>>
		<img class="layer-sexunder colour-under_upper anim-idle-2f" @src="'img/sex/missionary/active/cowbra/'+_tit+'.png'">

	<<elseif $worn.under_upper.name is "swim shirt">>
		<<if $worn.under_upper.state is "waist">>
			<<set _state to "waist">>
		<<elseif $worn.under_upper.state is "midriff">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "chest">>
		<</if>>
		<img class="layer-sexunder colour-under_upper anim-idle-2f" @src="'img/sex/missionary/active/swimshirt/'+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">

	<<elseif $worn.under_upper.name is "shibari ropes">>
		<img class="layer-sexunder colour-under_upper anim-idle-2f" @src="'img/sex/missionary/active/shibari/'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">

	<<elseif !$worn.under_upper.type.includes("naked")>>
		<img class="layer-sexskin colour-under_upper anim-idle-2f" src="img/sex/missionary/idle/bra/bra.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<</if>>

	<<if $worn.face.variable.startsWith("gag")>>
		<img class="layer-sexunder colour-face anim-idle-2f" src="img/sex/missionary/active/facewear/gag/full.png" @style="$worn.face.colourCustom">
		<<if $worn.face.type.includes("blindfold")>>
			<img class="layer-sexunder colour-face anim-idle-2f" src="img/sex/missionary/active/facewear/blindfold/full.png" @style="$worn.face.colourCustom">
		<</if>>
	<<elseif $worn.face.variable.startsWith("muzzle")>>
		<img class="layer-sexunder colour-face anim-idle-2f" src="img/sex/missionary/active/facewear/muzzle/full.png" @style="$worn.face.colourCustom">
	<<elseif $worn.face.name is "islander mask">>
		<img class="layer-sexsleeve anim-idle-2f" @src="'img/sex/missionary/active/facewear/'+$worn.face.variable+'/full.png'">
	<<elseif $worn.face.name isnot "naked">>
		<img class="layer-sexunder colour-face anim-idle-2f" @src="'img/sex/missionary/active/facewear/'+$worn.face.variable+'/full.png'" @style="$worn.face.colourCustom">
		<<if $worn.face.accessory is 1>>
			<img class="layer-sexunder colour-face_acc anim-idle-2f" @src="'img/sex/missionary/active/facewear/'+$worn.face.variable+'/acc.png'">
		<</if>>
	<</if>>

	<<if $worn.neck.name is "cow bell">>
		<img class="layer-sexunder anim-idle-2f" src="img/sex/missionary/active/cow/full.png">
	<<elseif $worn.neck.name is "necktie">>
		<img class="layer-sextiemissionary colour-neck" src="img/sex/missionary/active/tie/neck.png">
	<<elseif $worn.neck.name is "scarf">>
		<img class="layer-sexunder colour-neck anim-idle-2f" src="img/sex/missionary/active/scarf/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<<elseif $worn.neck.name is "gold choker">>
		<img class="layer-sexunder anim-idle-2f" src="img/sex/missionary/active/goldchoker/full.png">
	<<elseif $worn.neck.name is "cloth choker">>
		<img class="layer-sexunder colour-neck anim-idle-2f" src="img/sex/missionary/active/clothchoker/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<</if>>

	<<if $worn.hands.name isnot "naked">>
		<<if $worn.hands.leftImage is 1>>
			<<if $leftarm is "penis">>
				<img class="layer-sexunder colour-hands anim-idle-2f" @src="'img/sex/missionary/active/hands/'+$worn.hands.variable+'/left handjob.png'" @style="$worn.hands.colourCustom">
			<<elseif $leftarm is "bound">>
			<<elseif $leftarm is "grappled">>
			<<elseif $leftarm is "behind">>
			<<elseif $leftarmstate is "tentacle">>
			<<else>>
			<</if>>
		<</if>>
		<<if $worn.hands.rightImage is 1>>
			<<if $rightarm is "penis">>
				<img class="layer-sexhands colour-hands anim-idle-2f" @src="'img/sex/missionary/active/hands/'+$worn.hands.variable+'/right handjob.png'" @style="$worn.hands.colourCustom">
			<<elseif $rightarm is "bound">>
			<<elseif $rightarm is "grappled">>
			<<elseif $rightarm is "behind">>
			<<elseif $rightarmstate is "tentacle">>
			<<else>>
				<img class="layer-sexhands colour-hands anim-idle-2f" @src="'img/sex/missionary/active/hands/'+$worn.hands.variable+'/right arm.png'" @style="$worn.hands.colourCustom">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.feet.type.includes("heels") or ["light-up trainers", "ankle cuffs", "ball and chain"].includes($worn.feet.name)>>
		<<set _legl to ((_leg_position is "up") ? 'legl' : 'legldown')>>
		<<set _legr to ((_leg_position is "up") ? 'legr' : 'legrdown')>>
		<<if $worn.feet.colour>>
			<<set _shoeColour to $worn.feet.colourCustom>>
		<</if>>
		<<if $worn.feet.accessory_colour>>
			<<set _shoeAccColour to $worn.feet.accessory_colourCustom>>
		<</if>>
		<img class="layer-sexbaseoverlay colour-feet" @src="'img/sex/missionary/active/shoes/'
		+ $worn.feet.variable + '/' + _legl + '.png'" @style="_shoeColour">
		<img class="layer-sexunder colour-feet" @src="'img/sex/missionary/active/shoes/'
		+ $worn.feet.variable + '/' + _legr + '.png'" @style="_shoeColour">
		<<if $worn.feet.accessory>>
			<<if $worn.feet.accessory_colour isnot 0>>
				<img class="layer-sexbaseoverlay colour-feet_acc" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legl + 'acc.png'" @style="_shoeAccColour">
				<img class="layer-sexshoes colour-feet_acc" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legr + 'acc.png'" @style="_shoeAccColour">
			<<else>>
				<img class="layer-sexbaseoverlay" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legl + 'acc.png'">
				<img class="layer-sexshoes" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legr + 'acc.png'">
			<</if>>
		<</if>>

		<<if $worn.feet.name is "ankle cuffs">>
			<<if _leg_position is "up">>
				<img class="layer-sexbaseoverlay" @src="'img/sex/missionary/active/shoes/anklecuffs/acc_both_up.png'">
			<<else>>
				<img class="layer-sexbaseoverlay" @src="'img/sex/missionary/active/shoes/anklecuffs/acc_both_down.png'">
			<</if>>
		<</if>>
	<</if>>

	<<if !$worn.legs.type.includes("naked")>>
		<<if $feetuse is "penis" or $feetstate is "tentacle">>
			<<set _feetjob to "feetjob">>
		<<elseif _leg_position is "up">>
			<<set _feetjob to "up">>
		<<else>>
			<<set _feetjob to "down">>
		<</if>>
		<<if $worn.legs.state is setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base>>
			<<set _feetposition to "full">>
		<<else>>
			<<set _feetposition to "knees">>
		<</if>>
		<<if $worn.legs.colour>>
			<<set _legColour to $worn.legs.colourCustom>>
		<</if>>
		<<if $worn.legs.accessory_colour>>
			<<set _legAccColour to $worn.legs.accessory_colourCustom>>
		<</if>>

		<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].colour_combat is 0>>
			<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "waist">>
				<img class="layer-sexlegs colour-legs anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
			+ $worn.legs.variable + '/' + _feetposition + _feetjob + '.png'" @style="_legColour">
			<<elseif setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "ankles">>
				<<if _feetjob is "feetjob">>
					<img class="layer-sexlegs colour-legs anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + '.png'" @style="_legColour">
				<<else>>
					<img class="layer-sexlegsback colour-legs anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + '.png'" @style="_legColour">
					<img class="layer-sexlegs colour-legs anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + '.png'" @style="_legColour">
				<</if>>
			<<else>>
				<<if _feetjob is "feetjob">>
					<img class="layer-sexlegs colour-legs anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + '.png'" @style="_legColour">
				<<else>>
					<img class="layer-sexlegsback colour-legs anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + '.png'" @style="_legColour">
					<img class="layer-sexlegs colour-legs anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + '.png'" @style="_legColour">
				<</if>>
			<</if>>
		<</if>>
		<<if $worn.legs.accessory and setup.clothes.legs[clothesIndex('legs', $worn.legs)].accessory_colour_combat is 0>>
			<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "waist">>
				<img class="layer-sexlegsbackacc colour-legs_acc anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'acc.png'" @style="_legAccColour">
			<<elseif setup.clothes.legs[clothesIndex('legs', $worn.legs)].state_base is "ankles">>
				<img class="layer-sexlegsbackacc colour-legs_acc anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + 'acc.png'" @style="_legAccColour">
				<img class="layer-sexlegsacc colour-legs_acc anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + 'acc.png'" @style="_legAccColour">
			<<else>>
				<img class="layer-sexlegsbackacc colour-legs_acc anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'left' + 'acc.png'" @style="_legAccColour">
				<img class="layer-sexlegsacc colour-legs_acc anim-missionary-2f" @src="'img/sex/missionary/active/legs/'
				+ $worn.legs.variable + '/' + _feetposition + _feetjob + 'right' + 'acc.png'" @style="_legAccColour">
			<</if>>
		<</if>>
	<</if>>

	</div>
<</widget>>

<<widget "clothesactivemissionary">>
	<<imgOpacity>>
	<div class="i256">

	<<if $worn.head.name isnot "naked" and !$worn.head.hood>>
		<img @class="'layer-sexsleeve colour-head anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/head/'+$worn.head.variable+'/full.png'" @style="$worn.head.colourCustom">
		<<if $worn.head.accessory is 1>>
			<img @class="'layer-sexsleeve colour-head_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/head/'+$worn.head.variable+'/acc.png'" @style="($worn.head.accessory_colour is 'custom' ? $worn.head.accessory_colourCustom : '')">
		<</if>>
		<<if $worn.head.back_img is 1 or $worn.head.back_img is "combat">>
			<img @class="'layer-sexupper colour-head anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/head/'+$worn.head.variable+'/back.png'" @style="$worn.head.colourCustom">
		<</if>>
	<</if>>

	<<if !$worn.upper.type.includes("naked") and !["gym shirt","tube top","towel top"].includes($worn.upper.name)>>
		<<if $worn.upper.name is "turtleneck" and $worn.upper.state is "chest">>
		<<elseif $player.perceived_breastsize is 0>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/none.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 2>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/tiny.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 4>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/small.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 6>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/large.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/huge.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>

	<<if !$worn.under_upper.type.includes("naked") and $worn.under_upper.state_top is setup.clothes.under_upper[clothesIndex('under_upper', $worn.under_upper)].state_top_base and $worn.under_upper.name isnot "chest wrap" and $worn.under_upper.name isnot "mesh shirt" and $worn.under_upper.name isnot "tape">>
		<<if $worn.upper.name is "turtleneck" and $worn.upper.state is "midriff">>
		<<elseif $player.perceived_breastsize is 0>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/none.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 2>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/tiny.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 4>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/small.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 6>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/large.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<else>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/breastcover/huge.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.upper.set is $worn.lower.set and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
		<<set $_skirtOutfit to true>>
		<<if $worn.upper.name is "large towel">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/largetowel/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "waist">>
			<<if $worn.lower.skirt_down is 1>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<elseif $worn.lower.skirt_down is 0>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/top/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "midriff">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/top/tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/neck.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/top/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/ankle.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>

		<<if $leftarm is "penis" or $leftarmstate is "tentacle">>

		<</if>>
		<<if $rightarm is "penis" or $rightarmstate is "tentacle">>

		<</if>>
	<</if>>

	<<if $worn.upper.name is "gym shirt">>
		<<if $worn.upper.state is "waist">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "midriff">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/acc.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<if $player.perceived_breastsize is 0>>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/none.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 2>>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/tiny.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 4>>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/small.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $player.perceived_breastsize lte 6>>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/large.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymshirt/huge.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>

	<<elseif $worn.upper.name is "virgin killer">>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/virginkiller/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater">>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/sweater/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/long turtleneck/' + $worn.upper.state + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "turtleneck">>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/turtleneck/' + $worn.upper.state + ($worn.upper.state is 'chest' and $player.perceived_breastsize >= 8 ? '_huge' : '') + '.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
	<<elseif $worn.upper.name is "rag top">>
		<<if $player.perceived_breastsize is 0>>
			<<set _tit = "none">>
		<<elseif $player.perceived_breastsize lte 2>>
			<<set _tit = "tiny">>
		<<elseif $player.perceived_breastsize lte 4>>
			<<set _tit = "small">>
		<<elseif $player.perceived_breastsize lte 6>>
			<<set _tit = "large">>
		<<else>>
			<<set _tit = "huge">>
		<</if>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed"  @src="'img/sex/missionary/active/ragtop/'+_tit+'.png'">
	<<elseif $worn.upper.name is "tube top" or $worn.upper.name is "towel top">>
		<<if $worn.upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tubeimg = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tubeimg = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tubeimg = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tubeimg = "large">>
			<<else>>
				<<set _tubeimg = "huge">>
			<</if>>
		<<else>>
			<<set _tubeimg = $worn.upper.state_top>>
		<</if>>
		<<if ($anususe is "penis" or _leg_position is "up") and ["ankles","knees","thighs"].includes(_tubeimg)>>
			<<set _tubeimg += "up">>
		<</if>>
		<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/tubetop/'+_tubeimg+'.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">

	<<elseif !$worn.upper.type.includes("naked") and !$_skirtOutfit>>
		<<if $worn.upper.state is "waist">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/top/waist.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "midriff">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/top/tummy.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<elseif $worn.upper.state is "chest">>
			<img @class="'layer-sexupper colour-upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/top/neck.png" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<</if>>
	<</if>>


	<<if setup.clothes.upper[clothesIndex('upper', $worn.upper)].sleeve_img is 1 and $worn.upper.name isnot "t-shirt">>
		<<if $worn.upper.name is "turtleneck">>
			<<set _sleeves to "turtleneck">>
		<<elseif $worn.upper.name is "sweater" or $worn.upper.name is "girl's sweater" or $worn.upper.name is "cable knit turtleneck" or $worn.upper.name is "turtleneck jumper">>
			<<set _sleeves to "sweatersleeves">>
		<<else>>
			<<set _sleeves to "sleeves">>
		<</if>>
		<<if ($leftarm is "bound" or $leftarm is "grappled" or $leftarm is "behind") and ($rightarm is "bound" or $rightarm is "grappled" or $rightarm is "behind")>>
			<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/both_sleeves_bound.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
		<<else>>
			<<if $leftarm is "penis" or $leftarmstate is "tentacle">>
				<img @class="'layer-sexsleeveback colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/left_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
			<<if $rightarm is "penis" or $rightarmstate is "tentacle">>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve_handjob.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<elseif ($rightarm is "bound" or $rightarm is "grappled" or $rightarm is "behind") and $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve_bound.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<elseif $enemytype is "beast" and $monster isnot 1 and _stanceCheck is "top" and $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve_stroke.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<<else>>
				<img @class="'layer-sexsleeve colour-upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/' + _sleeves + '/right_sleeve.png'" @style="($worn.upper.colour is 'custom' ? $worn.upper.colourCustom + _upperOpacity : '')">
			<</if>>
		<</if>>
	<</if>>

	<<if $feetuse is "penis" or $feetstate is "tentacle">>
		<<set _feet_pos to "_feetjob">>
	<<elseif $worn.lower.state is "knees">>
		<<set _feet_pos to "_down">>
	<<elseif $penisuse is "othervagina" or $penisuse is "otheranus">>
		<<set _feet_pos to "_left">>
	<<else>>
		<<set _feet_pos to "_up">>
	<</if>>

	<<if $worn.lower.name is "micro pleated skirt">>
		<<if $worn.lower.state is "waist">>
			<<if $worn.lower.skirt_down is 1>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/micropleatedskirt/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<elseif $worn.lower.skirt_down is 0>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/micropleatedskirt/hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<elseif $worn.lower.state is "midriff">>
		<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/micropleatedskirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "chest">>
		<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/micropleatedskirt/neck.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<else>>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/micropleatedskirt/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/micropleatedskirt/ankle.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "gym bloomers">>
		<<if $worn.lower.state is "waist">>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymbloomers/waistdown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymbloomers/waist.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymbloomers/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/gymbloomers/ankle.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.lower.name is "denim shorts">>
		<img @class="'layer-sexlower anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/denimshorts/' + $worn.lower.state + _feet_pos + '.png'">
	<<elseif $worn.lower.name is "booty jorts">>
		<img @class="'layer-sexlower anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/bootyjorts/' + $worn.lower.state + _feet_pos + '.png'">
	<<elseif $worn.lower.name is "rag skirt">>
		<<if $worn.lower.state is "waist">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/ragskirt/hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "midriff">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/ragskirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $worn.lower.state is "chest">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/ragskirt/neck.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<elseif $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/ragskirt/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<<elseif !$worn.lower.type.includes("naked") and $worn.upper.set isnot $worn.lower.set and setup.clothes.lower[clothesIndex('lower', $worn.lower)].skirt is 1>>
		<<if setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
			<<if $worn.lower.state is "waist">>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/hips.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<elseif $worn.lower.state is "midriff">>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/tummy.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<elseif $worn.lower.state is "chest">>
				<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/neck.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
			<<else>>
				<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/ankledown.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<<else>>
					<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/skirt/ankle.png" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
				<</if>>
			<</if>>
		<<else>>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/longskirt/' + $worn.lower.state + _feet_pos + '.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<<elseif !$worn.lower.type.includes("naked") and !$_skirtOutfit>>
		<<if $worn.lower.name is "jeans">>
			<img @class="'layer-sexlower anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/jeans/' + $worn.lower.state + _feet_pos + '.png'">
		<<elseif setup.clothes.lower[clothesIndex('lower', $worn.lower)].short is 1>>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shorts/' + $worn.lower.state + _feet_pos + '.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<<else>>
			<img @class="'layer-sexlower colour-lower anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/trousers/' + $worn.lower.state + _feet_pos + '.png'" @style="($worn.lower.colour is 'custom'? $worn.lower.colourCustom + _lowerOpacity : '')">
		<</if>>
	<</if>>

	<<if $worn.under_lower.name is "thong" or $worn.under_lower.name is "microkini bottom">>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/thong/waistdown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/thong/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/thong/ankledown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/thong/ankle.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.under_lower.name is "highwaisted microkini bottom">>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/under_lower/highmicrokini/waistdown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/under_lower/highmicrokini/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/under_lower/highmicrokini/ankledown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/under_lower/highmicrokini/ankle.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<<elseif $worn.under_lower.name is "cow panties">>
		<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/cowpanties/waist.png">
	<<elseif $worn.under_lower.type.includes("strap-on") and $worn.lower.vagina_exposed is 1>>
		<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/strapon/' + $worn.under_lower.state + '.png'" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">	
	<<elseif !$worn.under_lower.type.includes("naked")>>
		<<if $worn.under_lower.state is "waist" or $worn.under_lower.state is "totheside">>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/panties/waistdown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/panties/waist.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<<else>>
			<<if $penisuse is "othervagina" or $penisuse is "otheranus">>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/panties/ankledown.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<<else>>
			<img @class="'layer-sexunder colour-under_lower anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/panties/ankle.png" @style="($worn.under_lower.colour is 'custom'? $worn.under_lower.colourCustom + _underLowerOpacity : '')">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.under_upper.name is "chest wrap" and $worn.under_upper.exposed is 0>>
		<<if $player.perceived_breastsize is 0>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/chestwrap/none.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/chestwrap/tiny.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/chestwrap/small.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/chestwrap/large.png" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/chestwrap/huge.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<<elseif $worn.under_upper.name is "tape">>
		<<if $player.perceived_breastsize is 0>>
			<<set _size to "none">>
		<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
			<<set _size to "tiny">>
		<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
			<<set _size to "small">>
		<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
			<<set _size to "large">>
		<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
			<<set _size to "huge">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/tape/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif $worn.under_upper.name is "mesh shirt">>
		<<if $worn.under_upper.state is "midriff">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "neck">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/mesh/'+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _upperOpacity : '')">

		<<if $worn.under_upper.exposed is 0>>
			<<if $player.perceived_breastsize is 0>>
				<<set _size to "none">>
			<<elseif $player.perceived_breastsize is 1 or $player.perceived_breastsize is 2>>
				<<set _size to "tiny">>
			<<elseif $player.perceived_breastsize is 3 or $player.perceived_breastsize is 4>>
				<<set _size to "small">>
			<<elseif $player.perceived_breastsize gte 5 and $player.perceived_breastsize lte 7>>
				<<set _size to "large">>
			<<elseif $player.perceived_breastsize gte 8 and $player.perceived_breastsize lte 12>>
				<<set _size to "huge">>
			<</if>>
			<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/mesh/'+_size+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
		<</if>>
	<<elseif $worn.under_upper.name is "cow bra">>
		<<if $worn.upper.state_top is "chest">>
			<<if $player.perceived_breastsize is 0>>
				<<set _tit = "none">>
			<<elseif $player.perceived_breastsize lte 2>>
				<<set _tit = "tiny">>
			<<elseif $player.perceived_breastsize lte 4>>
				<<set _tit = "small">>
			<<elseif $player.perceived_breastsize lte 6>>
				<<set _tit = "large">>
			<<else>>
				<<set _tit = "huge">>
			<</if>>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-idle-4f-'+_animspeed" @src="'img/sex/missionary/active/cowbra/'+_tit+'.png'">
	<<elseif $worn.under_upper.name is "swim shirt">>
		<<if $worn.under_upper.state is "waist">>
			<<set _state to "waist">>
		<<elseif $worn.under_upper.state is "midriff">>
			<<set _state to "midriff">>
		<<else>>
			<<set _state to "chest">>
		<</if>>
		<img @class="'layer-sexunder colour-under_upper anim-idle-4f-'+_animspeed" @src="'img/sex/missionary/active/swimshirt/'+_state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif $worn.under_upper.name is "shibari ropes">>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shibari/'+$worn.under_upper.state+'.png'" @style="($worn.under_upper.colour is 'custom' ? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<<elseif !$worn.under_upper.type.includes("naked")>>
		<img @class="'layer-sexunder colour-under_upper anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/bra/bra.png" @style="($worn.under_upper.colour is 'custom'? $worn.under_upper.colourCustom + _underUpperOpacity : '')">
	<</if>>

	<<if $worn.face.variable.startsWith("gag")>>
		<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/facewear/gag/full.png" @style="$worn.face.colourCustom">
		<<if $worn.face.type.includes("blindfold")>>
			<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/facewear/blindfold/full.png" @style="$worn.face.colourCustom">
		<</if>>
	<<elseif $worn.face.variable.startsWith("muzzle")>>
		<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/facewear/muzzle/full.png" @style="$worn.face.colourCustom">
	<<elseif $worn.face.name is "islander mask">>
		<img @class="'layer-sexsleeve anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/facewear/'+$worn.face.variable+'/full.png'">
	<<elseif $worn.face.name isnot "naked">>
		<img @class="'layer-sexunder colour-face anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/facewear/'+$worn.face.variable+'/full.png'" @style="$worn.face.colourCustom">
		<<if $worn.face.accessory is 1>>
			<img @class="'layer-sexunder anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/facewear/'+$worn.face.variable+'/acc.png'">
		<</if>>
	<</if>>

	<<if $worn.neck.name is "cow bell">>
		<img @class="'layer-sexunder anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/cow/full.png">
	<<elseif $worn.neck.name is "necktie">>
		<img @class="'layer-sextiemissionary colour-neck anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/tie/neck.png">
	<<elseif $worn.neck.name is "scarf">>
		<img @class="'layer-sexunder colour-neck anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/scarf/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<<elseif $worn.neck.name is "gold choker">>
		<img @class="'layer-sexunder anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/goldchoker/full.png">
	<<elseif $worn.neck.name is "cloth choker">>
		<img @class="'layer-sexunder colour-neck anim-doggy-4f-'+_animspeed" src="img/sex/missionary/active/clothchoker/full.png" @style="($worn.neck.colour is 'custom'? $worn.neck.colourCustom : '')">
	<</if>>

	<<if $worn.hands.name isnot "naked">>
		<<if $worn.hands.leftImage is 1>>
			<<if $leftarm is "penis">>
				<img @class="'layer-sexsclera colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/hands/'+$worn.hands.variable+'/left handjob.png'" @style="$worn.hands.colourCustom">
			<<elseif $leftarm is "bound">>
			<<elseif $leftarm is "grappled">>
			<<elseif $leftarm is "behind">>
			<<elseif $leftarmstate is "tentacle">>
			<<else>>
			<</if>>
		<</if>>
		<<if $worn.hands.rightImage is 1>>
			<<if $rightarm is "penis">>
				<img @class="'layer-sexhands colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/hands/'+$worn.hands.variable+'/right handjob.png'" @style="$worn.hands.colourCustom">
			<<elseif $rightarm is "bound">>
			<<elseif $rightarm is "grappled">>
			<<elseif $rightarm is "behind">>
			<<elseif $rightarmstate is "tentacle">>
			<<elseif $enemytype is "beast" and $monster isnot 1 and _stanceCheck is "top">>
				<img @class="'layer-sexhands colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/hands/'+$worn.hands.variable+'/right arm stroke.png'" @style="$worn.hands.colourCustom">
			<<else>>
				<img @class="'layer-sexhands colour-hands anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/hands/'+$worn.hands.variable+'/right arm.png'" @style="$worn.hands.colourCustom">
			<</if>>
		<</if>>
	<</if>>

	<<if $worn.feet.type.includes("heels") or ["light-up trainers", "ankle cuffs", "ball and chain"].includes($worn.feet.name)>>
		<<if $feetuse is "penis" or $feetstate is "tentacle">>
			<<set _legl to 'legl'>>
			<<set _legr to 'feetjob'>>
		<<else>>
			<<set _legl to 'legl'>>
			<<set _legr to (($penisuse is "othervagina" or $penisuse is "otheranus") ? 'legrdown' : 'legr')>>
		<</if>>
		<<if $worn.feet.colour>>
			<<set _shoeColour to $worn.feet.colourCustom>>
		<</if>>
		<<if $worn.feet.accessory_colour>>
			<<set _shoeAccColour to $worn.feet.accessory_colourCustom>>
		<</if>>
		<img @class="'layer-sexbaseoverlay colour-feet anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/'
		+ $worn.feet.variable + '/' + _legl + '.png'" @style="_shoeColour">
		<img @class="'layer-sexunder colour-feet anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/'
		+ $worn.feet.variable + '/' + _legr + '.png'" @style="_shoeColour">
		<<if $worn.feet.accessory>>
			<<if $worn.feet.accessory_colour isnot 0>>
				<img @class="'layer-sexbaseoverlay colour-feet_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legl + 'acc.png'" @style="_shoeAccColour">
				<img @class="'layer-sexshoes colour-feet_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legr + 'acc.png'" @style="_shoeAccColour">
			<<else>>
				<img @class="'layer-sexbaseoverlay anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legl + 'acc.png'">
				<img @class="'layer-sexshoes anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/'
				+ $worn.feet.variable + '/' + _legr + 'acc.png'">
			<</if>>
		<</if>>

		<<if $worn.feet.name is "ankle cuffs">>
			<<if _legl is 'legl'>>
				<<if _legr is 'legrdown'>>
					<img @class="'layer-sexbaseoverlay anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/anklecuffs/acc_left_up.png'">
				<<else>>
					<img @class="'layer-sexbaseoverlay anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/anklecuffs/acc_both_up.png'">
				<</if>>
			<<else>>
				<<if _legr is 'legrdown'>>
					<img @class="'layer-sexbaseoverlay anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/anklecuffs/acc_both_down.png'">
				<<else>>
					<img @class="'layer-sexbaseoverlay anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/shoes/anklecuffs/acc_right_up.png'">
				<</if>>
			<</if>>
		<</if>>
	<</if>>

	<<if !$worn.legs.type.includes("naked")>>
		<<set $_legsClothing to setup.clothes.legs[clothesIndex('legs', $worn.legs)]>>

		<<if $feetuse is "penis" or $feetstate is "tentacle">>
			<<set _legl to 'up'>>
			<<set _legr to 'feetjob'>>
		<<elseif $penisuse isnot "othervagina" and $penisuse isnot "otheranus">>
			<<set _legl to 'up'>>
			<<set _legr to 'up'>>
		<<elseif $penisuse is "othervagina" or $penisuse is "otheranus">>
			<<set _legl to 'up'>>
			<<set _legr to 'down'>>
		<<else>>
			<<set _legl to 'down'>>
			<<set _legr to 'down'>>
		<</if>>

		<<if $worn.legs.state is $_legsClothing.state_base>>
			<<set _feetposition to "full">>
		<<else>>
			<<set _feetposition to "knees">>
		<</if>>

		<<set _legColour to "">>
		<<if $worn.legs.colour>>
			<<set _legColour to $worn.legs.colourCustom || "">>
		<</if>>

		<<set _legAccColour to "">>
		<<if $worn.legs.accessory_colour>>
			<<set _legAccColour to $worn.legs.accessory_colourCustom || "">>
		<</if>>

		<<if setup.clothes.legs[clothesIndex('legs', $worn.legs)].colour_combat is 0>>
			<<if $_legsClothing.state_base is "waist">>
				<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
					+ $worn.legs.variable + '/' + _feetposition + _legr + '.png'" @style="_legColour">
			<<elseif $_legsClothing.state_base is "ankles">>
				<<if _legr is "feetjob">>
					<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + '.png'" @style="_legColour">
				<<else>>
					<img @class="'layer-sexlegsback colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legl + 'left' + '.png'" @style="_legColour">
					<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + 'right' + '.png'" @style="_legColour">
				<</if>>
			<<else>>
				<<if _legr is "feetjob">>
					<img @class="'layer-sexlegsback colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legl + 'left' + '.png'" @style="_legColour">
					<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + '.png'" @style="_legColour">
				<<else>>
					<img @class="'layer-sexlegsback colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legl + 'left' + '.png'" @style="_legColour">
					<img @class="'layer-sexlegs colour-legs anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + 'right' + '.png'" @style="_legColour">
				<</if>>
			<</if>>
		<</if>>
		<<if $worn.legs.accessory and setup.clothes.legs[clothesIndex('legs', $worn.legs)].accessory_colour_combat is 0>>
			<<if $_legsClothing.state_base is "waist">>
				<img @class="'layer-sexlegsacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
					+ $worn.legs.variable + '/' + _feetposition + _legr + 'acc.png'" @style="_legAccColour">
			<<elseif $_legsClothing.state_base is "ankles">>
				<<if _legr is "feetjob">>
					<img @class="'layer-sexlegsbackacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + 'acc.png'" @style="_legAccColour">
				<<else>>
					<img @class="'layer-sexlegsbackacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legl + 'left' + 'acc.png'" @style="_legAccColour">
					<img @class="'layer-sexlegsacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + 'right' + 'acc.png'" @style="_legAccColour">
				<</if>>
			<<else>>
				<<if _legr is "feetjob">>
					<img @class="'layer-sexlegsbackacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legl + 'left' + 'acc.png'" @style="_legAccColour">
					<img @class="'layer-sexlegsacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + 'acc.png'" @style="_legAccColour">
				<<else>>
					<img @class="'layer-sexlegsbackacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legl + 'left' + 'acc.png'" @style="_legAccColour">
					<img @class="'layer-sexlegsacc colour-legs_acc anim-doggy-4f-'+_animspeed" @src="'img/sex/missionary/active/legs/'
						+ $worn.legs.variable + '/' + _feetposition + _legr + 'right' + 'acc.png'" @style="_legAccColour">
				<</if>>
			<</if>>
		<</if>>
	<</if>>

	</div>
<</widget>>

:: Widgets Clothes Img [widget]

<<widget "baseClothingStrings">>
	<<set _worn = $worn[_args[0]]>>
	<<set _class to 'anim-idle-2f' + (_worn.colour_sidebar and typeof(_worn.colour) == "string" ? ' clothes-'+_worn.colour.replace(/ /g, '-'):'')>>
	<<set _classAcc to 'anim-idle-2f ' + (_worn.accessory_colour_sidebar and typeof(_worn.accessory_colour) == "string" ? ' clothes-'+_worn.accessory_colour.replace(/ /g, '-') :'')>>
	<<set _style to (_worn.colourCustom ? _worn.colourCustom :'')>>
	<<set _styleAcc to (_worn.accessory_colourCustom ? _worn.accessory_colourCustom :'')>>
<</widget>>

<<widget "baseClothingImg">>
	<<if $worn[_args[0]].name isnot "naked">>
		<<baseClothingStrings _args[0]>>
		<div @class="'clothes-div layer-'+_args[0]">
			<<if $worn[_args[0]].mainImage isnot 0>>
				<img @class="_class" @src="'img/clothes/'+[_args[0]]+'/' + $worn[_args[0]].variable + '/' + 'full.png'" @style="_style">
			<</if>>
			<<if $worn[_args[0]].accessory is 1>>
				<img @class="_classAcc" @src="'img/clothes/'+[_args[0]]+'/' + $worn[_args[0]].variable + '/' + 'acc.png'" @style="_styleAcc">
			<</if>>
		</div>
		<<if $worn[_args[0]].back_img is 1>>
			<div @class="'clothes-div layer-'+_args[0]+'-back'">
				<img @class="$worn[_args[0]].back_img_colour is 'secondary' ? _classAcc : _class" @src="'img/clothes/'+[_args[0]]+'/' + $worn[_args[0]].variable + '/' + 'back.png'" @style="_styleAcc">
			</div>
		<</if>>
	<</if>>
<</widget>>

<<widget "neckimg">>
	<<if $worn.neck.name isnot "naked">>
		<<if $worn.neck.name is "necktie">>
			<<baseClothingStrings "neck">>
			<<if $worn.upper.has_collar is 1>>
				<<set _tieimg = "full_nocollar">>
			<<else>>
				<<set _tieimg = "full">>
			<</if>>
			<div @class="'clothes-div layer-neck'">
			<img @class="_class" @src="'img/clothes/neck/' + $worn.neck.variable + '/' + _tieimg + '.png'" @style="_style">
			<img @class="_classAcc" @src="'img/clothes/neck/' + $worn.neck.variable + '/' + 'acc.png'" @style="_styleAcc">
			<<if $worn.neck.leash is 1>>
				<img @class="_class" @src="'img/clothes/neck/collar/leash.png'">
			<</if>>
			</div>
		<<else>>
			<<baseClothingImg "neck">>
		<</if>>
	<</if>>
<</widget>>

<<widget "handsimg">>
	<<if $worn.hands.name isnot "naked">>
		<<baseClothingStrings "hands">>
		<div @class="'clothes-div layer-hands'">
			<<if $worn.hands.mainImage isnot 0>>
				<img @class="_class" @src="'img/clothes/hands/' + $worn.hands.variable + '/' + 'full.png'" @style="_style">
			<</if>>
			<<if $worn.hands.leftImage is 1 and $leftarm isnot "bound" and $leftarm isnot "grappled" and $leftarm isnot "behind">>
				<<set _leftImage to "left">>
				<<if _coverLeft is true>>
					<<run _leftImage += "_cover">>
				<</if>>
				<img @class="_class" @src="'img/clothes/hands/' + $worn.hands.variable + '/' + _leftImage + '.png'" @style="_style">
				<<if $worn.hands.accessory is 1>>
					<img @class="_classAcc" @src="'img/clothes/hands/' + $worn.hands.variable + '/' + _leftImage + '_acc.png'" @style="_styleAcc">
				<</if>>
			<</if>>
			<<if $worn.hands.rightImage is 1 and $rightarm isnot "bound" and $rightarm isnot "grappled" and $rightarm isnot "behind">>
				<<set _rightImage to "right">>
				<<if _coverRight is true>>
					<<run _rightImage += "_cover">>
				<</if>>
				<img @class="_class" @src="'img/clothes/hands/' + $worn.hands.variable + '/' + _rightImage + '.png'" @style="_style">
				<<if $worn.hands.accessory is 1>>
					<img @class="_classAcc" @src="'img/clothes/hands/' + $worn.hands.variable + '/' + _rightImage + '_acc.png'" @style="_styleAcc">
				<</if>>
			<</if>>
		</div>
	<</if>>
<</widget>>

<<widget "underupperimg">>
	<<if $worn.under_upper.name isnot "naked">>
		<<baseClothingStrings "under_upper">>
		<<switch $underupperwetstage>>
			<<case 1>><<set _underUpperWetness to " clothes-damp">>
			<<case 2>><<set _underUpperWetness to " clothes-wet">>
			<<case 3>><<set _underUpperWetness to " clothes-drenshed">>
			<<default>><<set _underUpperWetness to "">>
		<</switch>>

		<<if $worn.under_upper.integrity lte (clothingData('under_upper',$worn.under_upper,'integrity_max') / 10) * 2>>
			<<set _imgName to "tattered">>
		<<elseif $worn.under_upper.integrity lte (clothingData('under_upper',$worn.under_upper,'integrity_max') / 10) * 5>>
			<<set _imgName to "torn">>
		<<elseif $worn.under_upper.integrity lte (clothingData('under_upper',$worn.under_upper,'integrity_max') / 10) * 9>>
			<<set _imgName to "frayed">>
		<<else>>
			<<set _imgName to "full">>
		<</if>>
		<div @class="'clothes-div layer-under_upper' + _underUpperWetness">
			<<if $worn.under_upper.mainImage isnot 0>>
				<img @class="_class" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + _imgName + '.png'" @style="_style">
			<</if>>
			<<if setup.clothes.under_upper[clothesIndex('under_upper', $worn.under_upper)].breast_img is 1>>
				<img @class="_class" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + (Math.min(_breastSize, 5)) + '.png'" @style="_style">
			<</if>>
			<<if $worn.under_upper.accessory is 1>>
				<img @class="_classAcc" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + 'acc' + ($worn.under_upper.accessory_integrity_img ? '_' + _imgName : '') + '.png'" @style="_styleAcc">
			<</if>>
			<<if $worn.under_upper.breast_acc_img is 1>>
				<img @class="_classAcc" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + (Math.min(_breastSize, 5)) + '_acc.png'" @style="_styleAcc">
			<</if>>
		</div>
		<<set _sleeveClass to {
			"": _class,
			"primary": _class,
			"no": "",
			"secondary": _classAcc
		}[$worn.under_upper.sleeve_colour||""]>>
		<<if _coverRight isnot undefined and $worn.under_upper.sleeve_img is 1>>
			<div @class="'clothes-div layer-rightarmunderclothes' + _underUpperWetness">
			<<if _coverRight is true>>
				<img @class="_sleeveClass" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + 'right_cover.png'" @style="_style">
			<<else>>
				<img @class="_sleeveClass" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + 'right.png'" @style="_style">
			<</if>>
			</div>
		<</if>>
		<<if _coverLeft isnot undefined and $worn.under_upper.sleeve_img is 1>>
			<div @class="'clothes-div layer-leftarmunderclothes' + _underUpperWetness">
			<<if _coverLeft is true>>
				<img @class="_sleeveClass" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + 'left_cover.png'" @style="_style">
			<<else>>
				<img @class="_sleeveClass" @src="'img/clothes/under_upper/' + $worn.under_upper.variable + '/' + 'left.png'" @style="_style">
			<</if>>
			</div>
		<</if>>
	<</if>>
<</widget>>

<<widget "underlowerimg">>
	<<if $worn.under_lower.name isnot "naked">>
		<<baseClothingStrings "under_lower">>
		<<switch $underlowerwetstage>>
			<<case 1>><<set _underlowerWetness to " clothes-damp">>
			<<case 2>><<set _underlowerWetness to " clothes-wet">>
			<<case 3>><<set _underlowerWetness to " clothes-drenshed">>
			<<default>><<set _underlowerWetness to "">>
		<</switch>>

		<<if $worn.under_lower.integrity lte (clothingData('under_lower',$worn.under_lower,'integrity_max') / 10) * 2>>
			<<set _imgName to "tattered">>
		<<elseif $worn.under_lower.integrity lte (clothingData('under_lower',$worn.under_lower,'integrity_max') / 10) * 5>>
			<<set _imgName to "torn">>
		<<elseif $worn.under_lower.integrity lte (clothingData('under_lower',$worn.under_lower,'integrity_max') / 10) * 9>>
			<<set _imgName to "frayed">>
		<<else>>
			<<set _imgName to "full">>
		<</if>>
		<<if $worn.under_lower.mainImage isnot 0 and $worn.under_lower.high_img is 1>>
			<div @class="'clothes-div layer-under_lower-high' + _underlowerWetness">
				<img @class="_class" @src="'img/clothes/under_lower/' + $worn.under_lower.variable + '/' + _imgName + '.png'" @style="_style">
			</div>
		<</if>>
		<div @class="'clothes-div layer-under_lower' + _underlowerWetness">
			<<if $worn.under_lower.mainImage isnot 0 and $worn.under_lower.high_img isnot 1>>
				<img @class="_class" @src="'img/clothes/under_lower/' + $worn.under_lower.variable + '/' + _imgName + '.png'" @style="_style">
			<</if>>
			<<if $worn.under_lower.accessory is 1>>
				<img @class="_classAcc" @src="'img/clothes/under_lower/' + $worn.under_lower.variable + '/' + 'acc.png'" @style="_styleAcc">
			<</if>>
		</div>
		<<if $worn.under_lower.penis_img is 1 and $player.penisExist>>
			<div @class="'clothes-div layer-under_lower-top' + _underlowerWetness">
				<img @class="_class" @src="'img/clothes/under_lower/' + $worn.under_lower.variable + '/' + 'penis.png'" @style="_style">
				<<if $worn.under_lower.accessory is 1>>
					<img @class="_classAcc" @src="'img/clothes/under_lower/' + $worn.under_lower.variable + '/' + 'acc_penis.png'" @style="_styleAcc">
				<</if>>
			</div>
		<</if>>
	<</if>>
<</widget>>

<<widget "lowerimg">>
	<<if $worn.lower.name isnot "naked">>
		<<baseClothingStrings "lower">>
		<<switch $lowerwetstage>>
			<<case 1>><<set _lowerWetness to " clothes-damp">>
			<<case 2>><<set _lowerWetness to " clothes-wet">>
			<<case 3>><<set _lowerWetness to " clothes-drenshed">>
			<<default>><<set _lowerWetness to "">>
		<</switch>>

		<<if $worn.lower.integrity lte (clothingData('lower',$worn.lower,'integrity_max') / 10) * 2>>
			<<set _imgName to "tattered">>
		<<elseif $worn.lower.integrity lte (clothingData('lower',$worn.lower,'integrity_max') / 10) * 5>>
			<<set _imgName to "torn">>
		<<elseif $worn.lower.integrity lte (clothingData('lower',$worn.lower,'integrity_max') / 10) * 9>>
			<<set _imgName to "frayed">>
		<<else>>
			<<set _imgName to "full">>
		<</if>>

		<<if $worn.lower.mainImage isnot 0 and $worn.lower.high_img is 1>>
			<div @class="'clothes-div layer-lower-high' + _lowerWetness">
				<img @class="_class" @src="'img/clothes/lower/' + $worn.lower.variable + '/' + _imgName + '.png'" @style="_style">
			</div>
		<</if>>
		<div @class="'clothes-div layer-lower' + _lowerWetness">
			<<if $worn.lower.mainImage isnot 0 and $worn.lower.high_img isnot 1>>
				<img @class="_class" @src="'img/clothes/lower/' + $worn.lower.variable + '/' + _imgName + '.png'" @style="_style">
			<</if>>
			<<if $worn.lower.accessory is 1>>
				<img @class="_classAcc" @src="'img/clothes/lower/' + $worn.lower.variable + '/' + 'acc' + ($worn.lower.accessory_integrity_img ? '_' + _imgName : '') + '.png'" @style="_styleAcc">
			<</if>>
		</div>
		<<if $worn.lower.back_img is 1>>
			<div @class="'clothes-div layer-back-lower' + _lowerWetness">
				<img @class="$worn.lower.back_img_colour is 'secondary' ? _classAcc : _class" @src="'img/clothes/lower/' + $worn.lower.variable + '/' + 'back.png'" @style="_style">
			</div>
		<</if>>
	<</if>>
<</widget>>

<<widget "overlowerimg">>
	<<if $worn.over_lower.name isnot "naked">>
		<<baseClothingStrings "over_lower">>
		<<if $worn.over_lower.integrity lte (clothingData('over_lower',$worn.over_lower,'integrity_max') / 10) * 2>>
			<<set _imgName to "tattered">>
		<<elseif $worn.over_lower.integrity lte (clothingData('over_lower',$worn.over_lower,'integrity_max') / 10) * 5>>
			<<set _imgName to "torn">>
		<<elseif $worn.over_lower.integrity lte (clothingData('over_lower',$worn.over_lower,'integrity_max') / 10) * 9>>
			<<set _imgName to "frayed">>
		<<else>>
			<<set _imgName to "full">>
		<</if>>
		<div class="layer-over_lower">
			<<if $worn.over_lower.mainImage isnot 0>>
				<img @class="_class" @src="'img/clothes/over_lower/' + $worn.over_lower.variable + '/' + _imgName + '.png'" @style="_style">
			<</if>>
			<<if $worn.over_lower.accessory is 1>>
				<img @class="_classAcc" @src="'img/clothes/over_lower/' + $worn.over_lower.variable + '/' + 'acc.png'" @style="_styleAcc">
			<</if>>
		</div>
		<<if $worn.over_lower.back_img is 1>>
			<div class="layer-back-lower">
				<img @class="$worn.over_lower.back_img_colour is 'secondary' ? _classAcc : _class" @src="'img/clothes/over_lower/' + $worn.over_lower.variable + '/' + 'back.png'" @style="_style">
			</div>
		<</if>>
	<</if>>
<</widget>>

<<widget "genitalsimg">>
	<<if $worn.genitals.name isnot "naked">>
		<<set _genitalsColour = ($worn.genitals.colour ? " clothes-"+$worn.genitals.colour.replace(/ /g, '-') : "")>>
		<div class="layer-genitals">
			<<if $worn.genitals.mainImage isnot 0 and !setup.clothes.genitals[clothesIndex('genitals',$worn.genitals)].hideUnderLower.includes($worn.under_lower.name)>>
				<<if $worn.genitals.name is "chastity cage" and $parasite.penis.name is "urchin">>
					<<if $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 2>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'tattered_urchin.png'" @style="$worn.genitals.colourCustom">
					<<elseif $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 5>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'torn_urchin.png'" @style="$worn.genitals.colourCustom">
					<<elseif $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 9>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'frayed_urchin.png'" @style="$worn.genitals.colourCustom">
					<<else>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'full_urchin.png'" @style="$worn.genitals.colourCustom">
					<</if>>
				<<elseif $worn.genitals.name is "chastity cage" and $parasite.penis.name is "slime">>
					<<if $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 2>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'tattered_slime.png'" @style="$worn.genitals.colourCustom">
					<<elseif $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 5>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'torn_slime.png'" @style="$worn.genitals.colourCustom">
					<<elseif $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 9>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'frayed_slime.png'" @style="$worn.genitals.colourCustom">
					<<else>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'full_slime.png'" @style="$worn.genitals.colourCustom">
					<</if>>
				<<else>>
					<<if $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 2>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'tattered.png'" @style="$worn.genitals.colourCustom">
					<<elseif $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 5>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'torn.png'" @style="$worn.genitals.colourCustom">
					<<elseif $worn.genitals.integrity lte (clothingData('genitals',$worn.genitals,'integrity_max') / 10) * 9>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'frayed.png'" @style="$worn.genitals.colourCustom">
					<<else>>
						<img @class="'anim-idle-2f' + _genitalsColour" @src="'img/clothes/genitals/' + $worn.genitals.variable + '/' + 'full.png'" @style="$worn.genitals.colourCustom">
					<</if>>
				<</if>>
			<</if>>
		</div>
	<</if>>
<</widget>>

<<widget "upperimg">>
	<<if $worn.upper.name isnot "naked">>
		<<baseClothingStrings "upper">>
		<<switch $upperwetstage>>
			<<case 1>><<set _upperWetness to " clothes-damp">>
			<<case 2>><<set _upperWetness to " clothes-wet">>
			<<case 3>><<set _upperWetness to " clothes-drenshed">>
			<<default>><<set _upperWetness to "">>
		<</switch>>
		<<set _tucked = $upperTucked and !setup.clothes.upper[clothesIndex('upper', $worn.upper)].notuck and $worn.upper.outfitPrimary is undefined ? " tucked" : "">>
		<<set $_hoodDown to $worn.upper.hoodposition is "down" ? "_down" : "">>
		<<set $_altPosition to $worn.upper.altposition is "alt" ? "_alt" : "">>
		<div @class="'clothes-div layer-upper' + _tucked + _upperWetness">
			<<if $worn.upper.mainImage isnot 0>>
				<<if $worn.upper.integrity lte (clothingData('upper',$worn.upper,'integrity_max') / 10) * 2>>
					<<set _imgName to "tattered">>
				<<elseif $worn.upper.integrity lte (clothingData('upper',$worn.upper,'integrity_max') / 10) * 5>>
					<<set _imgName to "torn">>
				<<elseif $worn.upper.integrity lte (clothingData('upper',$worn.upper,'integrity_max') / 10) * 9>>
					<<set _imgName to "frayed">>
				<<else>>
					<<set _imgName to "full">>
				<</if>>
				<img @class="_class" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + _imgName + $_hoodDown + $_altPosition + '.png'" @style="_style">
			<</if>>
			<<if setup.clothes.upper[clothesIndex('upper', $worn.upper)].breast_img is 1>>
				<img @class="_class" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + (Math.min(_breastSize, 5)) + '.png'" @style="_style">
			<</if>>
			<<if $worn.upper.accessory is 1>>
				<img @class="_classAcc" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + 'acc' + ($worn.upper.accessory_integrity_img ? '_' + _imgName : '') + $_hoodDown + $_altPosition + '.png'" @style="_styleAcc">
			<</if>>
			<<if $worn.upper.breast_acc_img is 1>>
				<img @class="_classAcc" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + (Math.min(_breastSize, 5)) + '_acc.png'" @style="_styleAcc">
			<</if>>
		</div>
		<<set _sleeveClass to {
			"": _class,
			"primary": _class,
			"no": "",
			"secondary": _classAcc
		}[$worn.upper.sleeve_colour||""]>>
		<<if _coverRight isnot undefined and setup.clothes.upper[clothesIndex('upper', $worn.upper)].sleeve_img is 1>>
			<div @class="'clothes-div layer-rightarmclothes' + _upperWetness">
				<<if _coverRight is true>>
					<img @class="_sleeveClass" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + 'right_cover.png'" @style="_style">
				<<else>>
					<img @class="_sleeveClass" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + 'right.png'" @style="_style">
				<</if>>
			</div>
		<</if>>
		<<if _coverLeft isnot undefined and setup.clothes.upper[clothesIndex('upper', $worn.upper)].sleeve_img is 1>>
			<div @class="'clothes-div layer-leftarmclothes' + _upperWetness">
				<<if _coverLeft is true>>
					<img @class="_sleeveClass" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + 'left_cover.png'" @style="_style">
				<<else>>
					<img @class="_sleeveClass" @src="'img/clothes/upper/' + $worn.upper.variable + '/' + 'left.png'" @style="_style">
				<</if>>
			</div>
		<</if>>
	<</if>>
<</widget>>

<<widget "overupperimg">>
	<<if $worn.over_upper.name isnot "naked">>
		<<baseClothingStrings "over_upper">>
		<<if $worn.over_upper.integrity lte (clothingData('over_upper',$worn.over_upper,'integrity_max') / 10) * 2>>
			<<set _imgName to "tattered">>
		<<elseif $worn.over_upper.integrity lte (clothingData('over_upper',$worn.over_upper,'integrity_max') / 10) * 5>>
			<<set _imgName to "torn">>
		<<elseif $worn.over_upper.integrity lte (clothingData('over_upper',$worn.over_upper,'integrity_max') / 10) * 9>>
			<<set _imgName to "frayed">>
		<<else>>
			<<set _imgName to "full">>
		<</if>>
		<div class="layer-over_upper">
			<<if $worn.over_upper.mainImage isnot 0>>
				<img @class="_class" @src="'img/clothes/over_upper/' + $worn.over_upper.variable + '/' + _imgName + '.png'" @style="_style">
			<</if>>
			<<if setup.clothes.over_upper[clothesIndex('over_upper', $worn.over_upper)].breast_img is 1>>
				<img @class="_class" @src="'img/clothes/over_upper/' + $worn.over_upper.variable + '/' + (Math.min(_breastSize, 5)) + '.png'" @style="_style">
			<</if>>
			<<if $worn.over_upper.accessory is 1>>
				<img @class="_classAcc" @src="'img/clothes/over_upper/' + $worn.over_upper.variable + '/' + 'acc.png'" @style="_styleAcc">
			<</if>>
		</div>
		<<set _sleeveClass to {
			"": _class,
			"primary": _class,
			"no": "",
			"secondary": _classAcc
		}[$worn.over_upper.sleeve_colour||""]>>
		<<if _coverRight isnot undefined and setup.clothes.over_upper[clothesIndex('over_upper', $worn.over_upper)].sleeve_img is 1>>
			<div class="layer-rightarmoverclothes">
				<<if _coverRight is true>>
					<img @class="_sleeveClass" @src="'img/clothes/over_upper/' + $worn.over_upper.variable + '/' + 'right_cover.png'" @style="_style">
				<<else>>
					<img @class="_sleeveClass" @src="'img/clothes/over_upper/' + $worn.over_upper.variable + '/' + 'right.png'" @style="_style">
				<</if>>
			</div>
		<</if>>
		<<if _coverLeft isnot undefined and setup.clothes.over_upper[clothesIndex('over_upper', $worn.over_upper)].sleeve_img is 1>>
			<div class="layer-leftarmoverclothes">
				<<if _coverLeft is true>>
					<img @class="_sleeveClass" @src="'img/clothes/over_upper/' + $worn.over_upper.variable + '/' + 'left_cover.png'" @style="_style">
				<<else>>
					<img @class="_sleeveClass" @src="'img/clothes/over_upper/' + $worn.over_upper.variable + '/' + 'left.png'" @style="_style">
				<</if>>
			</div>
		<</if>>
	<</if>>
<</widget>>

<<widget "imgOpacity">>
	<<if _underUpperOpacity is undefined>>
		<<set _opacity to 1>>
		<<if !$worn.under_upper.type.includes("swim")>>
			<<if $underupperwetstage gte 3>>
				<<set _opacity = Math.clamp(_opacity - 0.5, 0, 1)>>
			<<elseif $underupperwetstage gte 2>>
				<<set _opacity = Math.clamp(_opacity - 0.25, 0, 1)>>
			<</if>>
		<</if>>
		<<set _underUpperOpacity to " opacity("+_opacity+")">>
	<</if>>

	<<if _underLowerOpacity is undefined>>
		<<set _opacity to 1>>
		<<if !$worn.under_lower.type.includes("swim")>>
			<<if $underlowerwetstage gte 3>>
				<<set _opacity = Math.clamp(_opacity - 0.5, 0, 1)>>
			<<elseif $underlowerwetstage gte 2>>
				<<set _opacity = Math.clamp(_opacity - 0.25, 0, 1)>>
			<</if>>
		<</if>>
		<<set _underLowerOpacity to " opacity("+_opacity+")">>
	<</if>>

	<<if _lowerOpacity is undefined>>
		<<set _opacity to 1>>
		<<if !$worn.lower.type.includes("swim")>>
			<<if $lowerwetstage gte 3>>
				<<set _opacity = Math.clamp(_opacity - 0.5, 0, 1)>>
			<<elseif $lowerwetstage gte 2>>
				<<set _opacity = Math.clamp(_opacity - 0.25, 0, 1)>>
			<</if>>
		<</if>>
		<<set _lowerOpacity to " opacity("+_opacity+")">>
	<</if>>

	<<if _upperOpacity is undefined>>
		<<set _opacity to 1>>
		<<if !$worn.upper.type.includes("swim")>>
			<<if $upperwetstage gte 3>>
				<<set _opacity = Math.clamp(_opacity - 0.5, 0, 1)>>
			<<elseif $upperwetstage gte 2>>
				<<set _opacity = Math.clamp(_opacity - 0.25, 0, 1)>>
			<</if>>
		<</if>>
		<<set _upperOpacity to " opacity("+_opacity+")">>
	<</if>>
<</widget>>

<<widget "player-base-body">>
	<<set _filters to $skinColor.current>>
	<<set _img to setup.tanImg.sidebar[($options.tanImgEnabled ? "t" : "f")]>>
	<div id="img" @class="limitedColourContainerClasses() + ' noAnimations'">
		<<charLight "118px" "187px" "limited">>
		<<if $options.sidebarRenderer is 'canvas' or $options.sidebarRenderer is 'both'>> /* <img> renderer */
			<<canvas-player-base-body>>
		<</if>>
		<<if $options.sidebarRenderer is 'img' or $options.sidebarRenderer is 'both'>> /* legacy renderer */
		/*Prep for image checks*/
		<<switch $player.perceived_breastsize>>
		<<case 12>>
			<<set _breastSize to 6>>
		<<case 8 9 10 11>>
			<<set _breastSize to 5>>
		<<case 6 7>>
			<<set _breastSize to 4>>
		<<case 4 5>>
			<<set _breastSize to 3>>
		<<case 3>>
			<<set _breastSize to 2>>
		<<case 0 1 2>>
			<<set _breastSize to 1>>
		<</switch>>
		<<if $player.penisExist>>
			<<set _penisSize to Math.clamp($player.penissize, -2, 4)>>
		<</if>>
		<<set _disabled to ["disabled","hidden"]>>

		<img class="layer-base" @src="_img.basenoarms" @style="'filter: '+_filters.body">
		<img class="layer-basehead" @src="_img.basehead" @style="'filter: '+_filters.body">

		<<if $options.tanImgEnabled>>
			<<if $skinColor.tanValues[0] isnot $skinColor.tanValues[2]>>
				<img class="layer-base" @src="_img.baseTanSwimshorts" @style="'filter: '+_filters.swimshorts">
				<img class="layer-base" @src="_img.baseTanSwimsuit_UUpper" @style="'filter: '+_filters.swimsuitTop">
				<img class="layer-base" @src="_img.baseTanSwimsuit_ULower" @style="'filter: '+_filters.swimsuitBottom">
				<img class="layer-base" @src="_img.baseTanBikini_ULower" @style="'filter: '+_filters.bikiniBottom">
			<</if>>
		<</if>>

		<img class="layer-base" @src="_img.leftarmidle" @style="'filter: '+_filters.body">

		<<if !_disabled.includes($transformationParts.demon.wings)>>
			<<if $exposed gte 2 and $dontHide is false and $transformationParts.traits.flaunting is "default">>
				<img class="layer-tailPenisCover" @src="'img/transformations/demon/flauntwings/'+$transformationParts.demon.wings+'.png'">
			<<else>>
				<img class="layer-backhair" @src="'img/transformations/demon/wings/'+$transformationParts.demon.wings+'.png'">
			<</if>>
		<</if>>
		<<if !_disabled.includes($transformationParts.angel.wings)>>
			<img class="layer-backhair" @src="'img/transformations/angel/rightwing/'+$transformationParts.angel.wings+'.png'">
		<</if>>
		<<if !_disabled.includes($transformationParts.fallenAngel.wings)>>
			<img class="layer-backhair" @src="'img/transformations/fallen/rightwing/'+$transformationParts.fallenAngel.wings+'.png'">
		<</if>>
		<<if !_disabled.includes($transformationParts.bird.wings)>>
			<img class="layer-backhair colour-hair" @src="'img/transformations/bird/rightwing/'+$transformationParts.bird.wings+'.png'">
		<</if>>
		/* 北极星模组 */
		<<if !_disabled.includes($transformationParts.bee.wings)>>
			<img class="layer-backhair" @src="'img/transformations/bee/rightwing/'+$transformationParts.bee.wings+'.png'">
		<</if>>
		/* 北极星 */

		<img class="layer-base" @src="_img.rightarmidle" @style="'filter: '+_filters.body">
		<<if !_disabled.includes($transformationParts.demon.tail)>>
			<<if $exposed gte 2 and $dontHide is false and $transformationParts.traits.flaunting is "default">>
				<img class="layer-tailPenisCover" @src="'img/transformations/demon/flaunttail/'+$transformationParts.demon.tail+'.png'">
			<<else>>
				<img class="layer-backhair" @src="'img/transformations/demon/tail/'+$transformationParts.demon.tail+'.png'">
			<</if>>
		<</if>>
		<<if !_disabled.includes($transformationParts.angel.wings)>>
			<img class="layer-backhair" @src="'img/transformations/angel/leftwing/'+$transformationParts.angel.wings+'.png'">
		<</if>>
		<<if !_disabled.includes($transformationParts.fallenAngel.wings)>>
			<img class="layer-backhair" @src="'img/transformations/fallen/leftwing/'+$transformationParts.fallenAngel.wings+'.png'">
		<</if>>
		<<if !_disabled.includes($transformationParts.bird.wings)>>
			<img class="layer-backhair colour-hair" @src="'img/transformations/bird/leftwing/'+$transformationParts.bird.wings+'.png'">
		<</if>>
		/* 北极星模组 */
		<<if !_disabled.includes($transformationParts.bee.wings)>>
			<img class="layer-backhair" @src="'img/transformations/bee/leftwing/'+$transformationParts.bee.wings+'.png'">
		<</if>>
		/* 北极星 */

		<<if !_disabled.includes($transformationParts.fallenAngel.halo)>>
			<img class="layer-over_head-back" @src="'img/transformations/fallen/backbrokenhalo/'+$transformationParts.fallenAngel.halo+'.png'">
			<img class="layer-halo-front" @src="'img/transformations/fallen/frontbrokenhalo/'+$transformationParts.fallenAngel.halo+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.angel.halo)>>
			<img class="layer-over_head-back" @src="'img/transformations/angel/backhalo/'+$transformationParts.angel.halo+'.png'">
			<img class="layer-halo-front" @src="'img/transformations/angel/fronthalo/'+$transformationParts.angel.halo+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.tail)>>
			<img class="layer-backhair colour-hair" @src="'img/transformations/wolf/tail/'+$transformationParts.wolf.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.cat.tail)>>
			<img class="layer-backhair colour-hair" @src="'img/transformations/cat/tail/'+$transformationParts.cat.tail+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.ears)>>
			<img class="layer-backhair colour-hair" @src="'img/transformations/wolf/ears/'+$transformationParts.wolf.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.pits)>>
			<img class="layer-hirsute colour-hair" @src="'img/transformations/hirsute/pits/'+$transformationParts.wolf.pits+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.pubes)>>
			<img class="layer-hirsute colour-hair" @src="'img/transformations/hirsute/pubes/'+$transformationParts.wolf.pubes+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.wolf.cheeks)>>
			<img class="layer-hirsute colour-hair" @src="'img/transformations/wolf/cheeks/'+$transformationParts.wolf.cheeks+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.cat.ears)>>
			<img class="layer-backhair colour-hair" @src="'img/transformations/cat/ears/'+$transformationParts.cat.ears+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.demon.horns)>>
			<img class="layer-horns" @src="'img/transformations/demon/horns/'+$transformationParts.demon.horns+'.png'">
			/*<img class="layer-face colour-hair" src="img/transformations/demon/hair_overlay.png">*/
		<</if>>

		<<if !_disabled.includes($transformationParts.cow.horns)>>
			<img class="layer-horns" @src="'img/transformations/cow/horns/'+$transformationParts.cow.horns+'.png'">
		<</if>>

		<<if !_disabled.includes($transformationParts.cow.ears)>>
			<img class="layer-horns" @src="'img/transformations/cow/ears/'+$transformationParts.cow.ears+'.png'">
			<img class="layer-face" src="img/transformations/cow/tag.png">
		<</if>>

		<<if !_disabled.includes($transformationParts.cow.tail)>>
			<img class="layer-backhair" @src="'img/transformations/cow/tail/'+$transformationParts.cow.tail+'.png'">
		<</if>>

		<<if $hairposition is "front">>
			<img class="layer-hairforwards colour-hair" @src="'img/hair/sides/' + $hairtype + '/' + $hairlengthstage + '.png'">
		<<else>>
			<img class="layer-backhair colour-hair" @src="'img/hair/sides/' + $hairtype + '/' + $hairlengthstage + '.png'">
		<</if>>
		<img class="layer-fronthair colour-hair" @src="'img/hair/fringe/' + $fringetype + '/' + $fringelengthstage + '.png'">

	<<if $hairlengthstage is "thighs">>
		<<switch $hairtype>>
			<<case "default">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/default/thighs.png">
			<<case "loose">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/loose/thighs.png">
			<<case "curl">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/curl/thighs.png">
			<<case "defined curl">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/defined curl/thighs.png">
			<<case "neat">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/neat/thighs.png">
			<<case "dreads">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/dreads/thighs.png">
			<<default>>
		<</switch>>
	<<elseif $hairlengthstage is "feet">>
		<<switch $hairtype>>
			<<case "default">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/default/feet.png">
			<<case "loose">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/loose/feet.png">
			<<case "straight">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/straight/feet.png">
			<<case "curl">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/curl/feet.png">
			<<case "defined curl">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/defined curl/feet.png">
			<<case "neat">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/neat/feet.png">
			<<case "dreads">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/dreads/feet.png">
			<<case "ruffled">>
				<img class="layer-backhair colour-hair anim-idle-2f" src="img/hair/back/ruffled/feet.png">
			<<default>>
		<</switch>>
	<</if>>


		<<if $options.neverNudeMenus>> /* If player doesn't want to see nude character in menus, render the default breifs or bra + panties on their body */
			<<if $player.gender_appearance neq "m" or $player.perceived_breastsize gte 3>>
				<div class="clothes-div layer-under_upper">
					<img class="clothes-pale-white" src="img/clothes/under_upper/plainbra/full.png" style="">
					<img class="clothes-pale-white" src="img/clothes/under_upper/plainbra/2.png" style="">
				</div>
			<</if>>
			<<if $player.gender_appearance is "m">>
				<div class="clothes-div layer-under_lower">
					<img class="clothes-pale-white" src="img/clothes/under_lower/briefs/full.png" style="">
					<img class="" src="img/clothes/under_lower/briefs/acc.png" style="">
				</div>
			<<else>>
				<div class="clothes-div layer-under_lower">
					<img class="clothes-pale-white" src="img/clothes/under_lower/plainpanties/full.png" style="">
				</div>
			<</if>>
		<<else>>
			<img class="layer-breasts" @src="_img['breasts'+ _breastSize]" @style="'filter: '+_filters.breasts">
			<<if $options.tanImgEnabled and $skinColor.tanValues[0] isnot $skinColor.tanValues[1]>>
				<img class="layer-breasts" @src="_img.baseTanBikini_UUpper + _breastSize + '.png'" @style="'filter: '+_filters.bikiniTop">
			<</if>>

			<<if $pbdisable is "f">>
				<<set _pbColour = ($makeup.pbcolour != 0 ? $makeup.pbcolour : $naturalhaircolour).replace(/ /g, '-')>>
				<div @class="'layer-pbhair pbhair-' + _pbColour">
				<<if $pblevel gt 1>>
					<img class="anim-idle-2f" @src="'img/hair/phair/pb' + $pblevel + '.png'">
				<</if>>
				<<if $pbstrip gte 1>>
					<img class="anim-idle-2f" @src="'img/hair/phair/pbstrip' + $pbstrip + '.png'">
				<</if>>
				</div>
				<div @class="'layer-pbhairballs pbhair-' + _pbColour">
				<<if $player.ballsExist is true and $pblevelballs gt 1 and !$worn.genitals.name.startsWith("chastity")>>
					<img class="anim-idle-2f" @src="'img/hair/phair/balls/' + _penisSize + '_pb' + $pblevelballs + '.png'">
				<</if>>
				</div>
			<</if>>

			<!-- P image insert here - This is not compatible with female pdmod, requires additional editing - add new layer in base.css-->
			<<if _penisSize isnot undefined>>
				<<if $player.virginity.penile is true>>
					<img class="layer-penis" @src="_img['penis_virgin' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
				<<else>>
					<img class="layer-penis" @src="_img['penis' + ($player.ballsExist ? '':'noballs') + _penisSize]" @style="'filter: '+_filters.penis">
				<</if>>
			<</if>>
		<</if>>

		<<if playerHasStrapon()>>
			<<set _class to 'anim-idle-2f' + ($worn.under_lower.colour_sidebar and typeof($worn.under_lower.colour) == "string" ? ' clothes-'+$worn.under_lower.colour.replace(/ /g, '-'):'')>>
			<<set _style to ($worn.under_lower.colourCustom ? $worn.under_lower.colourCustom : $worn.under_lower.colour)>>
			<div @class="'clothes-div layer-under_lower'">
				<img @class="_class" @src="'img/clothes/under_lower/' + $worn.under_lower.variable + '/full.png'" @style="_style">
				<<if $worn.under_lower.accessory is 1>>
					<<set _classAcc to 'anim-idle-2f ' + ($worn.under_lower.accessory_colour_sidebar and typeof($worn.under_lower.accessory_colour) == "string" ? ' clothes-'+$worn.under_lower.accessory_colour.replace(/ /g, '-') :'')>>
					<<set _styleAcc to ($worn.under_lower.accessory_colourCustom ? $worn.under_lower.accessory_colourCustom :'')>>
					<img @class="_classAcc" @src="'img/clothes/under_lower/' + $worn.under_lower.variable + '/' + 'acc.png'" @style="_styleAcc">
				<</if>>
			</div>
		<</if>>

		<<faceimg 1>>
		<</if>> /* $options.sidebarRenderer is img */
	</div>
<</widget>>
